<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  


  <head>
    <title>
      #105 (Scalar Coordinates)
     – CF Metadata
    </title>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!--[if IE]><script type="text/javascript">
      if (/^#__msie303:/.test(window.location.hash))
        window.location.replace(window.location.hash.replace(/^#__msie303:/, '#'));
    </script><![endif]-->
        <link rel="search" href="/trac/search" />
        <link rel="prev" href="./104.html" title="ticket #104" />
        <link rel="last" href="./176.html" title="ticket #176" />
        <link rel="help" href="/trac/wiki/TracGuide" />
        <link rel="alternate" href="./105?format=rss" type="application/rss+xml" class="rss" title="RSS Feed" /><link rel="alternate" href="./105?format=csv" type="text/csv" class="csv" title="Comma-delimited Text" /><link rel="alternate" href="./105?format=tab" type="text/tab-separated-values" class="tab" title="Tab-delimited Text" />
        <link rel="next" href="./106.html" title="ticket #106" />
        <link rel="start" href="/trac/wiki" />
        <link rel="stylesheet" href="/trac/chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="/trac/chrome/common/css/ticket.css" type="text/css" />
        <link rel="first" href="./1.html" title="ticket #1" />
        <link rel="shortcut icon" href="/trac/chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="/trac/chrome/common/trac.ico" type="image/x-icon" />
    <style id="trac-noscript" type="text/css">.trac-noscript { display: none !important }</style>
      <link type="application/opensearchdescription+xml" rel="search" href="/trac/search/opensearch" title="Search CF Metadata" />
    <script type="text/javascript">
      var auto_preview_timeout=2.0;
      var form_token="b8aeac20bf7fd49b63339caa";
      var comments_prefs={"comments_only":"false","comments_order":"oldest"};
    </script>
      <script type="text/javascript" charset="utf-8" src="/trac/chrome/common/js/jquery.js"></script>
      <script type="text/javascript" charset="utf-8" src="/trac/chrome/common/js/babel.js"></script>
      <script type="text/javascript" charset="utf-8" src="/trac/chrome/common/js/trac.js"></script>
      <script type="text/javascript" charset="utf-8" src="/trac/chrome/common/js/search.js"></script>
      <script type="text/javascript" charset="utf-8" src="/trac/chrome/common/js/folding.js"></script>
      <script type="text/javascript" charset="utf-8" src="/trac/chrome/common/js/wikitoolbar.js"></script>
      <script type="text/javascript" charset="utf-8" src="/trac/chrome/common/js/resizer.js"></script>
      <script type="text/javascript" charset="utf-8" src="/trac/chrome/common/js/auto_preview.js"></script>
    <script type="text/javascript">
      jQuery("#trac-noscript").remove();
      jQuery(document).ready(function($) {
        $(".trac-autofocus").focus();
        $(".trac-target-new").attr("target", "_blank");
        setTimeout(function() { $(".trac-scroll").scrollToTop() }, 1);
        $(".trac-disable-on-submit").disableOnSubmit();
      });
    </script>
    <script type="text/javascript" src="/trac/chrome/common/js/threaded_comments.js"></script>
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("div.description").find("h1,h2,h3,h4,h5,h6").addAnchor(_("Link to this section"));
        $(".foldable").enableFolding(false, true);
      /*<![CDATA[*/
        $("#attachments").toggleClass("collapsed");
        $("#trac-up-attachments").click(function () {
          $("#attachments").removeClass("collapsed");
          return true;
        });
        $("#modify").parent().toggleClass("collapsed");
        $(".trac-topnav a").click(function() { $("#modify").parent().removeClass("collapsed"); });
        /* only enable control elements for the currently selected action */
        var actions = $("#action input[name='action']");
        function updateActionFields() {
          actions.each(function () {
            $(this).siblings().find("*[id]").enable($(this).checked());
            $(this).siblings().filter("*[id]").enable($(this).checked());
          });
        }
        actions.click(updateActionFields);
        updateActionFields();
        function setRevertHandler() {
          $("button.trac-revert").click(function() {
            var div = $("div", this);
            var field_name = div[0].id.substr(7);
            var field_value = div.text();
            var input = $("#propertyform *[name=field_" + field_name + "]");
            if (input.length > 0) {
              if (input.filter("input[type=radio]").length > 0) {
                input.val([field_value]);
              } else if (input.filter("input[type=checkbox]").length > 0) {
                input.val(field_value == "1" ? [field_value] : []);
              } else {
                input.val(field_value);
              }
            } else { // Special case for CC checkbox
              input = $("#propertyform input[name=cc_update]").val([]);
            }
            input.change();
            $(this).closest("li").remove();
            return false;
          });
        }
        setRevertHandler();
        var comment_focused = false;
        $("#comment").focus(function() { comment_focused = true; })
                     .blur(function() { comment_focused = false; });
        $("#propertyform").autoSubmit({preview: '1'}, function(data, reply) {
          var items = $(reply);
          // Update ticket box
          $("#ticket").replaceWith(items.filter('#ticket'));
          // Update changelog with original order
          $("#changelog").replaceWith(items.filter("#changelog"));
          // Reorder comments
          applyCommentsOrder(
            $('#prefs input[name="trac-comments-order"]:checked').val());
          // Show warning
          var new_changes = $("#changelog .trac-new");
          $("#trac-edit-warning").toggle(new_changes.length != 0);
          if (new_changes.length != 0)
            $("#changelog").parent().show().removeClass("collapsed");
          // Update view time
          $("#propertyform input[name='view_time']").replaceWith(items.filter("input[name='view_time']"));
          // Update preview
          var preview = $("#ticketchange").html(items.filter('#preview').children());
          var show_preview = preview.children().length != 0;
          $("#ticketchange").toggle(show_preview);
          setRevertHandler();
          // Collapse property form if comment editor has focus
          if (show_preview && comment_focused)
            $("#modify").parent().addClass("collapsed");
          // Execute scripts to load stylesheets
          items.filter("script").appendTo("head");
        }, "#ticketchange .trac-loading");
        $("#trac-comment-editor").autoSubmit({preview_comment: '1'}, function(data, reply) {
          var comment = $("#trac-comment-editor").next("div.comment").html(reply);
          comment.toggle(comment.children().length != 0);
        }, "#changelog .trac-loading");
        /*]]>*/
      });
    </script>
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://cf-trac.llnl.gov/trac"><img src="/trac/chrome/site/cf_logo.png" alt="CF Metadata Trac" height="80" width="400" /></a>
      </div>
      <form id="search" action="/trac/search" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="/trac/login">Login</a></li><li><a href="/trac/about">About Trac</a></li><li><a href="/trac/prefs">Preferences</a></li><li class="last"><a href="/trac/wiki/TracGuide">Help/Guide</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first active"><a href="/trac/query">View Tickets</a></li><li><a href="/trac/roadmap">Roadmap</a></li><li><a href="/trac/timeline">Timeline</a></li><li><a href="/trac/search">Search</a></li><li class="last"><a href="/trac/wiki">Wiki</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
        <ul>
          <li class="first"><span>&larr; <a class="prev" href="./104.html" title="ticket #104">Previous Ticket</a></span></li><li class="last"><span><a class="next" href="./106.html" title="ticket #106">Next Ticket</a> &rarr;</span></li>
        </ul>
        <hr />
      </div>
    <div id="content" class="ticket">
        <div id="ticket" class="trac-content ">
  <div class="date">
    <p>Opened <a class="timeline" href="/trac/timeline?from=2013-07-01T08%3A10%3A16-07%3A00&amp;precision=second" title="See timeline at 07/01/13 08:10:16">8 years ago</a></p>
    <p>Closed <a class="timeline" href="/trac/timeline?from=2013-11-20T06%3A43%3A29-08%3A00&amp;precision=second" title="See timeline at 11/20/13 06:43:29">7 years ago</a></p>
  </div>
  <h2>
    <a href="./105.html" class="trac-id">#105</a>
    <span class="trac-status">
      <a href="/trac/query?status=closed">closed</a>
    </span>
    <span class="trac-type">
      <a href="/trac/query?status=!closed&amp;type=enhancement">enhancement</a>
    </span>
    <span class="trac-resolution">
      (<a href="/trac/query?status=closed&amp;resolution=wontfix">wontfix</a>)
    </span>
  </h2>
  <h1 id="trac-ticket-title" class="searchable">
    <span class="summary">Scalar Coordinates</span>
  </h1>
  <table class="properties">
    <tr>
      <th id="h_reporter">Reported by:</th>
      <td headers="h_reporter" class="searchable"><a href="/trac/query?status=!closed&amp;reporter=markh">markh</a></td>
      <th id="h_owner">Owned by:</th>
      <td headers="h_owner">cf-conventions@…</td>
    </tr>
    <tr>
        <th id="h_priority">
          Priority:
        </th>
        <td headers="h_priority">
              <a href="/trac/query?status=!closed&amp;priority=medium">medium</a>
        </td>
        <th id="h_milestone" class="missing">
          Milestone:
        </th>
        <td headers="h_milestone">
              <a class="missing milestone"></a>
        </td>
    </tr><tr>
        <th id="h_component">
          Component:
        </th>
        <td headers="h_component">
              <a href="/trac/query?status=!closed&amp;component=cf-conventions">cf-conventions</a>
        </td>
        <th id="h_version" class="missing">
          Version:
        </th>
        <td headers="h_version">
              <a href="/trac/query?status=!closed&amp;version="></a>
        </td>
    </tr><tr>
        <th id="h_keywords" class="missing">
          Keywords:
        </th>
        <td headers="h_keywords" class="searchable">
        </td>
        <th id="h_cc" class="missing">
          Cc:
        </th>
        <td headers="h_cc" class="searchable">
        </td>
    </tr>
  </table>
  <div class="description">
    <h3 id="comment:description">
      Description
    </h3>
    <div class="searchable">
      <h2 id="a1.Title">1. Title</h2>
<blockquote>
<p>
Scalar Coordinates
</p>
</blockquote>
<h2 id="a2.Moderator">2. Moderator</h2>
<blockquote>
<p>
unknown
</p>
</blockquote>
<h2 id="a3.Requirement">3. Requirement</h2>
<blockquote>
<p>
<strong>The ability to store scalar coordinates in CF NetCDF data sets.</strong>
</p>
</blockquote>
<blockquote>
<p>
Scalar Coordinates are a valuable semantic concept, allowing data variables to encode coordinates which do not vary across the domain of the data variable. 
</p>
</blockquote>
<blockquote>
<p>
Invariance with respect to the data variable's dimensions is the key characteristic of these coordinates and this is all the meaning that should be explicitly defined for such a coordinate. Further characteristics, such as implied degrees of freedom and potential inter-relationships, may be inferred downstream, at the discretion of the data consumer.
</p>
</blockquote>
<blockquote>
<p>
The current conventions provides clear specification on vector coordinates, encoded as either Coordinate Variables or Auxiliary Coordinate Variables.  Such variables, which may be encoded as not varying with respect to the data variable, can be used wherever it is vital that the inter-relationship and degree of freedom are explicitly encoded. The specification does not make it clear enough what is meant by a scalar coordinate variable.
</p>
</blockquote>
<blockquote>
<p>
The current conventions document (1.6) does not make it clear whether the scalar coordinate variable (section 5.7) is:
</p>
</blockquote>
<blockquote>
<blockquote>
<p>
an encoding detail with explicitly no semantic content, merely storing vector coordinates:
</p>
</blockquote>
</blockquote>
<blockquote>
<blockquote>
<blockquote>
<p>
where the characteristics of these vector coordinates must be inferred by context;
</p>
</blockquote>
</blockquote>
</blockquote>
<blockquote>
<blockquote>
<p>
a semantic container enabling scalar coordinates to be stored and recognised as scalar coordinates.
</p>
</blockquote>
</blockquote>
<blockquote>
<p>
This interpretation requires clarification, which this proposal aim to deliver.  Explicitly, this proposal will define the scalar coordinate variable as a semantic container for coordinate information.
</p>
</blockquote>
<h2 id="a4.InitialStatementofTechnicalProposal">4. Initial Statement of Technical Proposal</h2>
<h4 id="a1.2Terminology">1.2 Terminology</h4>
<blockquote>
<p>
A NetCDF variable which contains coordinate information for a data variable, where the coordinate information does not vary with respect to the data variable's dimensions.
</p>
</blockquote>
<h4 id="a5.7ScalarCoordinateVariables">5.7 Scalar Coordinate Variables</h4>
<blockquote>
<p>
A scalar coordinate variable defines a coordinate which applies to an entire data variable equally.  The scalar coordinate does not vary with respect to the data variable's dimensions.
</p>
</blockquote>
<blockquote>
<p>
The scalar coordinate variable is associated with a data variable via the coordinates attribute.  The scalar coordinate variable does not share any dimensions with the data variable.
</p>
</blockquote>
<blockquote>
<p>
The variable name of a scalar coordinate variable must not match the name of any dimension in the file.
</p>
</blockquote>
<blockquote>
<p>
Bounds may be defined for a scalar coordinate variable in the same way as other coordinates.
</p>
</blockquote>
<blockquote>
<p>
A scalar coordinate variable may be interpreted as implying a potential further dimension, of size one, for the data variable. However, scalar coordinate variables do not define explicit independent dimensions.
</p>
</blockquote>
<blockquote>
<p>
Note that use of scalar coordinate variables for latitude, longitude, vertical, or time coordinates will inhibit COARDS conforming applications from recognizing them.
</p>
</blockquote>
<h4 id="a6.1Labels">6.1 Labels</h4>
<blockquote>
<p>
... {Unchanged, up to the last sentence}
</p>
</blockquote>
<blockquote>
<p>
If a character variable referenced by a data variable's coordinates attribute has only one dimension, the maximum length of the string, it is a string-valued scalar coordinate variable (see Section 5.7 Scalar Coordinate Variables).
</p>
</blockquote>
<h4 id="a9.2CollectionsInstancesandElements">9.2 Collections, Instances and Elements</h4>
<blockquote>
<p>
... {First two paragraphs unchanged}
</p>
</blockquote>
<blockquote>
<p>
If there is only a single feature to be stored in a data variable, the instance dimension may be omitted.   In this case the mandatory space-time coordinate variables will not vary with respect to the instance dimension.  These space-time coordinates, as defined in table 9.1, may need to be defined as scalar coordinate variables, to maintain the required relationships for the feature types.
</p>
</blockquote>
<h2 id="a5.Benefits">5. Benefits</h2>
<blockquote>
<p>
The community benefits from this proposal by gaining clarity over the interpretation of scalar coordinate variables as a simple semantic concept within CF with a clear encoding.
</p>
</blockquote>
<blockquote>
<p>
All use cases presented to the mailing list to date are supported by this proposal, including:
</p>
</blockquote>
<ul><li>encoding of size one explicit coordinate variables as scalar coordinate variables to simplify data variable shape;
</li><li>encoding of coordinates where there are multiple possible inter-dependency relationships, such as:
<ul><li>multiple related time coordinates;
</li><li>model, experiment, run identifiers for multi-model analyses;
</li></ul></li><li>encoding of discrete sampling geometries where there is a single feature;
</li><li>encoding of coefficients as coordinates.
</li></ul><p>
 
</p>
<blockquote>
<p>
The data producer has the opportunity to select a scalar coordinate as the most appropriate way of describing some aspects of their data.  The encoding convenience of omitting dimensions of size one is provided for, with a clear recognition that this encoding option slightly limits the richness of expression available with CF vector coordinates.  
</p>
</blockquote>
<h2 id="a6.StatusQuo">6. Status Quo</h2>
<blockquote>
<p>
Currently the interpretation of scalar coordinate variables is unclear.  It is recognised that a clarification is required.  As such the status quo is deemed undesirable (e.g.<a class="ext-link" href="https://cf-pcmdi.llnl.gov./104#comment:4"><span class="icon">​</span>4</a>, <a class="ext-link" href="https://cf-pcmdi.llnl.gov./104#comment:15"><span class="icon">​</span>15</a>)
</p>
</blockquote>
<blockquote>
<p>
There is another ticket, <a class="closed ticket" href="./104.html" title="enhancement: Clarify the interpretation of scalar coordinate variables (closed: fixed)">#104</a>, proposing an alternative change.  These two tickets should not both be approved, they are mutually exclusive.
</p>
</blockquote>

    </div>
  </div>
</div>
          

        <div>
          <div class="trac-noscript" style="position: relative">
            <form id="prefs" method="get" action="/trac/prefs" style="position: absolute; right: 0">
              <div id="trac-comments-order">
                <input type="radio" id="trac-comments-oldest" name="trac-comments-order" value="oldest" checked="checked" />
                <label for="trac-comments-oldest">Oldest first</label>
                <input type="radio" id="trac-comments-newest" name="trac-comments-order" value="newest" />
                <label for="trac-comments-newest">Newest first</label>
                <span id="trac-threaded-toggle" style="display: none">
                  <input type="radio" id="trac-comments-threaded" name="trac-comments-order" value="threaded" />
                  <label for="trac-comments-threaded">Threaded</label>
                </span>
              </div>
              <div>
                <input id="trac-comments-only-toggle" type="checkbox" />
                <label for="trac-comments-only-toggle">Comments only</label>
              </div>
            </form>
          </div>
          <h3 class="foldable">Change History <span class="trac-count">(10)</span></h3>
          <div id="changelog">
              <div class="change" id="trac-change-1-1372718046000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:1" class="cnum">
    <a href="#comment:1">comment:1</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-07-01T15%3A34%3A06-07%3A00&amp;precision=second" title="See timeline at 07/01/13 15:34:06">8 years ago</a> by stevehankin
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
After reading this, my "2 cents" (hoping I will offend no one by saying this) is that for me this text does not clarify; instead it further confuses.  It seems to me that we are moving towards clarity when CF concepts can be described in <strong>fewer</strong> words; not more.
</p>
<p>
I wonder if the effort to refine the definition of a scalar variable is misplaced.  Does the confusion actually come from our having fuzzy answers to these questions:
</p>
<ol><li> what is the semantic difference (not the syntactic difference) between a coordinate variable and an auxiliary coordinate variable?
</li><li> through what syntax does the semantic distinction in question 1 get represented when the coordinate variables are of length 1?
</li><li>does CF regard the mathematical distinction between a scalar and vector of length 1 as significant?  (Personally I hope not.  Mathematical hair-splitting will not lead to clarity imho.)
</li></ol>
    </div>

              </div>
              <div class="change" id="trac-change-2-1372774813000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:2" class="cnum">
    <a href="#comment:2">comment:2</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-07-02T07%3A20%3A13-07%3A00&amp;precision=second" title="See timeline at 07/02/13 07:20:13">8 years ago</a> by biard
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Steve,
</p>
<p>
I like the way you think!  In particular, the question regarding the mathematical distinction got my mind going.  I don't know if it will generate more heat than light, but here's what your questions led me into.  (By the way, I'm an "independent" when it comes to this issue.  I see merit in the arguments of both the "Originalist" and "Living CF" parties.)
</p>
<p>
If I think about the concept of scalar vs vector/matrix in linear algebra, I find that a scalar is treated differently than a matrix of dimension 1 x 1.  Multiplication of a matrix by a scalar is defined as multiplication of every element of the matrix by the scalar.  Multiplication of one matrix by another is only possible when they share a dimension.  Following that sort of semantics, a scalar coordinate could well be considered to be different than a vector coordinate in a similar fashion.  A scalar coordinate is considered to apply to every element of a variable as an ensemble.  A vector coordinate is considered to apply to a variable through a relation over one or more shared dimensions.
</p>
<p>
If I continue to follow the linear algebra analogy, I can decompose a matrix multiplication by a vector into a sum of scalars (taken from the vector) multiplying column vectors (taken from the matrix).  Correspondingly, I can compose a set of scalars multiplying column vectors (that all have the same length) into a matrix multiplied by a vector.  This corresponds to the multi-file aggregation of variables with scalar coordinates into a single higher-dimension variable with a vector coordinate composed from scalar coordinates.
</p>
<p>
Thinking about the problem this way actually is leading me to smile more on the idea of scalar coordinates being different from vector coordinates of length 1.  The semantic difference is specifically honored within linear algebra, and adopting this approach doesn't seem (to me) to constrain anyone in terms of how they may choose to compose (or not compose) higher-dimension relations using multiple files.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-3-1372856195000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:3" class="cnum">
    <a href="#comment:3">comment:3</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-07-03T05%3A56%3A35-07%3A00&amp;precision=second" title="See timeline at 07/03/13 05:56:35">8 years ago</a> by jonathan
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Dear all
</p>
<p>
I don't think anyone will be surprised to read that I disagree with this proposal insofar as it is inconsistent with the proposal of ticket 104, which was made by David and me. Like Jim, I appreciate Steve's clear questions.
</p>
<p>
Perhaps unlike Jim, I agree with Steve on the answer to his third question. I do not think that CF needs to make any semantic distinction between a scalar and a vector of size one. The proposed text says, "A scalar coordinate variable defines a coordinate which applies to an entire data variable equally," but this is also true of a coordinate variable of size one, isn't it. For instance, a scalar coordinate variable of height=1.5 m means exactly the same as a size-one coordinate variable of height=1.5 m. The alternative of a scalar is offered because it is less effort to encode it, that's all. But they mean the same: both of them indicate that all the values in the data variable apply at a height of 1.5 m.
</p>
<p>
Moreover, I think that drawing a formal distinction introduces an unnecessary conceptual complexity for aggregation. If I have one data variable with a scalar coordinate variable of height=1.5 m, and another for the same geophysical quantity with a scalar coordinate variable of height=10 m, and the horizontal grid and all other coordinates are the same in the two variables, I should be able to aggregate them into a single data variable having a size-two dimension for height. I would expect to be able to do exactly the same thing if the two data variables each had a size-one coordinate variable of height instead of a scalar, or if one was a scalar and the other had size one. I see no need or value to having conceptual differences among these cases.
</p>
<p>
Going the other way, if I extract a single height level from a data variable with a multivalued height coordinate, I expect to get a size-one height coordinate. However, I don't think this has a different meaning from a data variable which has a scalar height coordinate of the same value. Both of them are on the same single level. There is no semantic distinction, in my opinion, just a formal one, which is a matter of convenience.
</p>
<p>
Steve's question 1 asks what is the semantic difference between a coordinate variable and an auxiliary coordinate variable. According to the <a class="ext-link" href="https://cf-pcmdi.llnl.gov./95"><span class="icon">​</span>draft CF data model</a>, whose development has got stuck because we can't agree on the issue being discussed in this ticket and ticket 104, a coordinate variable is 1D, monotonic and numeric (I presume because if it's not numeric it's hard to make it reliably monotonic), while an auxiliary coordinate variable can be multidimensional, string-valued or numeric, and doesn't have to be monotonic (which wouldn't make sense if it was multidimensional anyway). In addition, there can be only one coordinate variable for any given dimension, but there can be any number of auxiliary coordinate variables with any given dimension.
</p>
<p>
Steve's question 2 refers to the special case when you have both a coordinate variable and an auxiliary coordinate variable with a single size-one dimension. With size one, monotonicity is not an issue, obviously. If they are both numeric, either of them could be the coordinate variable, and the other the auxiliary coordinate variable. This freedom of choice is not limited to size one. If you have a 1D coordinate variable and several 1D auxiliary coordinate variables of the same dimension, and all of them are numeric and monotonic, any one of the auxiliary coordinate variables could equally serve as the coordinate variable. For instance, I might have a multivalued coordinate variable of height, and going along with it an auxiliary coordinate variable <tt>model_level_number(height)</tt>, which is also monotonic. It would be equally valid to switch them round and have a coordinate variable of model level number and an auxiliary coordinate variable <tt>height(model_level_number)</tt>. This is a choice I can freely make when encoding the dataset. It depends on whether I want to regard height or model level number as an independent spatial coordinate of the data. The other quantity is a dependent variable, a function of the independent spatial coordinate. The distinction is indicated formally in netCDF by making one of them a (Unidata) coordinate variable, whose name equals the name of its dimension, and the other a (CF) coordinate variable, named by the CF <tt>coordinates</tt> attribute of the data variable. Part of the answer to Steve's question 2 is that this distinction is made syntactically in just the same way for size-one variables as for multivalued variables.
</p>
<p>
Since a numeric scalar coordinate variable doesn't have a dimension, it's not possible to tell formally whether it's semantically the same as a coordinate variable or an auxiliary coordinate variable. Therefore in ticket 104 we propose to make it clear that it is semantically a coordinate variable. (If it's not numeric, it must be semantically an auxiliary coordinate variable.) We think that's what was meant when scalar coordinate variables were invented. We also think this is the right choice because you only really need an auxiliary coordinate variable if you also have a coordinate variable (for instance, if you have both model level number and height), and in that situation you must have a netCDF dimension to show that they are linked. That's the only way CF-netCDF offers to indicate the connection between them. Hence you cannot use scalar coordinate variables in that situation. If you do have scalars of both height and model level number, the most obvious interpretation is that they are independent, we think. If that wasn't the intention of the data-writer, the file is defective, but not illegal. It needn't do much damage in practice, because it should be easy for the user of software to indicate that these two coordinates should actually be regarded as belonging together, if that is relevant to know (for instance, in aggregation).
</p>
<p>
The bottom of line of this rather lengthy contribution, in response to Steve's nice short one, is that
</p>
<ul><li>Question 1 is already clear in CF.
</li><li>Question 2 is clear for size one dimensions.
</li><li>Question 2 is not clearly enough answered for scalars, and ticket 104 proposes to make it clear (i.e. numeric scalars are coordinate variables, not auxiliaries).
</li><li>My answer to question 3 is No. I can't see anything in CF currently which makes a distinction and I don't think it would be helpful to do so.
</li></ul><p>
Cheers
</p>
<p>
Jonathan
</p>

    </div>

              </div>
              <div class="change" id="trac-change-4-1372861404000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:4" class="cnum">
    <a href="#comment:4">comment:4</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-07-03T07%3A23%3A24-07%3A00&amp;precision=second" title="See timeline at 07/03/13 07:23:24">8 years ago</a> by markh
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Replying to <a class="ticket" href="./105#comment:1" title="Comment 1">stevehankin</a>:
</p>
<p>
Useful questions Steve, thank you
</p>
<p>
A point of view on these from me:
</p>
<ol><li>what is the semantic difference (not the syntactic difference) between a coordinate variable and an auxiliary coordinate variable? 
<ul><li>an Auxiliary Coordinate variable describes dimensions of a data variable, it is not definitive;
</li><li>a Coordinate Variable provides a definitive, ordered, reversible definition of one dimension of a data variable.
</li></ul></li><li>through what syntax does the semantic distinction in question 1 get represented when the coordinate variables are of length 1?
<ul><li>If there is a relevant dimension of size 1 defined in the file, then the facilities exist to make the distinction.
</li><li>However, scalar coordinate variables do not vary with any data dimensions 
<ul><li>as such they are not Coordinate variables, they are more like Auxiliary Coordinates which describe zero data dimensions.
</li><li>Because they are scalars it is a very easy step to promote a scalar to a coordinate variable, a vector, by adding a dimension
<ul><li>thus they may be treated as functionally equivalent by the data consumer
</li><li>however, this is an extra step, taken by data consumers, adding information to the data set
</li></ul></li><li>This distinction recognises that Scalar Coordinates are semantically less rich than other vector coordinates.
</li></ul></li></ul></li><li>does CF regard the mathematical distinction between a scalar and vector of length 1 as significant? 
<ul><li>I think it does, in it's current use in various places in the conventions document and the community;
</li><li>a scalar is a different thing with different properties from a size one vector:
<ul><li>I don't think this is hair splitting, I think it is useful and a facet that will be generally recognised by data consumers and creators.
</li></ul></li></ul></li></ol>
    </div>

              </div>
              <div class="change" id="trac-change-5-1372862106000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:5" class="cnum">
    <a href="#comment:5">comment:5</a>
  </span>
          <span>follow-up:</span>
    <a href="#comment:6" class="follow-up">↓ 6</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-07-03T07%3A35%3A06-07%3A00&amp;precision=second" title="See timeline at 07/03/13 07:35:06">8 years ago</a> by markh
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
I have had a few requests for more examples, so I have prepared a <a class="ext-link" href="https://cf-pcmdi.llnl.gov/trac/wiki/onScalarCoordinates"><span class="icon">​</span>wiki page</a> to try and assist in the comprehension of the issues surrounding this ticket and ticket <a class="closed ticket" href="./104.html" title="enhancement: Clarify the interpretation of scalar coordinate variables (closed: fixed)">#104</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-6-1372870897000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:6" class="cnum">
    <a href="#comment:6">comment:6</a>
  </span>
        in reply to:
    <a href="#comment:5">↑ 5</a>
        ;
          <span>follow-up:</span>
    <a href="#comment:7" class="follow-up">↓ 7</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-07-03T10%3A01%3A37-07%3A00&amp;precision=second" title="See timeline at 07/03/13 10:01:37">8 years ago</a> by davidhassell
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Replying to <a class="ticket" href="./105#comment:5" title="Comment 5">markh</a>:
</p>
<blockquote class="citation">
<p>
I have had a few requests for more examples, so I have prepared a <a class="ext-link" href="https://cf-pcmdi.llnl.gov/trac/wiki/onScalarCoordinates"><span class="icon">​</span>wiki page</a> to try and assist in the comprehension of the issues surrounding this ticket and ticket <a class="closed ticket" href="./104.html" title="enhancement: Clarify the interpretation of scalar coordinate variables (closed: fixed)">#104</a>
</p>
</blockquote>
<p>
Thank your for the examples, Mark, but I'm afraid that I find some of your comments quite partisan.
</p>
<p>
 
<em>"The right hand column shows a number of current uses of scalar coordinates we have encountered in software creating CF NetCDF datasets. All of these examples become invalid if <a class="closed ticket" href="./104.html" title="enhancement: Clarify the interpretation of scalar coordinate variables (closed: fixed)">#104</a> is implemented but remain valid if <a class="closed ticket" href="./105.html" title="enhancement: Scalar Coordinates (closed: wontfix)">#105</a> is implemented."</em>
</p>
<p>
Please could you say which software libraries these are?
</p>
<p>
<em>"For <a class="closed ticket" href="./104.html" title="enhancement: Clarify the interpretation of scalar coordinate variables (closed: fixed)">#104</a> we will have extensive need to re-engineer code and revisit data writing and reading capabilities, whilst retaining backwards compatibility with pre 1.7 CF data sets."</em>
</p>
<p>
With respect, the amount of code you may have written based on <a class="closed ticket" href="./105.html" title="enhancement: Scalar Coordinates (closed: wontfix)">#105</a> prior to its possible acceptance does not, by itself, seem to be a valid reason for accepting it! That said, Jonathan has previously pointed out that in a software library, it is easy to apply the <a class="closed ticket" href="./105.html" title="enhancement: Scalar Coordinates (closed: wontfix)">#105</a> view on <a class="closed ticket" href="./104.html" title="enhancement: Clarify the interpretation of scalar coordinate variables (closed: fixed)">#104</a> datasets, so your work will not have been in vain, whatever happens.
</p>
<p>
What do you mean by <em>"retaining backwards compatibility with pre 1.7 CF data sets."</em>?
</p>
<p>
<em>"In all these cases <a class="closed ticket" href="./104.html" title="enhancement: Clarify the interpretation of scalar coordinate variables (closed: fixed)">#104</a> is driving a change in my behaviour as a data creator, where as <a class="closed ticket" href="./105.html" title="enhancement: Scalar Coordinates (closed: wontfix)">#105</a> is enabling me to carry on as I currently work, whilst clarifying the interpretation of my data for consumers."</em>
</p>
<p>
See above.
</p>
<p>
In your multimodel ensemble example, you say that <em>"the data creator should not have to define a set of inter-relationships at the point of data writing, there are no valid ways of doing this to meet all needs , no unique answer. <a class="closed ticket" href="./105.html" title="enhancement: Scalar Coordinates (closed: wontfix)">#105</a> recognises these characteristics as emergent properties, not defined at the time of writing each data set."</em>
</p>
<p>
I disagree. When the experiment was set up, the dimensionality and inter-relationships were clearly defined. For example, it was known if <tt>exp_param2</tt> was auxiliary or independent to <tt>exp_param1</tt>. One could easily create an API which throws away that information, but I don't think that the conventions should support a situation where that it is not known if <tt>exp_param2</tt> <em>was actually</em> auxiliary or independent to <tt>exp_param1</tt>.
</p>
<p>
The same holds, in my view, for your forecast times example. In general, a single forecast can have many times (and therefore forecast periods) but only one forecast reference time, so I would be happy with encoding this, for example, as:
</p>
<pre class="wiki">dimensions: 
  time = 24 ;                  // or size 1, it makes no difference
variables:   
  time(time) ; 
  forecast_reftime;            // #104 scalar coordinate =&gt; not auxiliary to time
  forecast_refperiod(time) ; 
</pre><p>
All the best,
</p>
<p>
David
</p>

    </div>

              </div>
              <div class="change" id="trac-change-7-1373037172000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:7" class="cnum">
    <a href="#comment:7">comment:7</a>
  </span>
        in reply to:
    <a href="#comment:6">↑ 6</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-07-05T08%3A12%3A52-07%3A00&amp;precision=second" title="See timeline at 07/05/13 08:12:52">8 years ago</a> by markh
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Replying to <a class="ticket" href="./105#comment:6" title="Comment 6">davidhassell</a>:
</p>
<p>
Hello David
</p>
<p>
I'll try to answer your questions
</p>
<blockquote class="citation">
<p>
<em>"The right hand column shows a number of current uses of scalar coordinates we have encountered in software creating CF NetCDF datasets. All of these examples become invalid if <a class="closed ticket" href="./104.html" title="enhancement: Clarify the interpretation of scalar coordinate variables (closed: fixed)">#104</a> is implemented but remain valid if <a class="closed ticket" href="./105.html" title="enhancement: Scalar Coordinates (closed: wontfix)">#105</a> is implemented."</em>
</p>
<p>
Please could you say which software libraries these are?
</p>
</blockquote>
<p>
The software I am most aware of is a range of in house code bases, written in a variety of programming languages and interfacing to the NetCDF API, to write datasets.
</p>
<p>
I know some of these interface to libraries, such as CDAT and Met Office IDL libraries, others make us of tools such as NCO and CDO and others are pretty self contained.
</p>
<p>
There is quite a range of architectures.
</p>
<blockquote class="citation">
<p>
What do you mean by <em>"retaining backwards compatibility with pre 1.7 CF data sets."</em>?
</p>
</blockquote>
<p>
<a class="closed ticket" href="./104.html" title="enhancement: Clarify the interpretation of scalar coordinate variables (closed: fixed)">#104</a> proposes a change in interpretation of scalar coordinate variables.  If 104 is adopted, we will need to retain the capability to recognise one interpretation of scalars for &lt;= 1.6 datasets and another for &gt;= 1.7 data sets.
 
</p>
<blockquote class="citation">
<p>
The same holds, in my view, for your forecast times example. In general, a single forecast can have many times (and therefore forecast periods) but only one forecast reference time
</p>
</blockquote>
<p>
The models which output data don't define the nature of the three time coordinate inter-relationship, the only define that there are two degrees of freedom.  All interpretations of this statement are equally valid, and useful, when the data is created.
</p>
<p>
The representation you have used is not one I would choose to use, even if I no longer had access to scalar coordinates, it does not represent my understanding of the use of time in our forecast models.
</p>
<p>
mark
</p>

    </div>

              </div>
              <div class="change" id="trac-change-8-1373206550000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:8" class="cnum">
    <a href="#comment:8">comment:8</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-07-07T07%3A15%3A50-07%3A00&amp;precision=second" title="See timeline at 07/07/13 07:15:50">8 years ago</a> by jonathan
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Dear Mark
</p>
<p>
You say that ticket 104 proposes a change in the interpretation of scalar coordinate variables, and that it would make some existing datasets invalid. I have to say that I think both of these statements are incorrect. As you know, I think the interpretation proposed in ticket 104 is not only the intention of the convention when it was written, but also the most obvious and simplest interpretation of the existing text. However, this debate demonstrates that it's not the only possible interpretation, and I can't argue that yours is definitely excluded by the existing text. But I would emphasise, as I've said before, that adopting 104 does not invalidate any existing dataset. I think that the examples you have given of datasets not OK with 104 but OK with 105 are all legal CF-netCDF files, and would remain so if we clarified the convention as 104 proposes, but they are not good examples of CF-netCDF files.
</p>
<p>
For instance, why would you not make a single model level number and the corresponding single vertical coordinate value belong to the same (size-one) dimension? They are very likely to belong together. It is hard to imagine how it could be useful to have <em>independent</em> multivalued coordinates of model level number and vertical coordinate. If they are not independent when there are two levels, why would it be useful <em>not</em> to indicate their relationship when there is only one level? I would argue that a file is deficient, though not invalid, if it does not show this relationship.
</p>
<p>
In another example, you write concerning time (i.e. forecast time), forecast reference time (i.e. analysis time) and forecast period, that "The models which output data don't define the nature of the three time coordinate inter-relationship; they only define that there are two degrees of freedom." This sounds bizarre to me. I find it hard to imagine the writer of the data (or the writer of the software which created the data) thinking, "There are three variables but only two independent dimensions and I want to leave it deliberately vague which are the dimensions." I think it is more likely that this is a degenerate case of a system which has defined relationships between one or two multivalued coordinates in general. One interesting possibility is that it might be one of a collection of forecasts, with various times and forecast reference times, that don't constitute a 2D array. In that case there could be a single discrete axis (CF section 4.5), with no coordinate variable, and all three coordinates would be auxiliary. There's only <em>one</em> dimension in this case. How can you be sure that there are two dimensions (but not which two they are) if all three of the coordinates are single-valued? I think it is best to record the relationship which is most appropriate to the system which generated the dataset, but you may wish to reinterpret the data if a different description is more convenient.
</p>
<p>
You write that "104 is driving a change in my behaviour as a data creator, where as 105 is enabling me to carry on as I currently work." I would say that 104 does not <em>force</em> anyone to change how they write single-valued coordinates, but it might strongly <em>encourage</em> them to clarify their intentions by writing more informative CF-netCDF files.
</p>
<p>
Best wishes
</p>
<p>
Jonathan
</p>

    </div>

              </div>
              <div class="change" id="trac-change-9-1383158256000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:9" class="cnum">
    <a href="#comment:9">comment:9</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-10-30T11%3A37%3A36-07%3A00&amp;precision=second" title="See timeline at 10/30/13 11:37:36">7 years ago</a> by markh
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
This ticket has not garnered support compared to its sister ticket, <a class="closed ticket" href="./104.html" title="enhancement: Clarify the interpretation of scalar coordinate variables (closed: fixed)">#104</a>
</p>
<p>
I suggest that this ticket is closed, if there are no objections in the next seven days.
</p>
<p>
This should allow <a class="closed ticket" href="./104.html" title="enhancement: Clarify the interpretation of scalar coordinate variables (closed: fixed)">#104</a> to reach a conclusion in time for CF 1.7
</p>

    </div>

              </div>
              <div class="change" id="trac-change-10-1384958609000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:10" class="cnum">
    <a href="#comment:10">comment:10</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-11-20T06%3A43%3A29-08%3A00&amp;precision=second" title="See timeline at 11/20/13 06:43:29">7 years ago</a> by markh
  </h3>
  <div class="trac-ticket-buttons">
  </div>
  <ul class="changes">
    <li class="trac-field-resolution">
      <strong class="trac-field-resolution">Resolution</strong>
        set to <em>wontfix</em>
    </li><li class="trac-field-status">
      <strong class="trac-field-status">Status</strong>
        changed from <em>new</em> to <em>closed</em>
    </li>
  </ul>
    <div class="comment searchable">
      <p>
ticket closed, no further action required
</p>

    </div>

              </div>
          </div>
        </div>
      <div id="help"><strong>Note:</strong> See
        <a href="/trac/wiki/TracTickets">TracTickets</a> for help on using
        tickets.</div>
    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="./105?format=rss" class="rss">RSS Feed</a>
        </li><li>
          <a rel="nofollow" href="./105?format=csv" class="csv">Comma-delimited Text</a>
        </li><li class="last">
          <a rel="nofollow" href="./105?format=tab" class="tab">Tab-delimited Text</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="https://trac.edgewall.org/"><img src="/trac/chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="/trac/about"><strong>Trac 1.0.20</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the CF Metadata home page at<br /><a href="http://cf-convention.github.io">http://cf-convention.github.io</a><br><font color="#0000ff" size="3"><b>The CF Metadata Trac issue tracker is read-only and will soon be shut down permanently</b></font></p>
    </div>
  </body>
</html>
