<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  


  <head>
    <title>
      #80 (Add missing CF parameters to translate Coordinate Reference System properties to/from OGC Well-Known Text format)
     – CF Metadata
    </title>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!--[if IE]><script type="text/javascript">
      if (/^#__msie303:/.test(window.location.hash))
        window.location.replace(window.location.hash.replace(/^#__msie303:/, '#'));
    </script><![endif]-->
        <link rel="search" href="/trac/search" />
        <link rel="prev" href="./79.html" title="ticket #79" />
        <link rel="last" href="./176.html" title="ticket #176" />
        <link rel="help" href="/trac/wiki/TracGuide" />
        <link rel="alternate" href="./80?format=rss" type="application/rss+xml" class="rss" title="RSS Feed" /><link rel="alternate" href="./80?format=csv" type="text/csv" class="csv" title="Comma-delimited Text" /><link rel="alternate" href="./80?format=tab" type="text/tab-separated-values" class="tab" title="Tab-delimited Text" />
        <link rel="next" href="./81.html" title="ticket #81" />
        <link rel="start" href="/trac/wiki" />
        <link rel="stylesheet" href="/trac/chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="/trac/chrome/common/css/ticket.css" type="text/css" />
        <link rel="first" href="./1.html" title="ticket #1" />
        <link rel="shortcut icon" href="/trac/chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="/trac/chrome/common/trac.ico" type="image/x-icon" />
    <style id="trac-noscript" type="text/css">.trac-noscript { display: none !important }</style>
      <link type="application/opensearchdescription+xml" rel="search" href="/trac/search/opensearch" title="Search CF Metadata" />
    <script type="text/javascript">
      var auto_preview_timeout=2.0;
      var form_token="b8aeac20bf7fd49b63339caa";
      var comments_prefs={"comments_only":"false","comments_order":"oldest"};
    </script>
      <script type="text/javascript" charset="utf-8" src="/trac/chrome/common/js/jquery.js"></script>
      <script type="text/javascript" charset="utf-8" src="/trac/chrome/common/js/babel.js"></script>
      <script type="text/javascript" charset="utf-8" src="/trac/chrome/common/js/trac.js"></script>
      <script type="text/javascript" charset="utf-8" src="/trac/chrome/common/js/search.js"></script>
      <script type="text/javascript" charset="utf-8" src="/trac/chrome/common/js/folding.js"></script>
      <script type="text/javascript" charset="utf-8" src="/trac/chrome/common/js/wikitoolbar.js"></script>
      <script type="text/javascript" charset="utf-8" src="/trac/chrome/common/js/resizer.js"></script>
      <script type="text/javascript" charset="utf-8" src="/trac/chrome/common/js/auto_preview.js"></script>
    <script type="text/javascript">
      jQuery("#trac-noscript").remove();
      jQuery(document).ready(function($) {
        $(".trac-autofocus").focus();
        $(".trac-target-new").attr("target", "_blank");
        setTimeout(function() { $(".trac-scroll").scrollToTop() }, 1);
        $(".trac-disable-on-submit").disableOnSubmit();
      });
    </script>
    <script type="text/javascript" src="/trac/chrome/common/js/threaded_comments.js"></script>
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("div.description").find("h1,h2,h3,h4,h5,h6").addAnchor(_("Link to this section"));
        $(".foldable").enableFolding(false, true);
      /*<![CDATA[*/
        $("#attachments").toggleClass("collapsed");
        $("#trac-up-attachments").click(function () {
          $("#attachments").removeClass("collapsed");
          return true;
        });
        $("#modify").parent().toggleClass("collapsed");
        $(".trac-topnav a").click(function() { $("#modify").parent().removeClass("collapsed"); });
        /* only enable control elements for the currently selected action */
        var actions = $("#action input[name='action']");
        function updateActionFields() {
          actions.each(function () {
            $(this).siblings().find("*[id]").enable($(this).checked());
            $(this).siblings().filter("*[id]").enable($(this).checked());
          });
        }
        actions.click(updateActionFields);
        updateActionFields();
        function setRevertHandler() {
          $("button.trac-revert").click(function() {
            var div = $("div", this);
            var field_name = div[0].id.substr(7);
            var field_value = div.text();
            var input = $("#propertyform *[name=field_" + field_name + "]");
            if (input.length > 0) {
              if (input.filter("input[type=radio]").length > 0) {
                input.val([field_value]);
              } else if (input.filter("input[type=checkbox]").length > 0) {
                input.val(field_value == "1" ? [field_value] : []);
              } else {
                input.val(field_value);
              }
            } else { // Special case for CC checkbox
              input = $("#propertyform input[name=cc_update]").val([]);
            }
            input.change();
            $(this).closest("li").remove();
            return false;
          });
        }
        setRevertHandler();
        var comment_focused = false;
        $("#comment").focus(function() { comment_focused = true; })
                     .blur(function() { comment_focused = false; });
        $("#propertyform").autoSubmit({preview: '1'}, function(data, reply) {
          var items = $(reply);
          // Update ticket box
          $("#ticket").replaceWith(items.filter('#ticket'));
          // Update changelog with original order
          $("#changelog").replaceWith(items.filter("#changelog"));
          // Reorder comments
          applyCommentsOrder(
            $('#prefs input[name="trac-comments-order"]:checked').val());
          // Show warning
          var new_changes = $("#changelog .trac-new");
          $("#trac-edit-warning").toggle(new_changes.length != 0);
          if (new_changes.length != 0)
            $("#changelog").parent().show().removeClass("collapsed");
          // Update view time
          $("#propertyform input[name='view_time']").replaceWith(items.filter("input[name='view_time']"));
          // Update preview
          var preview = $("#ticketchange").html(items.filter('#preview').children());
          var show_preview = preview.children().length != 0;
          $("#ticketchange").toggle(show_preview);
          setRevertHandler();
          // Collapse property form if comment editor has focus
          if (show_preview && comment_focused)
            $("#modify").parent().addClass("collapsed");
          // Execute scripts to load stylesheets
          items.filter("script").appendTo("head");
        }, "#ticketchange .trac-loading");
        $("#trac-comment-editor").autoSubmit({preview_comment: '1'}, function(data, reply) {
          var comment = $("#trac-comment-editor").next("div.comment").html(reply);
          comment.toggle(comment.children().length != 0);
        }, "#changelog .trac-loading");
        /*]]>*/
      });
    </script>
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://cf-trac.llnl.gov/trac"><img src="/trac/chrome/site/cf_logo.png" alt="CF Metadata Trac" height="80" width="400" /></a>
      </div>
      <form id="search" action="/trac/search" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="/trac/login">Login</a></li><li><a href="/trac/about">About Trac</a></li><li><a href="/trac/prefs">Preferences</a></li><li class="last"><a href="/trac/wiki/TracGuide">Help/Guide</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first active"><a href="/trac/query">View Tickets</a></li><li><a href="/trac/roadmap">Roadmap</a></li><li><a href="/trac/timeline">Timeline</a></li><li><a href="/trac/search">Search</a></li><li class="last"><a href="/trac/wiki">Wiki</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
        <ul>
          <li class="first"><span>&larr; <a class="prev" href="./79.html" title="ticket #79">Previous Ticket</a></span></li><li class="last"><span><a class="next" href="./81.html" title="ticket #81">Next Ticket</a> &rarr;</span></li>
        </ul>
        <hr />
      </div>
    <div id="content" class="ticket">
        <div id="ticket" class="trac-content ">
  <div class="date">
    <p>Opened <a class="timeline" href="/trac/timeline?from=2012-03-06T15%3A56%3A45-08%3A00&amp;precision=second" title="See timeline at 03/06/12 15:56:45">9 years ago</a></p>
    <p>Closed <a class="timeline" href="/trac/timeline?from=2017-05-11T12%3A51%3A41-07%3A00&amp;precision=second" title="See timeline at 05/11/17 12:51:41">4 years ago</a></p>
  </div>
  <h2>
    <a href="./80.html" class="trac-id">#80</a>
    <span class="trac-status">
      <a href="/trac/query?status=closed">closed</a>
    </span>
    <span class="trac-type">
      <a href="/trac/query?status=!closed&amp;type=enhancement">enhancement</a>
    </span>
    <span class="trac-resolution">
      (<a href="/trac/query?status=closed&amp;resolution=fixed">fixed</a>)
    </span>
  </h2>
  <h1 id="trac-ticket-title" class="searchable">
    <span class="summary">Add missing CF parameters to translate Coordinate Reference System properties to/from OGC Well-Known Text format</span>
  </h1>
  <table class="properties">
    <tr>
      <th id="h_reporter">Reported by:</th>
      <td headers="h_reporter" class="searchable"><a href="/trac/query?status=!closed&amp;reporter=etourigny">etourigny</a></td>
      <th id="h_owner">Owned by:</th>
      <td headers="h_owner"><a href="/trac/query?status=!closed&amp;owner=davidhassell">davidhassell</a></td>
    </tr>
    <tr>
        <th id="h_priority">
          Priority:
        </th>
        <td headers="h_priority">
              <a href="/trac/query?status=!closed&amp;priority=medium">medium</a>
        </td>
        <th id="h_milestone" class="missing">
          Milestone:
        </th>
        <td headers="h_milestone">
              <a class="missing milestone"></a>
        </td>
    </tr><tr>
        <th id="h_component">
          Component:
        </th>
        <td headers="h_component">
              <a href="/trac/query?status=!closed&amp;component=cf-conventions">cf-conventions</a>
        </td>
        <th id="h_version" class="missing">
          Version:
        </th>
        <td headers="h_version">
              <a href="/trac/query?status=!closed&amp;version="></a>
        </td>
    </tr><tr>
        <th id="h_keywords">
          Keywords:
        </th>
        <td headers="h_keywords" class="searchable">
              <a href="/trac/query?status=!closed&amp;keywords=~projections">projections</a> <a href="/trac/query?status=!closed&amp;keywords=~wkt">wkt</a>
        </td>
        <th id="h_cc">
          Cc:
        </th>
        <td headers="h_cc" class="searchable">
              <a href="/trac/query?status=!closed&amp;cc=~jonathan">jonathan</a>, <a href="/trac/query?status=!closed&amp;cc=~pbentley">pbentley</a>
        </td>
    </tr>
  </table>
  <div class="description">
    <h3 id="comment:description">
      Description
      <a href="./80?action=diff&amp;version=29" class="lastmod trac-diff" title="2015-04-22 14:26:40.283165+00:00">
        (last modified by jonathan)
      </a>
    </h3>
    <div class="searchable">
      <h2 id="a1.Title">1. Title</h2>
<p>
Add missing CF parameters to translate Coordinate Reference System properties to/from OGC Well-Known Text format.
</p>
<h2 id="a2.Moderator">2. Moderator</h2>
<p>
Jonathan Gregory
</p>
<h2 id="a3.Requirement">3. Requirement</h2>
<p>
CF-1.6 grid mapping parameters do not allow to fully represent Geographic and Projected Coordinate Reference System (CRS) definitions in Open Geospatial Consortium (OGC) Well-Known Text format. 
</p>
<p>
The following WKT nodes cannot be transformed to/from CF-1.6: PROJCS, GEOGCS, DATUM, SPHEROID, TOWGS84, PRIMEM. In particular the absence of parameters that correspond to DATUM and TOWGS84 parameters can cause datum shifting errors.
</p>
<p>
Adding new parameters to the CF grid_mapping specification would allow to translate projected and geographic CRS WKT definitions to/from CF grid_mapping definitions without loss of information.
</p>
<p>
This is a simpler and easier approach than including the full OGC WKT string (as proposed in CF  Metadata trac ticket <a class="closed ticket" href="./69.html" title="enhancement: Specification of Coordinate Reference System properties in Well-Known ... (closed: fixed)">#69</a>) and detecting the potential conflicts between the CF and WKT definitions.
</p>
<h2 id="a4.InitialStatementofTechnicalProposal">4. Initial Statement of Technical Proposal</h2>
<p>
The following grid mapping attributes would be added and described in Table F1
</p>
<ul><li>horizontal_datum_name
</li><li>towgs84 (a double-precision array, with 3, 6 or 7 values)
</li><li>prime_meridian_name
</li><li>reference_ellipsoid_name
</li><li>projected_coordinate_system_name
</li><li>geographic_coordinate_system_name
</li></ul><p>
The rationale for adding the various name parameters is to ensure a 100% compatibility between OGC WKT definitions and CF grid_mapping definitions and also to make the CF definitions more representative. In general, the names should be equal to the ones used in the EPSG database (see &lt;OGP/EPSG&gt;).
</p>
<p>
Named datums are particularly troublesome, as there is no unique naming scheme in OGC WKT (see &lt;link2&gt; and &lt;CT&gt;). The use of TOWGS84 parameters (inside a DATUM node) allow to approximate datum shifts to the WGS84 datum, but if precise datum shifts are required (using datum shift grids), then it is important that the datums are uniquely identified. It is required to follow the OGR/Cadcorp naming scheme described in the horizontal_datum_name entry for table F1 below (to ensure compatibility with Simple Features and CT specifications).
</p>
<p>
For reference the names and parameters of PRIMEM and SPHEROID entries from the EPSG database are provided in &lt;link1&gt; (prime_meridian.csv and ellipsoid.csv). DATUM entries, along with their transformed names and preferred TOWGS84 parameters are given in &lt;link1&gt; (horiz_datum.csv).
</p>
<p>
A similar proposal could be made to account for vertical CRS (VERT_CS in WKT), but this is outside the scope of this proposal.
</p>
<p>
As an example, the modified “British National Grid” example below would loose information if it were converted to and from CF-1.6:
</p>
<pre class="wiki">PROJCS["unnamed",
    GEOGCS["unknown",
        DATUM["unknown",
            SPHEROID["Spheroid",6377563.396,299.3249646000044]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",49],
    PARAMETER["central_meridian",-2],
    PARAMETER["scale_factor",0.9996012717],
    PARAMETER["false_easting",400000],
    PARAMETER["false_northing",-100000],
    UNIT["metre",1]]
</pre><p>
The PROJCS, GEOGCS, DATUM and SPHEROID names are lost, but more importantly the TOWGS84 parameters also. The SPHEROID and PRIMEM parameters are recovered due to existing CF grid_mapping parameters, and the PRIMEM name is restored because Greenwich corresponds to longitude_of_prime_meridian = 0.
</p>
<h3 id="Changestosection5.6">Changes to section 5.6</h3>
<pre class="wiki">&lt;at the end of 1st paragraph&gt;
The translation of CF coordinate variables to/from OGC Well-Known Text (WKT) format is summarized in a few examples below and described in detail in &lt;link1&gt;. 
</pre><pre class="wiki">Example 5.9. Latitude and longitude on the WGS 1984 datum

&lt;CF definition&gt;

OGC WKT :

GEOGCS["WGS 84",
        DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433]]
</pre><pre class="wiki">Example 5.10. British National Grid
&lt;...&gt;
	char crs ;
		crs:grid_mapping_name = "transverse_mercator" ;
		crs:longitude_of_central_meridian = -2. ;
		crs:false_easting = 400000. ;
		crs:false_northing = -100000. ;
		crs:latitude_of_projection_origin = 49. ;
		crs:scale_factor_at_central_meridian = 0.9996012717 ;
		crs:longitude_of_prime_meridian = 0. ;
		crs:semi_major_axis = 6377563.396 ;
		crs:inverse_flattening = 299.324964600004 ;
		crs:projected_coordinate_system_name = "OSGB 1936 / British National Grid" ;
		crs:geographic_coordinate_system_name = "OSGB 1936" ;
		crs:horizontal_datum_name = "OSGB_1936" ;
		crs:reference_ellipsoid_name = "Airy 1830" ;
		crs:prime_meridian_name = "Greenwich" ;
		crs:towgs84 = 375., -111., 431., 0., 0., 0., 0. ;

OGC WKT :

PROJCS["OSGB 1936 / British National Grid",
    GEOGCS["OSGB 1936",
        DATUM["OSGB_1936",
            SPHEROID["Airy 1830",6377563.396,299.3249646000044],
            TOWGS84[375,-111,431,0,0,0,0]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",49],
    PARAMETER["central_meridian",-2],
    PARAMETER["scale_factor",0.9996012717],
    PARAMETER["false_easting",400000],
    PARAMETER["false_northing",-100000],
    UNIT["metre",1]]
</pre><h3 id="ChangestoTableF1">Changes to Table F1</h3>
<table class="wiki">
<tr><td>Attribute</td><td>Type</td><td>Description
</td></tr><tr><td>horizontal_datum_name</td><td>S</td><td>The name of the geodetic (horizontal) datum, which corresponds to the procedure used to measure positions on the surface of the Earth. Valid datum names and their associated parameters are given in &lt;link1&gt; (horiz_datum.csv, OGC_DATUM_NAME column)  and are obtained by transforming the EPSG name using the following rules (used by OGR and Cadcorp): convert all non alphanumeric characters (including +) to underscores, then strip any leading, trailing or repeating underscores. This is to ensure that named datums can be correctly identified for precise datum transformations (see &lt;link2&gt; for more details). Corresponds to a OGC WKT DATUM node name.
</td></tr><tr><td>towgs84</td><td>N</td><td>This indicates a list of up to 7 Bursa Wolf transformation parameters., which can be used to approximate a transformation from the horizontal datum to the WGS84 datum. More precise datum transformations can be done with datum shift grids. Represented as a double-precision array, with 3, 6 or 7 values (if there are less than 7 values the remaining are considered to be zero). Corresponds to a OGC WKT TOWGS84 node.
</td></tr><tr><td>prime_meridian_name</td><td>S</td><td>The name of the prime meridian associated with the geodetic datum. Valid names are given in &lt;link1&gt; (prime_meridian.csv). Corresponds to a OGC WKT PRIMEM node name.
</td></tr><tr><td>|reference_ellipsoid_name</td><td>S</td><td>The name of the reference ellipsoid. Valid names are given in &lt;link1&gt; (ellipsoid.csv). Corresponds to a OGC WKT SPHEROID node name.
</td></tr><tr><td>geographic_coordinate_system_name</td><td>S</td><td>The name of the geographic coordinate system (GCS). Corresponds to a OGC WKT GEOGCS node name.
</td></tr><tr><td>projected_coordinate_system_name</td><td>S</td><td>The name of the projected coordinate system (PCS). Corresponds to a OGC WKT PROJCS node name.
</td></tr></table>
<h3 id="ChangestoReferences">Changes to References</h3>
<ul><li>&lt;link1&gt; <a class="ext-link" href="http://cf-trac.llnl.gov/trac/wiki/Cf2CrsWkt"><span class="icon">​</span>http://cf-trac.llnl.gov/trac/wiki/Cf2CrsWkt</a>
</li><li>&lt;link2&gt;  <a class="ext-link" href="http://home.gdal.org/projects/opengis/wktproblems.html"><span class="icon">​</span>http://home.gdal.org/projects/opengis/wktproblems.html</a>
</li><li>&lt;CT&gt; OpenGIS Coordinate Transformation Service Implementation Specification 1.0 <a class="ext-link" href="http://www.opengeospatial.org/standards/ct"><span class="icon">​</span>http://www.opengeospatial.org/standards/ct</a>
</li></ul><h2 id="a5.Benefits">5. Benefits</h2>
<p>
By implementing this proposal, we should assure that data producers and software developers can include most of the datum information and other decriptive properties of specific projections.
</p>
<p>
This proposal is much simpler and easier to manage than the proposal in trac ticket <a class="closed ticket" href="./69.html" title="enhancement: Specification of Coordinate Reference System properties in Well-Known ... (closed: fixed)">#69</a>, which is entirely optional and has failed to reach consensus so far.
</p>
<h2 id="a6.StatusQuo">6. Status Quo</h2>
<p>
Data producers are forced to add custom WKT entries to their data files without any standard, which does not promote interoperability.
</p>

    </div>
  </div>
</div>
          
    <div id="attachments">
        <h3 class="foldable">Attachments <span class="trac-count">(3)</span></h3>
        <div class="attachments">
          <dl class="attachments">
              <dt>
    <a href="/trac/attachment/ticket/80/issue80.txt" title="View attachment">issue80.txt</a><a href="/trac/raw-attachment/ticket/80/issue80.txt" class="trac-rawlink" title="Download">​</a>
       (<span title="5368 bytes">5.2 KB</span>) -
      added by <em>etourigny</em> <a class="timeline" href="/trac/timeline?from=2013-02-19T08%3A53%3A29-08%3A00&amp;precision=second" title="See timeline at 02/19/13 08:53:29">8 years ago</a>.
  </dt>
              <dd>
                final draft
              </dd>
              <dt>
    <a href="/trac/attachment/ticket/80/issue80-2.txt" title="View attachment">issue80-2.txt</a><a href="/trac/raw-attachment/ticket/80/issue80-2.txt" class="trac-rawlink" title="Download">​</a>
       (<span title="5659 bytes">5.5 KB</span>) -
      added by <em>jonathan</em> <a class="timeline" href="/trac/timeline?from=2013-03-12T06%3A11%3A31-07%3A00&amp;precision=second" title="See timeline at 03/12/13 06:11:31">8 years ago</a>.
  </dt>
              <dd>
                Slightly modified version of Etienne's attachment
              </dd>
              <dt>
    <a href="/trac/attachment/ticket/80/issue80.2.txt" title="View attachment">issue80.2.txt</a><a href="/trac/raw-attachment/ticket/80/issue80.2.txt" class="trac-rawlink" title="Download">​</a>
       (<span title="5439 bytes">5.3 KB</span>) -
      added by <em>jonathan</em> <a class="timeline" href="/trac/timeline?from=2013-03-12T10%3A19%3A57-07%3A00&amp;precision=second" title="See timeline at 03/12/13 10:19:57">8 years ago</a>.
  </dt>
              <dd>
                with footnote (3) deleted
              </dd>
          </dl>
          <p>
            Download all attachments as: <a rel="nofollow" href="/trac/zip-attachment/ticket/80/">.zip</a>
          </p>
          
        </div>
    </div>

        <div>
          <div class="trac-noscript" style="position: relative">
            <form id="prefs" method="get" action="/trac/prefs" style="position: absolute; right: 0">
              <div id="trac-comments-order">
                <input type="radio" id="trac-comments-oldest" name="trac-comments-order" value="oldest" checked="checked" />
                <label for="trac-comments-oldest">Oldest first</label>
                <input type="radio" id="trac-comments-newest" name="trac-comments-order" value="newest" />
                <label for="trac-comments-newest">Newest first</label>
                <span id="trac-threaded-toggle" style="display: none">
                  <input type="radio" id="trac-comments-threaded" name="trac-comments-order" value="threaded" />
                  <label for="trac-comments-threaded">Threaded</label>
                </span>
              </div>
              <div>
                <input id="trac-comments-only-toggle" type="checkbox" />
                <label for="trac-comments-only-toggle">Comments only</label>
              </div>
            </form>
          </div>
          <h3 class="foldable">Change History <span class="trac-count">(39)</span></h3>
          <div id="changelog">
              <div class="change" id="trac-change-1-1331832077000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:1" class="cnum">
    <a href="#comment:1">comment:1</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2012-03-15T10%3A21%3A17-07%3A00&amp;precision=second" title="See timeline at 03/15/12 10:21:17">9 years ago</a> by jonathan
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Dear Etienne
</p>
<p>
Thank you for making this proposal and the great deal of work that you and Phil have invested in writing the wiki page. Your csv files will also be valuable to users of CF for reference. If this proposal is adopted, we should ensure all these resources are kept in permanent homes and properly linked from the CF website.
</p>
<p>
I hope others with appropriate expertise will comment on this proposal.
</p>
<p>
Cheers
</p>
<p>
Jonathan
</p>

    </div>

              </div>
              <div class="change" id="trac-change-2-1332424535000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:2" class="cnum">
    <a href="#comment:2">comment:2</a>
  </span>
          <span>follow-up:</span>
    <a href="#comment:3" class="follow-up">↓ 3</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2012-03-22T06%3A55%3A35-07%3A00&amp;precision=second" title="See timeline at 03/22/12 06:55:35">9 years ago</a> by markh
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Hello Etienne
</p>
<p>
firstly I am very pleased to see the work invested in cataloguing.  I echo Jonathan's desire to maintain these resources to ensure that the work can be beneficial long after your initial efforts.
</p>
<p>
I feel that the proper definition of the datum for a coordinate reference system needs a little more than CF currently provides.
</p>
<p>
I agree that the 6 grid mapping attributes in section 4 should be added to CF.
</p>
<p>
I am not sure I would put examples of translating between grid_mapping and WKT inside the CF specification; I think the CF spec should define the use of grid_mapping variables and attributes.  I would put the details of translating between these encodings elsewhere.
</p>
<p>
From your examples you are inferring the nested structure used in WKT from the flat attribute list used in CF.  
</p>
<p>
In your WKT and CF examples of OSGB, the WKT contains two 'units', one for the GeogCS and one for the ProjCS.  These are not included in the CF: are they always alble to be inferred, does CF provide the details on how to infer this?
</p>
<p>
Please could you elaborate a little on how this is achieved?
</p>
<p>
If the key information is contained in the attribute names, should this be documented, alongside the names, within the CF specification? 
</p>
<p>
also:
</p>
<blockquote class="citation">
<p>
|reference_ellipsoid_name
</p>
</blockquote>
<p>
contains a '|' at the start of the name, which I presume is a typo
</p>

    </div>

              </div>
              <div class="change" id="trac-change-3-1337350024000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:3" class="cnum">
    <a href="#comment:3">comment:3</a>
  </span>
        in reply to:
    <a href="#comment:2">↑ 2</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2012-05-18T07%3A07%3A04-07%3A00&amp;precision=second" title="See timeline at 05/18/12 07:07:04">9 years ago</a> by etourigny
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Replying to <a class="ticket" href="./80#comment:2" title="Comment 2">markh</a>:
</p>
<blockquote class="citation">
<p>
Hello Etienne
</p>
<p>
firstly I am very pleased to see the work invested in cataloguing.  I echo Jonathan's desire to maintain these resources to ensure that the work can be beneficial long after your initial efforts.
</p>
</blockquote>
<p>
Hi Mark,
sorry for not responding earlier - I never got a message from trac! Thanks for your support.
</p>
<blockquote class="citation">
<p>
I feel that the proper definition of the datum for a coordinate reference system needs a little more than CF currently provides.
</p>
<p>
I agree that the 6 grid mapping attributes in section 4 should be added to CF.
</p>
</blockquote>
<p>
good!
</p>
<blockquote class="citation">
<p>
I am not sure I would put examples of translating between grid_mapping and WKT inside the CF specification; I think the CF spec should define the use of grid_mapping variables and attributes.  I would put the details of translating between these encodings elsewhere.
</p>
</blockquote>
<p>
Do you refer to specific examples (which are necessary in my opinion) or the notes in the table?
Should these then go in a wiki page, linked in the CF spec as a reference?  
</p>
<blockquote class="citation">
<p>
From your examples you are inferring the nested structure used in WKT from the flat attribute list used in CF.  
</p>
</blockquote>
<p>
I'm not sure I understand completely.  Do you mean that the examples are sufficient to explain the translations, so no need to add translation comments in table F1?
</p>
<blockquote class="citation">
<p>
In your WKT and CF examples of OSGB, the WKT contains two 'units', one for the GeogCS and one for the ProjCS.  These are not included in the CF: are they always alble to be inferred, does CF provide the details on how to infer this?
</p>
<p>
Please could you elaborate a little on how this is achieved?
</p>
</blockquote>
<p>
from the CT 1.0 spec document
</p>
<pre class="wiki">7.3.19 UNIT
This describes units used for values elsewhere within the parent WKT clause (sometimes
including descendants of the parent clause).
The physical dimension (i.e. type) of the units is determined by context. For example, in a
GEOGCS the type of the units is angular. In a VERT_CS the type of the units is linear.
Within a UNIT clause, the units are described by relating them to a fundamental unit of that type
with a conversion factor. For linear units, the conversion factor is the scalar value that converts
the described units into meters. For angular units, the conversion factor is the scalar value that
converts the described units into radians.

</pre><p>
for a GEOGCS node, UNIT["degree",0.0174532925199433]] is the most common (it's value is PI/180), no need to translate it to/from CF. Not sure how to handle other types (i.e. radians) though - this might require transforming all angular values, including PM.
</p>
<p>
For a PROJCS the units value is usually in in m or km. 
This is encoded in the CF coordinates "unis" attribute. The default "m" could assumed if there is no "units" attribute in the coord variable.  In the example, CF x:units=&#34;m" corresponds to WKT UNIT["metre",1]]:
</p>
<pre class="wiki">  double x(x) ;
    x:standard_name = "projection_x_coordinate" ;
    x:units = "m" ;
</pre><blockquote class="citation">
<p>
If the key information is contained in the attribute names, should this be documented, alongside the names, within the CF specification? 
</p>
</blockquote>
<p>
The key information is in the value of the attribute, so for example if the PROJCS units would be km the corresponding node could be UNIT["km",1000]]. Perhaps we could add the CT 1.0 wording above or similar, which would be sufficient to explain how they relate to CF units attributes.
</p>
<blockquote class="citation">
<p>
also:
</p>
<blockquote class="citation">
<p>
|reference_ellipsoid_name
</p>
</blockquote>
<p>
contains a '|' at the start of the name, which I presume is a typo
</p>
</blockquote>
<p>
yes
</p>

    </div>

              </div>
              <div class="change" id="trac-change-4-1339596884000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:4" class="cnum">
    <a href="#comment:4">comment:4</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2012-06-13T07%3A14%3A44-07%3A00&amp;precision=second" title="See timeline at 06/13/12 07:14:44">9 years ago</a> by jonathan
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Dear Mark and Etienne
</p>
<p>
As far as I can see, the proposal is OK as it stands, apart from the typo Mark pointed out. I believe that in the CF equivalents the units are either defined by the attribute definition, or stated by a units attribute. If the units were not degrees for a geographical coordinate system, they would have be translated to degrees_north and degrees_east, since CF requires latitude and longitude to have these units; udunits permits radians to be translated into degrees_east and degrees_north.
</p>
<p>
Are there any further comments on this proposal?
</p>
<p>
Jonathan
</p>

    </div>

              </div>
              <div class="change" id="trac-change-5-1339601444000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:5" class="cnum">
    <a href="#comment:5">comment:5</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2012-06-13T08%3A30%3A44-07%3A00&amp;precision=second" title="See timeline at 06/13/12 08:30:44">9 years ago</a> by etourigny
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Jonathan - do you propose any text or changes to CF regarding units handling CF&lt;-&gt;WKT?
</p>
<p>
i.e. a short paragraph somewhere explaining how units are translated, depending on if the CRS is a projected or geographic one?
</p>
<p>
How do you define the units by the attribute definition?
</p>

    </div>

              </div>
              <div class="change" id="trac-change-6-1339686383000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:6" class="cnum">
    <a href="#comment:6">comment:6</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2012-06-14T08%3A06%3A23-07%3A00&amp;precision=second" title="See timeline at 06/14/12 08:06:23">9 years ago</a> by jonathan
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Dear Etienne
</p>
<p>
No, I don't propose any changes to your CF text. Since the question has been raised, I agree it would be helpful to add a remark about the units translation, but since this is an issue for CF&lt;-&gt;WKT translation rather than for CF itself, you could put that remark in the wiki page about the translation. What I mean by the units being defined by the attribute is that, for instance, the definition of <tt>grid_north_pole_latitude</tt> in Appendix F says it is in <tt>degrees_north</tt>, and <tt>semi_major_axis</tt> says it is in metres. However, now that I look at it, I see it's not defined in all cases, and it should be. I would therefore like to add to your proposal, as follows:
</p>
<p>
Amend the definition in Appendix F for <tt>latitude_of_projection_origin</tt> by appending "Units: <tt>degrees_north</tt>, and for <tt>longitude_of_central_meridian</tt>, <tt>longitude_of_prime_meridian</tt>, <tt>longitude_of_projection_origin</tt>, <tt>straight_vertical_longitude_from_pole</tt> by appending "Units: <tt>degrees_east</tt>.
</p>
<p>
This hasn't been clarified before because it has been implicit, I think.
</p>
<p>
Thanks
</p>
<p>
Jonathan
</p>

    </div>

              </div>
              <div class="change" id="trac-change-7-1339692071000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:7" class="cnum">
    <a href="#comment:7">comment:7</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2012-06-14T09%3A41%3A11-07%3A00&amp;precision=second" title="See timeline at 06/14/12 09:41:11">9 years ago</a> by etourigny
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
ok - you mean modifying table F1 right?
</p>
<p>
Also north_pole_grid_longitude should have degrees_north instead of degrees
</p>
<p>
example:
</p>
<pre class="wiki">latitude_of_projection_origin	N	 The latitude (degrees_east) chosen as the origin of rectangular coordinates for a map projection. Domain: -90.0 &lt;= latitude_of_projection_origin &lt;= 90.0

longitude_of_central_meridian	N	 The line of longitude (degrees_north) at the center of a map projection generally used as the basis for constructing the projection. Domain: -180.0 &lt;= longitude_of_central_meridian &lt; 180.0
</pre><p>
or this?
</p>
<pre class="wiki">latitude_of_projection_origin	N	 The latitude chosen as the origin of rectangular coordinates for a map projection. Units: degrees_east, Domain: -90.0 &lt;= latitude_of_projection_origin &lt;= 90.0 

longitude_of_central_meridian	N	 The line of longitude at the center of a map projection generally used as the basis for constructing the projection.  Units: degrees_north, Domain: -180.0 &lt;= longitude_of_central_meridian &lt; 180.0.
</pre>
    </div>

              </div>
              <div class="change" id="trac-change-8-1339692619000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:8" class="cnum">
    <a href="#comment:8">comment:8</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2012-06-14T09%3A50%3A19-07%3A00&amp;precision=second" title="See timeline at 06/14/12 09:50:19">9 years ago</a> by jonathan
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Dear Etienne
</p>
<p>
Yes, that's what I meant, thanks. Either way of inserting it would be fine with me. However, I think <tt>north_pole_grid_longitude</tt> should remain in degrees, because it is not a <em>longitude</em> but a <em>grid_longitude</em>, whose units (in the standard name table) are degrees.
</p>
<p>
Jonathan
</p>

    </div>

              </div>
              <div class="change" id="trac-change-9-1342638463000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:9" class="cnum">
    <a href="#comment:9">comment:9</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2012-07-18T12%3A07%3A43-07%3A00&amp;precision=second" title="See timeline at 07/18/12 12:07:43">9 years ago</a> by etourigny
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Based on a discussion with Martin Desruisseaux and Jonathan Gregory, references to "coordinate system" should be replaced by "coordinate reference system" (or "crs") as they refer to different concepts.
</p>
<p>
Therefore, the last entries in table F1 above should read
</p>
<pre class="wiki">geographic_crs_name	S	The name of the geographic coordinate reference system. Corresponds to a OGC WKT GEOGCS node name.
projected_crs_name	S	The name of the projected coordinate reference system. Corresponds to a OGC WKT PROJCS node name.
</pre>
    </div>

              </div>
              <div class="change" id="trac-change-10-1343813702000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:10" class="cnum">
    <a href="#comment:10">comment:10</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2012-08-01T02%3A35%3A02-07%3A00&amp;precision=second" title="See timeline at 08/01/12 02:35:02">9 years ago</a> by lowry
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Although this is not my specialist subject, I think the benefits delivered by this straightforward change are such that I would like to see it taken forward.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-11-1344191918000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:11" class="cnum">
    <a href="#comment:11">comment:11</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2012-08-05T11%3A38%3A38-07%3A00&amp;precision=second" title="See timeline at 08/05/12 11:38:38">9 years ago</a> by jonathan
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Dear all
</p>
<p>
This ticket has no outstanding objections and has received sufficient support to be accepted according to the rules. It will be accepted on 8th August, which is three weeks from the last update to the proposal, and almost two months since I last invited comments, unless anyone objects before then. The current form of the proposal is as Etienne originally put it, with the typo noted by Mark on 22nd March, and the modifications noted on 14th June and 18th July. 
</p>
<p>
Cheers
</p>
<p>
Jonathan
</p>

    </div>

              </div>
              <div class="change" id="trac-change-12-1344251958000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:12" class="cnum">
    <a href="#comment:12">comment:12</a>
  </span>
          <span>follow-up:</span>
    <a href="#comment:13" class="follow-up">↓ 13</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2012-08-06T04%3A19%3A18-07%3A00&amp;precision=second" title="See timeline at 08/06/12 04:19:18">9 years ago</a> by mgschultz
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Dear Jonathan and all,
</p>
<blockquote>
<p>
just back from vacation I saw this newly revived discussion on track tickets <a class="closed ticket" href="./80.html" title="enhancement: Add missing CF parameters to translate Coordinate Reference System ... (closed: fixed)">#80</a> and <a class="closed ticket" href="./69.html" title="enhancement: Specification of Coordinate Reference System properties in Well-Known ... (closed: fixed)">#69</a>. While I agree with this proposal in general and would like to express my support for it, I would like to see clarification on two points, without which I fear we will make many users unhappy (see comments by Paul Kennedy and Tim Hume on cf-metadata email list):
</p>
</blockquote>
<p>
1) the main issue is how "strictly" this proposal shall be applied, or in other words: what is the minimum valid CRS definition? Several emails have stressed the importance of EPSG in this field, and I guess most of us would be happy to leave the "dirty work" to the experts and be done with a simple crs:epsg_code = 4326. By mandating the specification of extra attributes which may duplicate information from the EPSG (or WKT) descriptions, you risk additional errors due to typos, differing round-offs, etc. So, in view of ticket <a class="new ticket" href="./90.html" title="enhancement: Collection of CF enhancements for interoperable applications (new)">#90</a>, I suggest to review the current proposal once more in terms of which attributes are required, conditional, or optional (in interoperable frameworks). Perhaps naively, I would tend to think that "crs" as such should be mandatory, but then it should suffice to make the epsg_code reference. I have too little knowledge about the geographic projection issues to make any informed suggestions about which of the other parameters are required (once you start using them). For example: if you do specify a prime_meridian_name, do you then have to also specify the reference_ellipsoid_name, or are these two completely independent and a CRS definition can be complete with only one of them.
</p>
<p>
2) If this proposal shall make it into the CF conventions, I suggest to add some explanatory text which at a minimum points out:
</p>
<ol><li>why a crs is needed
</li></ol><ol start="2"><li>that there are two major standard groups (is this actually correct?), namely EPSG and OGC-WKT [and what is their relation; plus web links]
</li></ol><ol start="3"><li>that coarse-resolution model data (still the main application area of CF data) generally uses a spherical earth and only requires a simple projection information (e.g. the epsg_code attribute)
</li></ol><p>
Another side-note: I actually doubt that the current practice of specifying EPSG=4326 is correct. I had an email exchange with Roger Lott about this (see <a class="ext-link" href="http://wiki.esipfed.org/index.php/CRS_Specification"><span class="icon">​</span>http://wiki.esipfed.org/index.php/CRS_Specification</a>).
</p>
<p>
Best regards,
</p>
<p>
Martin
</p>

    </div>

              </div>
              <div class="change" id="trac-change-13-1344256569000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:13" class="cnum">
    <a href="#comment:13">comment:13</a>
  </span>
        in reply to:
    <a href="#comment:12">↑ 12</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2012-08-06T05%3A36%3A09-07%3A00&amp;precision=second" title="See timeline at 08/06/12 05:36:09">9 years ago</a> by etourigny
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Replying to <a class="ticket" href="./80#comment:12" title="Comment 12">mgschultz</a>:
</p>
<blockquote class="citation">
<p>
Dear Jonathan and all,
</p>
<blockquote>
<p>
just back from vacation I saw this newly revived discussion on track tickets <a class="closed ticket" href="./80.html" title="enhancement: Add missing CF parameters to translate Coordinate Reference System ... (closed: fixed)">#80</a> and <a class="closed ticket" href="./69.html" title="enhancement: Specification of Coordinate Reference System properties in Well-Known ... (closed: fixed)">#69</a>. While I agree with this proposal in general and would like to express my support for it, I would like to see clarification on two points, without which I fear we will make many users unhappy (see comments by Paul Kennedy and Tim Hume on cf-metadata email list):
</p>
</blockquote>
</blockquote>
<p>
Hi Martin,
</p>
<p>
Perhaps you sould also join in the recent discussion on the mailing list which you mention.
</p>
<blockquote class="citation">
<p>
1) the main issue is how "strictly" this proposal shall be applied, or in other words: what is the minimum valid CRS definition? Several emails have stressed the importance of EPSG in this field, and I guess most of us would be happy to leave the "dirty work" to the experts and be done with a simple crs:epsg_code = 4326. By mandating the specification of extra attributes which may duplicate information from the EPSG (or WKT) descriptions, you risk additional errors due to typos, differing round-offs, etc. So, in view of ticket <a class="new ticket" href="./90.html" title="enhancement: Collection of CF enhancements for interoperable applications (new)">#90</a>, I suggest to review the current proposal once more in terms of which attributes are required, conditional, or optional (in interoperable frameworks). Perhaps naively, I would tend to think that "crs" as such should be mandatory, but then it should suffice to make the epsg_code reference. I have too little knowledge about the geographic projection issues to make any informed suggestions about which of the other parameters are required (once you start using them). For example: if you do specify a prime_meridian_name, do you then have to also specify the reference_ellipsoid_name, or are these two completely independent and a CRS definition can be complete with only one of them.
</p>
</blockquote>
<p>
That's a good point - I didn't really think about it, since there is no mention of this in the CF. Is the radius value mandatory, etc? 
</p>
<p>
I would stress that all of the *name* parameters are purely optional, and are proposed for interoperability with WKT definitions. Without these additions, you cannot express a WKT reliably in CF, and get it back properly in WKT, or define a CF that could be translated to WKT.
</p>
<p>
The extra parameter towgs84 is mandatory, in the case that the CRS requires a parameter for it to be translated into the WGS84 reference system. However, probably 99% of CF files (especially on a spherical earth) do not require this parameter.
</p>
<p>
In terms of the names being mandatory, I would propose that reference_ellipsoid_name,prime_meridian_name, horizontal_datum_name and geographic_crs_name must be all defined if any one is, along with projected_crs_name if the crs is a projected one. This would make definitions consistent.  Either use them all, or none.
</p>
<p>
Also, when you are defining datum parameters (not datum transformation), all values should be included, so I would suggest they be mandatory if there is a crs definition: longitude_of_prime_meridian,semi_major_axis,inverse_flattening/semi-minor-axis
</p>
<p>
However, I wonder if this fits the scope of this proposal, because we mightg have to review all of the parameters and decide if they are mandatory or optional.
</p>
<p>
Now concerning EPSG codes. 
</p>
<p>
Firstly they do not fit well in the CF model, because you need to consult external tables/definitions to get the values associated with them. Their imlementation in CF would require either the addition of definitions inside CF (using a standard table) or the use of an external service, such as spatialreference.org or epsg-registry.org .
</p>
<p>
Secondly, the adoption of EPSG is also outside of the scope of this proposal, and would require a trac ticket on its own. There is too much dissent (see past discussions on the mailing on this subject, before the recent one), so I'm not willing to go down that route. The major problem with EPSG is that you cannot realistically blend EPSG codes with any CRS definitions in CF, so they would have to be proposed as alternatives. And that would require a means for a machine to fill in the values that correspond to an EPSG code. Software such as gdal/ogr does that.
</p>
<p>
Thirdly, the example you cite of a spherical earth doesn't need an EPSG code or the modifications included in this proposal at all, because it has an existing CF definition:
</p>
<pre class="wiki">Example 5.8. Latitude and longitude on a spherical Earth    crs:grid_mapping_name = "latitude_longitude"
...
  int crs ;
    crs:grid_mapping_name = "latitude_longitude"
    crs:semi_major_axis = 6371000.0 ;
    crs:inverse_flattening = 0 ;
</pre><p>
But this example it's missing crs:longitude_of_prime_meridian = 0.0 ; -&gt; we should add this as a change also.
</p>
<p>
So I guess to make everyone happy we could recommend to use the spherical earth definition if the data if from a model, or the WGS84 definition if coming from observations (e.g. global satellites). 
</p>
<blockquote class="citation">
<p>
2) If this proposal shall make it into the CF conventions, I suggest to add some explanatory text which at a minimum points out:
</p>
<ol><li>why a crs is needed
</li></ol></blockquote>
<p>
to describe the coordinate reference system with full accuracy.
</p>
<blockquote class="citation">
<ol start="2"><li>that there are two major standard groups (is this actually correct?), namely EPSG and OGC-WKT [and what is their relation; plus web links]
</li></ol></blockquote>
<p>
These standards are linked in this proposal : &lt;link2&gt; and &lt;CT&gt; as well as EPSG in  CF-1.6
</p>
<blockquote class="citation">
<ol start="3"><li>that coarse-resolution model data (still the main application area of CF data) generally uses a spherical earth and only requires a simple projection information (e.g. the epsg_code attribute)
</li></ol></blockquote>
<p>
again, why have an EPSG code when 2 (or 3) parameters suffice?
</p>
<blockquote class="citation">
<p>
Another side-note: I actually doubt that the current practice of specifying EPSG=4326 is correct. I had an email exchange with Roger Lott about this (see <a class="ext-link" href="http://wiki.esipfed.org/index.php/CRS_Specification"><span class="icon">​</span>http://wiki.esipfed.org/index.php/CRS_Specification</a>).
</p>
</blockquote>
<p>
Now it's interesting that the email you mention, EPSG:4047 corresponds to the spherical earth models use, but again: no need for that in CF.
</p>
<blockquote class="citation">
<p>
Best regards,
</p>
<p>
Martin
</p>
</blockquote>
<p>
Jonathan: what is your view on this? Should the mandatory/recommended/conditional information be added?  Should I/we prepare a short paragraph that answers some of these concerns in 2) and where to put it?
</p>

    </div>

              </div>
              <div class="change" id="trac-change-14-1344376356000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:14" class="cnum">
    <a href="#comment:14">comment:14</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2012-08-07T14%3A52%3A36-07%3A00&amp;precision=second" title="See timeline at 08/07/12 14:52:36">9 years ago</a> by caron
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Hi Etienne:
</p>
<p>
I appreciate the hard work that this ticket represents (thanks!!), and Im not happy with duplicating the work that has gone into WKT already. Im guessing that many, many more hours will go into getting this right, and then there will be a new thing not yet covered.
</p>
<p>
So I would propose that we accept ticket <a class="closed ticket" href="./69.html" title="enhancement: Specification of Coordinate Reference System properties in Well-Known ... (closed: fixed)">#69</a> along with ticket <a class="closed ticket" href="./80.html" title="enhancement: Add missing CF parameters to translate Coordinate Reference System ... (closed: fixed)">#80</a>, or perhaps merge them together along these lines:
</p>
<blockquote>
<p>
1) we accept <a class="closed ticket" href="./69.html" title="enhancement: Specification of Coordinate Reference System properties in Well-Known ... (closed: fixed)">#69</a> which says "heres where to put your WKT if you have one".
</p>
</blockquote>
<blockquote>
<p>
2) ticket <a class="closed ticket" href="./80.html" title="enhancement: Add missing CF parameters to translate Coordinate Reference System ... (closed: fixed)">#80</a> becomes the framework in which we translate WKT parameters to CF attributes. What is already there is much appreciated.
</p>
</blockquote>
<blockquote>
<p>
3) We write conformance tests to test that the WKT is consistent with the parameters, if they both exist.
</p>
</blockquote>
<p>
In this way, data writers with existing WKT can immediately do something, with no further effort. Others can use start to use the <a class="closed ticket" href="./80.html" title="enhancement: Add missing CF parameters to translate Coordinate Reference System ... (closed: fixed)">#80</a> attributes. With translating software, we can start to generate the attributes from the WKT, and flag problems or things not yet encoded in attributes. 
</p>
<p>
john
</p>

    </div>

              </div>
              <div class="change" id="trac-change-15-1344377374000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:15" class="cnum">
    <a href="#comment:15">comment:15</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2012-08-07T15%3A09%3A34-07%3A00&amp;precision=second" title="See timeline at 08/07/12 15:09:34">9 years ago</a> by rsignell
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
John,
This sounds to me like a very reasonable balance between the CF ideals and pragmatism.
</p>
<p>
ESRI and GDAL have been writing WKT strings into their NetCDF files for the last 5 years or so, and it would be nice to have a CF-acceptable way to do it.
</p>
<p>
-Rich
</p>

    </div>

              </div>
              <div class="change" id="trac-change-16-1344420255000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:16" class="cnum">
    <a href="#comment:16">comment:16</a>
  </span>
          <span>follow-ups:</span>
    <a href="#comment:17" class="follow-up">↓ 17</a>
    <a href="#comment:20" class="follow-up">↓ 20</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2012-08-08T03%3A04%3A15-07%3A00&amp;precision=second" title="See timeline at 08/08/12 03:04:15">9 years ago</a> by jonathan
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Dear all
</p>
<p>
I think this ticket should be accepted when there are no outstanding comments on its content. In answer to Etienne's question, I think it would be fine to modify the proposal to introduce some requirements or recommendations which could be added to the CF conformance document, following Martin's comment. It seems to me that this proposal fills a need that has been outstanding for a long time, and it demonstrably works since Etienne has software which implements it. No doubt it does not cover all conceivable cases, but CF never aims to do that; we expand the convention as we need to.
</p>
<p>
The decision about ticket 69 should be made separately. These are alternatives for CF. Both could be accepted (separately). My main reservation about 69 is the possibility for inconsistency, and that is why I have argued in that ticket that, if WKT is included, CF grid_mapping attributes should not be allowed, in order to avoid that inconsistency. But that discussion is on ticket 69 and I shouldn't mix up the two, especially as I'm moderating this one only!
</p>
<p>
Cheers
</p>
<p>
Jonathan
</p>

    </div>

              </div>
              <div class="change" id="trac-change-17-1344434933000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:17" class="cnum">
    <a href="#comment:17">comment:17</a>
  </span>
        in reply to:
    <a href="#comment:16">↑ 16</a>
        ;
          <span>follow-up:</span>
    <a href="#comment:18" class="follow-up">↓ 18</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2012-08-08T07%3A08%3A53-07%3A00&amp;precision=second" title="See timeline at 08/08/12 07:08:53">9 years ago</a> by pbentley
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Replying to <a class="ticket" href="./80#comment:16" title="Comment 16">jonathan</a>:
 
</p>
<blockquote class="citation">
<p>
It seems to me that this proposal fills a need that has been outstanding for a long time, and it demonstrably works since Etienne has software which implements it.
</p>
</blockquote>
<p>
I'm not convinced the latter point is relevant here. As Rich alludes to above, and as I mentioned in ticket 69, other netcdf software tools have been utilising the WKT approach for a number of years. Indeed that was one of the motivating factors for wanting to incorporate it into the CF standard.
</p>
<blockquote class="citation">
<p>
The decision about ticket 69 should be made separately. These are alternatives for CF. Both could be accepted (separately).
</p>
</blockquote>
<p>
The proposal in ticket 69 received widespread endorsement. As the principal objector, if you were to withdraw your objections then it could be accepted without further ado! Are you content to do that?
</p>
<blockquote class="citation">
<p>
My main reservation about 69 is the possibility for inconsistency, and that is why I have argued in that ticket that, if WKT is included, CF grid_mapping attributes should not be allowed, in order to avoid that inconsistency.
</p>
</blockquote>
<p>
As the author of ticket 69 it won't come as much surprise to learn that I still consider the WKT approach to represent the more effective and elegant solution (though I'd be happy to support both options if that is the best outcome we can achieve).
</p>
<p>
My chief reservations regarding the current proposal are:
</p>
<ul><li>It unnecessarily imports a number of new attributes into the CF standard when this can be achieved concisely, and with no loss of information, using the compact string notation defined by the CRS WKT standard.
</li></ul><ul><li>The current proposal only covers a subset of the possible elements which could be encoded in a CRS WKT string. For example, I may have a dataset whose CRS requires specification of the parameter 'geocentric X of topocentric origin'. There are other such parameters, some admittedly more specialised than others. The WKT approach would enable definition of such elements without having to repeatedly update the CF standard.
</li></ul><ul><li>At the June 2012 meeting of the OGC CRS domain working group in Exeter, it was announced that the CRS WKT standard will be refreshed with a view to producing a new ISO/OGC CRS WKT 2.0 standard (see <a class="ext-link" href="http://www.ogcnetwork.net/node/1833"><span class="icon">​</span>here</a>). Some of the potential revisions to the standard that were mentioned at the meeting (such as the proposed removal of the TOWGS84 parameter) are likely to impact on the content of the current proposal.
</li></ul><p>
Phil
</p>

    </div>

              </div>
              <div class="change" id="trac-change-18-1344436670000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:18" class="cnum">
    <a href="#comment:18">comment:18</a>
  </span>
        in reply to:
    <a href="#comment:17">↑ 17</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2012-08-08T07%3A37%3A50-07%3A00&amp;precision=second" title="See timeline at 08/08/12 07:37:50">9 years ago</a> by etourigny
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
I Phil - nice to have your comments on this ticket!
</p>
<p>
Replying to <a class="ticket" href="./80#comment:17" title="Comment 17">pbentley</a>:
</p>
<blockquote class="citation">
<p>
Replying to <a class="ticket" href="./80#comment:16" title="Comment 16">jonathan</a>:
 
</p>
<blockquote class="citation">
<p>
It seems to me that this proposal fills a need that has been outstanding for a long time, and it demonstrably works since Etienne has software which implements it.
</p>
</blockquote>
<p>
I'm not convinced the latter point is relevant here. As Rich alludes to above, and as I mentioned in ticket 69, other netcdf software tools have been utilising the WKT approach for a number of years. Indeed that was one of the motivating factors for wanting to incorporate it into the CF standard.
</p>
</blockquote>
<p>
I believe that the two approaches can be complementary - ticket <a class="closed ticket" href="./80.html" title="enhancement: Add missing CF parameters to translate Coordinate Reference System ... (closed: fixed)">#80</a> allows for interoperability with WKT, while preserving existing CF syntax, and ticket <a class="closed ticket" href="./69.html" title="enhancement: Specification of Coordinate Reference System properties in Well-Known ... (closed: fixed)">#69</a> allows an alternative way (and more elegant, I agree) to express the CRS. I agree with Jonathan - if WKT is used then no other CF CRS parameters should be used, or perhaps they are invalidated.
</p>
<blockquote class="citation">
<blockquote class="citation">
<p>
The decision about ticket 69 should be made separately. These are alternatives for CF. Both could be accepted (separately).
</p>
</blockquote>
<p>
The proposal in ticket 69 received widespread endorsement. As the principal objector, if you were to withdraw your objections then it could be accepted without further ado! Are you content to do that?
</p>
<blockquote class="citation">
<p>
My main reservation about 69 is the possibility for inconsistency, and that is why I have argued in that ticket that, if WKT is included, CF grid_mapping attributes should not be allowed, in order to avoid that inconsistency.
</p>
</blockquote>
<p>
As the author of ticket 69 it won't come as much surprise to learn that I still consider the WKT approach to represent the more effective and elegant solution (though I'd be happy to support both options if that is the best outcome we can achieve).
</p>
<p>
My chief reservations regarding the current proposal are:
</p>
<ul><li>It unnecessarily imports a number of new attributes into the CF standard when this can be achieved concisely, and with no loss of information, using the compact string notation defined by the CRS WKT standard.
</li></ul></blockquote>
<p>
I think it is the only way to achieve interoperability without forcing to abandon CF-style CRS definition in favor of the WKT string approach. Forcing to use WKT instead of CF CRS would break many software.
</p>
<blockquote class="citation">
<ul><li>The current proposal only covers a subset of the possible elements which could be encoded in a CRS WKT string. For example, I may have a dataset whose CRS requires specification of the parameter 'geocentric X of topocentric origin'. There are other such parameters, some admittedly more specialised than others. The WKT approach would enable definition of such elements without having to repeatedly update the CF standard.
</li></ul></blockquote>
<p>
By all means, if there are new parameters they could be submitted - that's the CF way as I see it. I think that this proposal covers *most* use cases. If there are other parameters which should be included, then we can add it (them).
</p>
<blockquote class="citation">
<ul><li>At the June 2012 meeting of the OGC CRS domain working group in Exeter, it was announced that the CRS WKT standard will be refreshed with a view to producing a new ISO/OGC CRS WKT 2.0 standard (see <a class="ext-link" href="http://www.ogcnetwork.net/node/1833"><span class="icon">​</span>here</a>). Some of the potential revisions to the standard that were mentioned at the meeting (such as the proposed removal of the TOWGS84 parameter) are likely to impact on the content of the current proposal.
</li></ul></blockquote>
<p>
While I agree that WKT 2.0 is a great thing, I ponder: how much time (i.e. years) before it is 1) adopted formally 2) actually used in the community. This ticket (as well as <a class="closed ticket" href="./69.html" title="enhancement: Specification of Coordinate Reference System properties in Well-Known ... (closed: fixed)">#69</a>) deal with present standards that are actually used. Also, you would have to revise ticket 69 so I don't see how relevant it is to the adoption of this one only. Admittedly, the adoption of WKT 2.0 in CF will require a separate ticket.
</p>
<p>
cheers
Etienne
</p>
<blockquote class="citation">
<p>
Phil
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-19-1344437009000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:19" class="cnum">
    <a href="#comment:19">comment:19</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2012-08-08T07%3A43%3A29-07%3A00&amp;precision=second" title="See timeline at 08/08/12 07:43:29">9 years ago</a> by jonathan
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Dear Phil
</p>
<p>
Sorry, I should not have commented on this ticket about ticket 69.
</p>
<p>
I think the point about existing software is relevant to this ticket, because it's been suggested in the past that it's good to have a demonstration of proposed extensions to CF working in practice. The rules say that changes remain provisional until they have been successfully shown to work, in the sense that software exists which can deal with netCDF files including the new convention. That's why I made the point.
</p>
<p>
I will be away for the next three weeks. Apologies in advance for not being able to contribute during that period.
</p>
<p>
Cheers
</p>
<p>
Jonathan
</p>

    </div>

              </div>
              <div class="change" id="trac-change-20-1344450695000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:20" class="cnum">
    <a href="#comment:20">comment:20</a>
  </span>
        in reply to:
    <a href="#comment:16">↑ 16</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2012-08-08T11%3A31%3A35-07%3A00&amp;precision=second" title="See timeline at 08/08/12 11:31:35">9 years ago</a> by caron
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Replying to <a class="ticket" href="./80#comment:16" title="Comment 16">jonathan</a>:
</p>
<blockquote class="citation">
<p>
Dear all
My main reservation about 69 is the possibility for inconsistency, and that is why I have argued in that ticket that, if WKT is included, CF grid_mapping attributes should not be allowed, in order to avoid that inconsistency. But that discussion is on ticket 69 and I shouldn't mix up the two, especially as I'm moderating this one only!
</p>
</blockquote>
<p>
Hi Jonathan, et al:
</p>
<p>
I think that WKT should be optional, and never replace our other mechanisms; grid_mapping attributes should take precedence if both are present; specialized software can issue warnings when there are inconsistencies, and also translate between the two, although sometimes incompletely.
</p>
<p>
in short: 
</p>
<ol><li>having a standard place to put the WKT would be an important advance in pushing netcdf/CF into new GIS territory. 
</li><li>this GIS territory is too complicated to pull all of it into CF attributes, and we wont cover all the cases. 
</li><li>having the WKT when available will be useful to specialized software.
</li></ol><p>
John
</p>

    </div>

              </div>
              <div class="change" id="trac-change-21-1347280247000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:21" class="cnum">
    <a href="#comment:21">comment:21</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2012-09-10T05%3A30%3A47-07%3A00&amp;precision=second" title="See timeline at 09/10/12 05:30:47">9 years ago</a> by jonathan
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Dear all
</p>
<p>
Various people have said that it would OK to have both a CF-style description and WKT in the <tt>grid_mapping</tt>, despite the possible inconsistency, and only I have argued that they should be mutually exclusive. Therefore I'll drop that argument and accept the majority view, and agree that both this ticket and ticket 69 should be accepted.
</p>
<p>
Etienne, would you like to add any requirements or recommendations to this proposal in response to Martin's comment? I believe this is the only outstanding question as regards the content of this proposal. Since the proposal has been modified a bit since the ticket began, it would be helpful if you could repeat it as it stands now.
</p>
<p>
Best wishes and thanks
</p>
<p>
Jonathan
</p>

    </div>

              </div>
              <div class="change" id="trac-change-22-1347285575000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:22" class="cnum">
    <a href="#comment:22">comment:22</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2012-09-10T06%3A59%3A35-07%3A00&amp;precision=second" title="See timeline at 09/10/12 06:59:35">9 years ago</a> by etourigny
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Jonathan,
</p>
<p>
What about pbentley's comments? I feel I have responded sufficiently, and present consensus on allowing both WKT (secondary) and new CF attributes is satisfactory.
</p>
<p>
I can add mandatory/recommended/conditional information to table F1 - should this be a new column or added to the end of the description?
</p>
<p>
Following's Mark's comment we should add a short paragraph, where should this go, in section 5.6 before Example 5.6?
</p>
<p>
I will prepare a final document based on all changes.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-23-1347348359000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:23" class="cnum">
    <a href="#comment:23">comment:23</a>
  </span>
          <span>follow-up:</span>
    <a href="#comment:24" class="follow-up">↓ 24</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2012-09-11T00%3A25%3A59-07%3A00&amp;precision=second" title="See timeline at 09/11/12 00:25:59">9 years ago</a> by jonathan
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Dear Etienne
</p>
<p>
On Mark's point, I think (as on 14th June) it would be OK to remark on units translation in the linked wiki page, since this is not part of the convention itself. We also agreed some changes in Table F1 at that time.
</p>
<p>
I would suggest that rules concerning what is mandatory/recommended should appear in the text of sect 5.6, since if I have understood correctly it is mostly about combinations of things, rather than referring to individual attributes. It would be helpful if at the same time you could draft the required changes to the CF conformance document <a class="ext-link" href="http://cf-pcmdi.llnl.gov/conformance/requirements-and-recommendations/1.6"><span class="icon">​</span>http://cf-pcmdi.llnl.gov/conformance/requirements-and-recommendations/1.6</a>.
</p>
<p>
I think Phil Bentley's concerns were matters of principle, rather than comment on the content of this proposal, and I hope that he will be content if both tickets are accepted.
</p>
<p>
Best wishes
</p>
<p>
Jonathan
</p>

    </div>

              </div>
              <div class="change" id="trac-change-24-1361292306000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:24" class="cnum">
    <a href="#comment:24">comment:24</a>
  </span>
        in reply to:
    <a href="#comment:23">↑ 23</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-02-19T08%3A45%3A06-08%3A00&amp;precision=second" title="See timeline at 02/19/13 08:45:06">8 years ago</a> by etourigny
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Replying to <a class="ticket" href="./80#comment:23" title="Comment 23">jonathan</a>:
</p>
<blockquote class="citation">
<p>
Dear Etienne
</p>
<p>
On Mark's point, I think (as on 14th June) it would be OK to remark on units translation in the linked wiki page, since this is not part of the convention itself. We also agreed some changes in Table F1 at that time.
</p>
</blockquote>
<p>
I have updated the wiki with information on units.
</p>
<blockquote class="citation">
<p>
I would suggest that rules concerning what is mandatory/recommended should appear in the text of sect 5.6, since if I have understood correctly it is mostly about combinations of things, rather than referring to individual attributes. It would be helpful if at the same time you could draft the required changes to the CF conformance document <a class="ext-link" href="http://cf-pcmdi.llnl.gov/conformance/requirements-and-recommendations/1.6"><span class="icon">​</span>http://cf-pcmdi.llnl.gov/conformance/requirements-and-recommendations/1.6</a>.
</p>
</blockquote>
<p>
done - I will upload a final draft shortly
</p>
<blockquote class="citation">
<p>
I think Phil Bentley's concerns were matters of principle, rather than comment on the content of this proposal, and I hope that he will be content if both tickets are accepted.
</p>
<p>
Best wishes
</p>
<p>
Jonathan
</p>
</blockquote>

    </div>

              </div>
              <div class="change">
                
  <h3 class="change">
    <span class="threading">
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-02-19T08%3A53%3A29-08%3A00&amp;precision=second" title="See timeline at 02/19/13 08:53:29">8 years ago</a> by etourigny
  </h3>
  <div class="trac-ticket-buttons">
  </div>
  <ul class="changes">
    <li class="trac-field-attachment">
      <strong class="trac-field-attachment">Attachment</strong>
        <a href="/trac/attachment/ticket/80/issue80.txt"><em>issue80.txt</em></a><a href="/trac/raw-attachment/ticket/80/issue80.txt" title="Download" class="trac-rawlink">​</a>
          added
    </li>
  </ul>
    <div class="comment searchable">
      <p>
final draft
</p>

    </div>

              </div>
              <div class="change" id="trac-change-25-1361292946000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:25" class="cnum">
    <a href="#comment:25">comment:25</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-02-19T08%3A55%3A46-08%3A00&amp;precision=second" title="See timeline at 02/19/13 08:55:46">8 years ago</a> by etourigny
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
I have attached a final draft, hopefully adressing every concern.
</p>
<p>
I am hesitant about this statement in section 5.6, which I added in response to mgschultz . Perhaps it should be as a note to table F1 instead, or dropped entirely.
</p>
<pre class="wiki">The following attributes should be included when there is a CRS (Coordinate Reference System) definition: longitude_of_prime_meridian (if different than 0), semi_major_axis and inverse_flattening or semi-minor-axis.
</pre>
    </div>

              </div>
              <div class="change">
                
  <h3 class="change">
    <span class="threading">
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-03-12T06%3A11%3A31-07%3A00&amp;precision=second" title="See timeline at 03/12/13 06:11:31">8 years ago</a> by jonathan
  </h3>
  <div class="trac-ticket-buttons">
  </div>
  <ul class="changes">
    <li class="trac-field-attachment">
      <strong class="trac-field-attachment">Attachment</strong>
        <a href="/trac/attachment/ticket/80/issue80-2.txt"><em>issue80-2.txt</em></a><a href="/trac/raw-attachment/ticket/80/issue80-2.txt" title="Download" class="trac-rawlink">​</a>
          added
    </li>
  </ul>
    <div class="comment searchable">
      <p>
Slightly modified version of Etienne's attachment
</p>

    </div>

              </div>
              <div class="change" id="trac-change-26-1363094563000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:26" class="cnum">
    <a href="#comment:26">comment:26</a>
  </span>
          <span>follow-up:</span>
    <a href="#comment:27" class="follow-up">↓ 27</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-03-12T06%3A22%3A43-07%3A00&amp;precision=second" title="See timeline at 03/12/13 06:22:43">8 years ago</a> by jonathan
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Dear Etienne
</p>
<p>
Thank for the final draft. Since no-one has commented further and three weeks have passed, this ticket should be accepted and included in the next version of the CF standard. At that time, Etienne should be added to the list of additional authors.
</p>
<p>
Regarding your hesitation above, I would agree that it would be more logical to put it as a note to Table F1, where you have put some other remarks. I have therefore prepared a slightly modified version <a class="ext-link" href="https://cf-pcmdi.llnl.gov/trac/attachment/ticket/80/issue80-2.txt"><span class="icon">​</span>https://cf-pcmdi.llnl.gov/trac/attachment/ticket/80/issue80-2.txt</a> of your attachment, with this small change made. Is that OK with you?
</p>
<p>
We still need to consider what additions should be made to the conformance document. It seems to me that there are three, arising from these footnotes.
</p>
<ul><li><tt>reference_ellipsoid_name</tt>, <tt>prime_meridian_name</tt>, <tt>horizontal_datum_name</tt> and <tt>geographic_crs_name</tt> must be all defined if any one is defined.
</li></ul><ul><li>If <tt>projected_crs_name</tt> is defined then <tt>geographic_crs_name</tt> must be also.
</li></ul><ul><li>If there is a CRS (Coordinate Reference System) definition, <tt>semi_major_axis</tt> must be defined, and either <tt>inverse_flattening</tt> or <tt>semi_minor_axis</tt> must be defined.
</li></ul><p>
We can't require <tt>longitude_of_prime_meridian</tt> in the last one, because there is a default. In this last point, what exactly does it mean to say there is a CRS definition? I mean, what formal criterion should the CF checker use to decide this?
</p>
<p>
Best wishes
</p>
<p>
Jonathan
</p>

    </div>

              </div>
              <div class="change" id="trac-change-27-1363105832000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:27" class="cnum">
    <a href="#comment:27">comment:27</a>
  </span>
        in reply to:
    <a href="#comment:26">↑ 26</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-03-12T09%3A30%3A32-07%3A00&amp;precision=second" title="See timeline at 03/12/13 09:30:32">8 years ago</a> by etourigny
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
I agree with your revised draft, except for note (3) which I would drop entirely. 
</p>
<p>
The main points of this ticket relate to adding missing parameters, not about making semi_major_axis inverse_flattening and semi_minor_axis mandatory. Indeed it would be a bit tricky deciding which CRS/grid_mapping definitions require radius values.
</p>
<p>
I would say offhand to make them mandatory in any grid_mapping definition, but that is probably very restrictive and cause some disruptions. This is indeed a problem in the CF standard - what is the default sphere radius if none is given? It should probably be addressed in another ticket/discussion, which I cannot start due to time constraints.
</p>
<p>
Cheers,
Etienne
</p>

    </div>

              </div>
              <div class="change">
                
  <h3 class="change">
    <span class="threading">
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-03-12T10%3A19%3A57-07%3A00&amp;precision=second" title="See timeline at 03/12/13 10:19:57">8 years ago</a> by jonathan
  </h3>
  <div class="trac-ticket-buttons">
  </div>
  <ul class="changes">
    <li class="trac-field-attachment">
      <strong class="trac-field-attachment">Attachment</strong>
        <a href="/trac/attachment/ticket/80/issue80.2.txt"><em>issue80.2.txt</em></a><a href="/trac/raw-attachment/ticket/80/issue80.2.txt" title="Download" class="trac-rawlink">​</a>
          added
    </li>
  </ul>
    <div class="comment searchable">
      <p>
with footnote (3) deleted
</p>

    </div>

              </div>
              <div class="change" id="trac-change-28-1363108890000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:28" class="cnum">
    <a href="#comment:28">comment:28</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-03-12T10%3A21%3A30-07%3A00&amp;precision=second" title="See timeline at 03/12/13 10:21:30">8 years ago</a> by jonathan
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Dear Etienne
</p>
<p>
OK. Then the ticket is concluded, with footnote (3) removed from the revised text, and the following two conditions to be added to section 5.6 of the conformance document.
</p>
<ul><li><tt>reference_ellipsoid_name</tt>, <tt>prime_meridian_name</tt>, <tt>horizontal_datum_name</tt> and <tt>geographic_crs_name</tt> must be all defined if any one is defined. 
</li></ul><ul><li>If <tt>projected_crs_name</tt> is defined then <tt>geographic_crs_name</tt> must be also.
</li></ul><p>
Many thanks for completing this.
</p>
<p>
Jonathan
</p>

    </div>

              </div>
              <div class="change" id="trac-change-29-1429712800283165">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:29" class="cnum">
    <a href="#comment:29">comment:29</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2015-04-22T07%3A26%3A40-07%3A00&amp;precision=second" title="See timeline at 04/22/15 07:26:40">6 years ago</a> by jonathan
  </h3>
  <div class="trac-ticket-buttons">
  </div>
  <ul class="changes">
    <li class="trac-field-description">
      <strong class="trac-field-description">Description</strong>
        modified (<a href="./80?action=diff&amp;version=29">diff</a>)
    </li>
  </ul>

              </div>
              <div class="change" id="trac-change-30-1483542074977279">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:30" class="cnum">
    <a href="#comment:30">comment:30</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2017-01-04T07%3A01%3A14-08%3A00&amp;precision=second" title="See timeline at 01/04/17 07:01:14">4 years ago</a> by davidhassell
  </h3>
  <div class="trac-ticket-buttons">
  </div>
  <ul class="changes">
    <li class="trac-field-owner">
      <strong class="trac-field-owner">Owner</strong>
        changed from <em>cf-conventions@…</em> to <em>davidhassell</em>
    </li><li class="trac-field-status">
      <strong class="trac-field-status">Status</strong>
        changed from <em>new</em> to <em>accepted</em>
    </li>
  </ul>

              </div>
              <div class="change" id="trac-change-31-1490050783221711">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:31" class="cnum">
    <a href="#comment:31">comment:31</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2017-03-20T15%3A59%3A43-07%3A00&amp;precision=second" title="See timeline at 03/20/17 15:59:43">4 years ago</a> by painter1
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
The final draft, issue80.2.txt, includes two urls.  The first, <a class="ext-link" href="https://cf-pcmdi.llnl.gov/trac/wiki/Cf2CrsWkt"><span class="icon">​</span>https://cf-pcmdi.llnl.gov/trac/wiki/Cf2CrsWkt</a>, should be moved, perhaps to a wiki on github.  It also should be updated.  The second url, <a class="ext-link" href="http://home.gdal.org/projects/opengis/wktproblems.html"><span class="icon">​</span>http://home.gdal.org/projects/opengis/wktproblems.html</a>, no longer exists.  I retrieved the latest version at archive.org, dated 2013.  This too should be saved in a better place, perhaps also a github wiki.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-32-1490113721914415">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:32" class="cnum">
    <a href="#comment:32">comment:32</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2017-03-21T09%3A28%3A41-07%3A00&amp;precision=second" title="See timeline at 03/21/17 09:28:41">4 years ago</a> by jonathan
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Dear Jeff
</p>
<p>
Yes, please. These documents should be adopted by CF and put somewhere on the web page for reference, as supplementary material to the convention.
</p>
<p>
Thanks
</p>
<p>
Jonathan
</p>

    </div>

              </div>
              <div class="change" id="trac-change-33-1490135948892096">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:33" class="cnum">
    <a href="#comment:33">comment:33</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2017-03-21T15%3A39%3A08-07%3A00&amp;precision=second" title="See timeline at 03/21/17 15:39:08">4 years ago</a> by painter1
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Tickets 69 and 80 overlapped,as both involved specifications in CRS/OGC WKT (well known text) format, section 5.6 and Appendix F.   I had implemented ticket 69 over two years ago.  But ticket 80 is even older, and seems to have been developed independently.  I would like to invite anyone interested to review how I implemented ticket 80 on top of ticket 69, and offer his opinions.  Combining these tickets mainly involved work in examples now numbered 5.9, 5.10, 5.11, and 5.12.  They have been rearranged and conflicts resolved as best I could.
</p>
<p>
You can see the candidates for chapter 5 and Appendix F at these urls:
Chapter 5:   <a class="ext-link" href="https://github.com/cf-convention/cf-conventions/blob/f55b154e1be688272880465cd0e138a6c4fa3f1e/ch05.adoc"><span class="icon">​</span>https://github.com/cf-convention/cf-conventions/blob/f55b154e1be688272880465cd0e138a6c4fa3f1e/ch05.adoc</a>
Appendix F: <a class="ext-link" href="https://github.com/cf-convention/cf-conventions/blob/f55b154e1be688272880465cd0e138a6c4fa3f1e/appf.adoc"><span class="icon">​</span>https://github.com/cf-convention/cf-conventions/blob/f55b154e1be688272880465cd0e138a6c4fa3f1e/appf.adoc</a>
</p>

    </div>

              </div>
              <div class="change" id="trac-change-34-1490307005562449">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:34" class="cnum">
    <a href="#comment:34">comment:34</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2017-03-23T15%3A10%3A05-07%3A00&amp;precision=second" title="See timeline at 03/23/17 15:10:05">4 years ago</a> by jonathan
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Thanks for dealing with all this complexity so carefully. As far as I can see it's OK! Jonathan
</p>

    </div>

              </div>
              <div class="change" id="trac-change-35-1490635514573424">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:35" class="cnum">
    <a href="#comment:35">comment:35</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2017-03-27T10%3A25%3A14-07%3A00&amp;precision=second" title="See timeline at 03/27/17 10:25:14">4 years ago</a> by painter1
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
The CF Conventions document, version 1.7 draft, now includes the changes specified in this ticket.  The conformance document hasn't been revised as described in comment 28, so this ticket isn't ready to be closed.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-36-1494532301360158">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:36" class="cnum">
    <a href="#comment:36">comment:36</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2017-05-11T12%3A51%3A41-07%3A00&amp;precision=second" title="See timeline at 05/11/17 12:51:41">4 years ago</a> by painter1
  </h3>
  <div class="trac-ticket-buttons">
  </div>
  <ul class="changes">
    <li class="trac-field-resolution">
      <strong class="trac-field-resolution">Resolution</strong>
        set to <em>fixed</em>
    </li><li class="trac-field-status">
      <strong class="trac-field-status">Status</strong>
        changed from <em>accepted</em> to <em>closed</em>
    </li>
  </ul>

              </div>
          </div>
        </div>
      <div id="help"><strong>Note:</strong> See
        <a href="/trac/wiki/TracTickets">TracTickets</a> for help on using
        tickets.</div>
    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="./80?format=rss" class="rss">RSS Feed</a>
        </li><li>
          <a rel="nofollow" href="./80?format=csv" class="csv">Comma-delimited Text</a>
        </li><li class="last">
          <a rel="nofollow" href="./80?format=tab" class="tab">Tab-delimited Text</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="https://trac.edgewall.org/"><img src="/trac/chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="/trac/about"><strong>Trac 1.0.20</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the CF Metadata home page at<br /><a href="http://cf-convention.github.io">http://cf-convention.github.io</a><br><font color="#0000ff" size="3"><b>The CF Metadata Trac issue tracker is read-only and will soon be shut down permanently</b></font></p>
    </div>
  </body>
</html>
