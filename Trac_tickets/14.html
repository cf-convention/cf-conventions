<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  


  <head>
    <title>
      #14 (Allow time coordinates to be stored as a W3C / ISO 8601formatted String)
     – CF Metadata
    </title>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!--[if IE]><script type="text/javascript">
      if (/^#__msie303:/.test(window.location.hash))
        window.location.replace(window.location.hash.replace(/^#__msie303:/, '#'));
    </script><![endif]-->
        <link rel="search" href="/trac/search" />
        <link rel="prev" href="./13.html" title="ticket #13" />
        <link rel="last" href="./176.html" title="ticket #176" />
        <link rel="help" href="/trac/wiki/TracGuide" />
        <link rel="alternate" href="./14?format=rss" type="application/rss+xml" class="rss" title="RSS Feed" /><link rel="alternate" href="./14?format=csv" type="text/csv" class="csv" title="Comma-delimited Text" /><link rel="alternate" href="./14?format=tab" type="text/tab-separated-values" class="tab" title="Tab-delimited Text" />
        <link rel="next" href="./15.html" title="ticket #15" />
        <link rel="start" href="/trac/wiki" />
        <link rel="stylesheet" href="/trac/chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="/trac/chrome/common/css/ticket.css" type="text/css" />
        <link rel="first" href="./1.html" title="ticket #1" />
        <link rel="shortcut icon" href="/trac/chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="/trac/chrome/common/trac.ico" type="image/x-icon" />
    <style id="trac-noscript" type="text/css">.trac-noscript { display: none !important }</style>
      <link type="application/opensearchdescription+xml" rel="search" href="/trac/search/opensearch" title="Search CF Metadata" />
    <script type="text/javascript">
      var auto_preview_timeout=2.0;
      var form_token="b8aeac20bf7fd49b63339caa";
      var comments_prefs={"comments_only":"false","comments_order":"oldest"};
    </script>
      <script type="text/javascript" charset="utf-8" src="/trac/chrome/common/js/jquery.js"></script>
      <script type="text/javascript" charset="utf-8" src="/trac/chrome/common/js/babel.js"></script>
      <script type="text/javascript" charset="utf-8" src="/trac/chrome/common/js/trac.js"></script>
      <script type="text/javascript" charset="utf-8" src="/trac/chrome/common/js/search.js"></script>
      <script type="text/javascript" charset="utf-8" src="/trac/chrome/common/js/folding.js"></script>
      <script type="text/javascript" charset="utf-8" src="/trac/chrome/common/js/wikitoolbar.js"></script>
      <script type="text/javascript" charset="utf-8" src="/trac/chrome/common/js/resizer.js"></script>
      <script type="text/javascript" charset="utf-8" src="/trac/chrome/common/js/auto_preview.js"></script>
    <script type="text/javascript">
      jQuery("#trac-noscript").remove();
      jQuery(document).ready(function($) {
        $(".trac-autofocus").focus();
        $(".trac-target-new").attr("target", "_blank");
        setTimeout(function() { $(".trac-scroll").scrollToTop() }, 1);
        $(".trac-disable-on-submit").disableOnSubmit();
      });
    </script>
    <script type="text/javascript" src="/trac/chrome/common/js/threaded_comments.js"></script>
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("div.description").find("h1,h2,h3,h4,h5,h6").addAnchor(_("Link to this section"));
        $(".foldable").enableFolding(false, true);
      /*<![CDATA[*/
        $("#attachments").toggleClass("collapsed");
        $("#trac-up-attachments").click(function () {
          $("#attachments").removeClass("collapsed");
          return true;
        });
        $("#modify").parent().toggleClass("collapsed");
        $(".trac-topnav a").click(function() { $("#modify").parent().removeClass("collapsed"); });
        /* only enable control elements for the currently selected action */
        var actions = $("#action input[name='action']");
        function updateActionFields() {
          actions.each(function () {
            $(this).siblings().find("*[id]").enable($(this).checked());
            $(this).siblings().filter("*[id]").enable($(this).checked());
          });
        }
        actions.click(updateActionFields);
        updateActionFields();
        function setRevertHandler() {
          $("button.trac-revert").click(function() {
            var div = $("div", this);
            var field_name = div[0].id.substr(7);
            var field_value = div.text();
            var input = $("#propertyform *[name=field_" + field_name + "]");
            if (input.length > 0) {
              if (input.filter("input[type=radio]").length > 0) {
                input.val([field_value]);
              } else if (input.filter("input[type=checkbox]").length > 0) {
                input.val(field_value == "1" ? [field_value] : []);
              } else {
                input.val(field_value);
              }
            } else { // Special case for CC checkbox
              input = $("#propertyform input[name=cc_update]").val([]);
            }
            input.change();
            $(this).closest("li").remove();
            return false;
          });
        }
        setRevertHandler();
        var comment_focused = false;
        $("#comment").focus(function() { comment_focused = true; })
                     .blur(function() { comment_focused = false; });
        $("#propertyform").autoSubmit({preview: '1'}, function(data, reply) {
          var items = $(reply);
          // Update ticket box
          $("#ticket").replaceWith(items.filter('#ticket'));
          // Update changelog with original order
          $("#changelog").replaceWith(items.filter("#changelog"));
          // Reorder comments
          applyCommentsOrder(
            $('#prefs input[name="trac-comments-order"]:checked').val());
          // Show warning
          var new_changes = $("#changelog .trac-new");
          $("#trac-edit-warning").toggle(new_changes.length != 0);
          if (new_changes.length != 0)
            $("#changelog").parent().show().removeClass("collapsed");
          // Update view time
          $("#propertyform input[name='view_time']").replaceWith(items.filter("input[name='view_time']"));
          // Update preview
          var preview = $("#ticketchange").html(items.filter('#preview').children());
          var show_preview = preview.children().length != 0;
          $("#ticketchange").toggle(show_preview);
          setRevertHandler();
          // Collapse property form if comment editor has focus
          if (show_preview && comment_focused)
            $("#modify").parent().addClass("collapsed");
          // Execute scripts to load stylesheets
          items.filter("script").appendTo("head");
        }, "#ticketchange .trac-loading");
        $("#trac-comment-editor").autoSubmit({preview_comment: '1'}, function(data, reply) {
          var comment = $("#trac-comment-editor").next("div.comment").html(reply);
          comment.toggle(comment.children().length != 0);
        }, "#changelog .trac-loading");
        /*]]>*/
      });
    </script>
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://cf-trac.llnl.gov/trac"><img src="/trac/chrome/site/cf_logo.png" alt="CF Metadata Trac" height="80" width="400" /></a>
      </div>
      <form id="search" action="/trac/search" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="/trac/login">Login</a></li><li><a href="/trac/about">About Trac</a></li><li><a href="/trac/prefs">Preferences</a></li><li class="last"><a href="/trac/wiki/TracGuide">Help/Guide</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first active"><a href="/trac/query">View Tickets</a></li><li><a href="/trac/roadmap">Roadmap</a></li><li><a href="/trac/timeline">Timeline</a></li><li><a href="/trac/search">Search</a></li><li class="last"><a href="/trac/wiki">Wiki</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
        <ul>
          <li class="first"><span>&larr; <a class="prev" href="./13.html" title="ticket #13">Previous Ticket</a></span></li><li class="last"><span><a class="next" href="./15.html" title="ticket #15">Next Ticket</a> &rarr;</span></li>
        </ul>
        <hr />
      </div>
    <div id="content" class="ticket">
        <div id="ticket" class="trac-content ">
  <div class="date">
    <p>Opened <a class="timeline" href="/trac/timeline?from=2007-10-02T13%3A02%3A19-07%3A00&amp;precision=second" title="See timeline at 10/02/07 13:02:19">14 years ago</a></p>
    <p>Closed <a class="timeline" href="/trac/timeline?from=2008-10-27T14%3A59%3A40-07%3A00&amp;precision=second" title="See timeline at 10/27/08 14:59:40">12 years ago</a></p>
  </div>
  <h2>
    <a href="./14.html" class="trac-id">#14</a>
    <span class="trac-status">
      <a href="/trac/query?status=closed">closed</a>
    </span>
    <span class="trac-type">
      <a href="/trac/query?status=!closed&amp;type=enhancement">enhancement</a>
    </span>
    <span class="trac-resolution">
      (<a href="/trac/query?status=closed&amp;resolution=wontfix">wontfix</a>)
    </span>
  </h2>
  <h1 id="trac-ticket-title" class="searchable">
    <span class="summary">Allow time coordinates to be stored as a W3C / ISO 8601formatted String</span>
  </h1>
  <table class="properties">
    <tr>
      <th id="h_reporter">Reported by:</th>
      <td headers="h_reporter" class="searchable"><a href="/trac/query?status=!closed&amp;reporter=caron">caron</a></td>
      <th id="h_owner">Owned by:</th>
      <td headers="h_owner">cf-conventions@…</td>
    </tr>
    <tr>
        <th id="h_priority">
          Priority:
        </th>
        <td headers="h_priority">
              <a href="/trac/query?status=!closed&amp;priority=medium">medium</a>
        </td>
        <th id="h_milestone" class="missing">
          Milestone:
        </th>
        <td headers="h_milestone">
              <a class="missing milestone"></a>
        </td>
    </tr><tr>
        <th id="h_component">
          Component:
        </th>
        <td headers="h_component">
              <a href="/trac/query?status=!closed&amp;component=cf-conventions">cf-conventions</a>
        </td>
        <th id="h_version" class="missing">
          Version:
        </th>
        <td headers="h_version">
              <a href="/trac/query?status=!closed&amp;version="></a>
        </td>
    </tr><tr>
        <th id="h_keywords" class="missing">
          Keywords:
        </th>
        <td headers="h_keywords" class="searchable">
        </td>
        <th id="h_cc" class="missing">
          Cc:
        </th>
        <td headers="h_cc" class="searchable">
        </td>
    </tr>
  </table>
  <div class="description">
    <h3 id="comment:description">
      Description
    </h3>
    <div class="searchable">
      <p>
Currently time coordinates must be stored as a number with units that are parsable by the udunits library (cf section 4.4).
</p>
<p>
I propose that we also allow time coordinates to be expressed as W3C/ISO 8601 formatted Strings.  (Example: 2007-03-29T12:00:00Z) This format is widely used internationally, it is a profile by the W3C of the ISO standard. This page has a summary of the format and more links:
</p>
<p>
<a class="ext-link" href="http://www.unidata.ucar.edu/projects/THREDDS/tech/interfaceSpec/NetcdfSubsetService.html#Reference"><span class="icon">​</span>http://www.unidata.ucar.edu/projects/THREDDS/tech/interfaceSpec/NetcdfSubsetService.html#Reference</a>
</p>
<p>
Reasons:
</p>
<ul><li>A string representation is human readable (compare with "348472938 secs since 2007-03-29 12:00:00Z")
</li><li>Independence from the udunits library when needed.
</li><li>May be easier to use for some.
</li></ul><p>
Proposed change:
</p>
<blockquote>
<p>
1) Change section 4.4 to start with:
</p>
</blockquote>
<blockquote>
<p>
"Date coordinates must either be of type char, formatted according to the W3C/ISO 8601 Date format, or of numeric type with a mandatory units attribute containing a udunit compatible date unit string."
</p>
</blockquote>
<blockquote>
<p>
2) Add an appendix that describes the W3C/ISO 8601 format, or simply point to an external link.
</p>
</blockquote>
<p>
  
Note: I find it clearer to use "date" to refer to "calendar date", and "time" to mean a "unit of time duration" (eg 1500 secs). It might be worth looking through our usage to see where this meaning may be unclear.
</p>

    </div>
  </div>
</div>
          

        <div>
          <div class="trac-noscript" style="position: relative">
            <form id="prefs" method="get" action="/trac/prefs" style="position: absolute; right: 0">
              <div id="trac-comments-order">
                <input type="radio" id="trac-comments-oldest" name="trac-comments-order" value="oldest" checked="checked" />
                <label for="trac-comments-oldest">Oldest first</label>
                <input type="radio" id="trac-comments-newest" name="trac-comments-order" value="newest" />
                <label for="trac-comments-newest">Newest first</label>
                <span id="trac-threaded-toggle" style="display: none">
                  <input type="radio" id="trac-comments-threaded" name="trac-comments-order" value="threaded" />
                  <label for="trac-comments-threaded">Threaded</label>
                </span>
              </div>
              <div>
                <input id="trac-comments-only-toggle" type="checkbox" />
                <label for="trac-comments-only-toggle">Comments only</label>
              </div>
            </form>
          </div>
          <h3 class="foldable">Change History <span class="trac-count">(12)</span></h3>
          <div id="changelog">
              <div class="change" id="trac-change-1-1191371811000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:1" class="cnum">
    <a href="#comment:1">comment:1</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2007-10-02T17%3A36%3A51-07%3A00&amp;precision=second" title="See timeline at 10/02/07 17:36:51">14 years ago</a> by stevehankin
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
There was a very detailed and lengthy discussion of this general topic (human-readable dates in CF time axes) in March-May of 2000 on the CF email list. (This is a great illustration of the improved institutional memory that CF should achieve through this trac site.)  Reiterating two of the key points from that discussion:
</p>
<ol><li>regarding human readibility:
</li></ol><blockquote>
<blockquote>
<p>
NetCDF files are binary files.  Therefore optimized for machine access rather than human readability.  Utilities like ncdump and ncgen provide human readability and text-editor writability respectively.  
</p>
</blockquote>
</blockquote>
<blockquote>
<blockquote>
<p>
Here's a variant on the question that has been posed:  Should utilities such as ncdump and ncgen support viewing of time coordinate variables as human-readable (ISO) date strings?
</p>
</blockquote>
</blockquote>
<ol start="2"><li>regarding "easier to use"
</li></ol><blockquote>
<blockquote>
<p>
When we think of CF/netCDF files as a vehicle to achieve interoperability between data writers and data readers, then supporting multiple encodings for precisely the same information content nearly always makes the problem harder, rather than easier, since clients must support multiple sets of logic to do the same thing.
</p>
</blockquote>
</blockquote>
<blockquote>
<blockquote>
<p>
Again a variant on the question:  When considering geo-aware libraries for reading and writing netCDF data, would there be significant value in offering methods that take ISO date strings as arguments?  This approach would provide the ease-of-use advantages proposed above, without adding any new complexity either to the CF standard or to clients that read CF data.  (It's a matter of who has to do the work and how many distinct clients have to implement the same new logic.)
</p>
</blockquote>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-2-1191396734000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:2" class="cnum">
    <a href="#comment:2">comment:2</a>
  </span>
          <span>follow-up:</span>
    <a href="#comment:8" class="follow-up">↓ 8</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2007-10-03T00%3A32%3A14-07%3A00&amp;precision=second" title="See timeline at 10/03/07 00:32:14">14 years ago</a> by jonathan
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Dear John
</p>
<p>
In the previous discussions we had (probably the ones Steve is recalling too) I argued for more human-readable times. However I was convinced by Steve's arguments for simplicity then, and I agree with him now. At that time, Russ agreed that ncgen and ncdump could be extended such that CDL could show times in a human-readable form, with this being translated to and from numeric values with udunits; for CF purposes, the translation would have to support all the calendars, not just the real-world calendar (which is the only one that udunits can handle at present). Maybe Russ could comment on whether this extension to the netCDF utilities could be made? Likewise, as Steve says, other APIs which read and write netCDF files could do the same translation.
</p>
<p>
If we adopted your proposal, on the other hand, all applications which process CF-netCDF files would have to be able to handle the string as well as the numeric representation of time. That would not be backward-compatible in the sense that files containing times as strings would "break" all the existing software. Although strings are more human-readable, they have significant disadvantages for processing. For example,
</p>
<ul><li>You frequently need to extract "components" of the time e.g. the year, in order to print the time in a particular form. Parsing complicated strings to extract bits of them is awkward.
</li></ul><ul><li>You often need to do calculations on time-coordinates e.g. for working out the length of time-intervals. You can't do that with strings.
</li></ul><ul><li>You have to do different kinds of comparison with strings to test whether they are in order.
</li></ul><ul><li>They take up more space in the file even than a double-precision number. This is not normally an issue, but it could be for timeseries of station data, where the coordinates can be as large as the data.
</li></ul><p>
I guess the ISO standard also does not support non-real-world calendars.
</p>
<p>
Cheers
</p>
<p>
Jonathan
</p>

    </div>

              </div>
              <div class="change" id="trac-change-3-1191424849000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:3" class="cnum">
    <a href="#comment:3">comment:3</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2007-10-03T08%3A20%3A49-07%3A00&amp;precision=second" title="See timeline at 10/03/07 08:20:49">14 years ago</a> by caron
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <blockquote class="citation">
<blockquote>
<p>
Here's a variant on the question that has been posed:  Should utilities
</p>
</blockquote>
<blockquote>
<p>
such as ncdump and ncgen support viewing of time coordinate variables as
human-readable (ISO) date strings?
</p>
</blockquote>
</blockquote>
<p>
The problem that I see is that ncdump and ncgen dont know what a time coordinate is, so it probably cant automatically add this conversion, and you might not want it to. One could add a flag to the command line that could do it, though.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-4-1191424912000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:4" class="cnum">
    <a href="#comment:4">comment:4</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2007-10-03T08%3A21%3A52-07%3A00&amp;precision=second" title="See timeline at 10/03/07 08:21:52">14 years ago</a> by caron
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
As I read Steve's and Jonathan's arguments, I think the gist of the problem for me is "dependence on the udunits library". So let me elaborate on that:
</p>
<p>
IMO, putting calendar date parsing into udunits was a mistake. udunits is about dimensional units. there should be a different library for date parsing, that can handle calendars etc. Im guessing Steve Emmerson would agree with me on this. (Steve, es verdad?) I understand why it was done: for the common case of realtime data in the near future and past, it was an easy extension to add to udunits. 
</p>
<p>
Anyway, theres my prejudice, I think we should move towards a new, more robust time standard format and supporting libraries. The first step would be to allow ISO String representations. Next would be to find (or develop) standards for Calendars. Then develop a library that would handle both ISO and udunit formats. 
</p>
<p>
We already cant use udunits for dates in non-standard calendars, so this is just naming the problem and setting up a framework for an eventual solution.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-5-1191426302000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:5" class="cnum">
    <a href="#comment:5">comment:5</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2007-10-03T08%3A45%3A02-07%3A00&amp;precision=second" title="See timeline at 10/03/07 08:45:02">14 years ago</a> by caron
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Hi Jonathan, snips and comments below:
</p>
<blockquote class="citation">
<p>
That would not be backward-
</p>
<blockquote>
<p>
compatible in the sense that files containing times as strings would
"break" all the existing software. 
</p>
</blockquote>
</blockquote>
<p>
Yes, I guess its the price of progress. Hopefully they will break gracefully and be upgraded.
</p>
<blockquote class="citation">
<p>
Although strings are more human-
readable, they have significant disadvantages for processing.
</p>
</blockquote>
<blockquote class="citation">
<ul><li>You frequently need to extract "components" of the time e.g. the year,
in order to print the time in a particular form. Parsing complicated
strings to extract bits of them is awkward.
</li></ul><ul><li>You often need to do calculations on time-coordinates e.g. for working
out the length of time-intervals. You can't do that with strings.
</li></ul></blockquote>
<p>
You would parse the String into another object (eg a Date in Java). Its true that a udunit coordinate allows you to easily manipulate the interval, but udunits doenst understand the value, eg you cant say "what year is this?". You have to convert it to a "date object" first. So in terms of manipulating a date coordinate in a general way, udunits and ISO Strings are handled in the same way : convert to a general "date object".
</p>
<blockquote class="citation">
<ul><li>You have to do different kinds of comparison with strings to test
whether they are in order.
</li></ul></blockquote>
<p>
A lexigraphic sort on ISO strings gives the correct ordering.
</p>
<blockquote class="citation">
<ul><li>They take up more space in the file even than a double-precision number.
This is not normally an issue, but it could be for timeseries of station
data, where the coordinates can be as large as the data.
</li></ul></blockquote>
<p>
Yes, this is a disadvantage, and a good reason to retain a "udunits encoding".
</p>
<p>
As for the burden of adding another representation, parsing ISO dates is trivial in Java. Perhaps someone with C experience could comment on how difficult it is there? In both cases, I would imagine developing a standard library to do the work. 
</p>

    </div>

              </div>
              <div class="change" id="trac-change-6-1191429880000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:6" class="cnum">
    <a href="#comment:6">comment:6</a>
  </span>
          <span>follow-up:</span>
    <a href="#comment:10" class="follow-up">↓ 10</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2007-10-03T09%3A44%3A40-07%3A00&amp;precision=second" title="See timeline at 10/03/07 09:44:40">14 years ago</a> by stevehankin
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Hi John,
</p>
<p>
Maybe a trac ticket suggesting the development of a "new, more robust time standard format and supporting libraries" is in order.  (Would you want to see that on the CF site or on an internal Unidata task list?)
</p>
<p>
Attempting to move towards summary -- here are counter-arguments that have been raised:
</p>
<ol><li>Human  readability:  The limited merits of human readability for data stored in a binary file were already discussed.  Extending the human readability argument to an absurd extreme, we might analogously suggest that human readabilty would be improved if floating point numbers were stored as formatted strings, too.  The difference between the two is that ncdump knows how to format floating point numbers, but does not currently know how to format dates.
</li></ol><ol start="2"><li>The limits of ISO date strings in scientific applications:  ISO date strings were not developed to support scientific data encodings.  (Granted that in the current turn of the historical crank they are being imported into the scientific realm and bringing notable benefits.)  They are great for communicating a few Gregorian calendar dates.  But as noted they break down with the funky calendars that climate modelers use.  And they also are not well suited to the multi-dimensional analyses that scientists need to do.  Time is fundamentally a linear progression just as distance is, and netCDF applications often achieve significant benefits from having time encoded in the same manner as distance.  For example taking a time derivative is exactly the same numerical operation as a distance derivative.  (We're seeing some of the same divergence of viewpoints here that play out in the use of Java for modeling applications.  Good questions to ask.  But bigger and deeper questions than this discussion of ISO string usage.)
</li></ol><ol start="3"><li>The importance of preserving stability and interoperability (a personal favorite).  When the merits of a new, proposed feature are ambiguous, "no" is usually the preferred answer. (modified version of a quote that Russ Rew introduced into the discussions a couple of years ago.)
</li></ol><hr />
<p>
Stepping back from the particulars of this discussion to the maintenance of trac:  issues that are opened need eventually to be closed.  We haven't yet identified a moderator.  (Or have we and I missed it?) So we ought to self-police.  Is this one ready to close?
</p>

    </div>

              </div>
              <div class="change" id="trac-change-7-1191430494000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:7" class="cnum">
    <a href="#comment:7">comment:7</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2007-10-03T09%3A54%3A54-07%3A00&amp;precision=second" title="See timeline at 10/03/07 09:54:54">14 years ago</a> by jonathan
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Dear John
</p>
<blockquote class="citation">
<p>
ncdump and ncgen dont know what a time coordinate is, so it probably cant automatically add this conversion
</p>
</blockquote>
<p>
If ncdump and ncgen were CF-enabled (or COARDS-enabled), they could identify a time coordinate, because it has units of time since reftime. CF also provides a calendar attribute that ncdump and ncgen could use.
</p>
<blockquote class="citation">
<p>
A lexigraphic sort on ISO strings gives the correct ordering.
</p>
</blockquote>
<p>
That's true. What I meant was, if you support both strings and numeric values, this is one aspect for which you have to write alternative code for them that works in different ways.
</p>
<blockquote class="citation">
<p>
Hopefully they will break gracefully and be upgraded.
</p>
</blockquote>
<p>
I really don't think it's a good idea to introduce an alternative convention which doesn't seem to offer any new functionality but which can't be handled by existing software. The software concerned is not just proper packages supported by Unidata etc., but ad-hoc programs in all the languages of the netCDF interface written by ordinary analysts of data.
</p>
<p>
You may well be right that date-time support should have been a separate package from udunits. We have been using the udunits format for non-real-world calendars even though udunits doesn't support them. Luckily most of the non-real-world calendars have fixed-length years, in which it is very easy to convert between numeric time and components of time. But I agree that software with proper calendar support and interfaces in many languages would be valuable.
</p>
<p>
However I'm not convinced of the advantage of using strings. If you're always going to use subroutines to encode and decode dates, it doesn't matter what the encoding looks like anyway. If ncgen and ncdump could handle the encoding (whatever it is) then there would be no inconvenience for human-readability. You don't argue that integers and floating-point numbers should be replaced by strings as well, because ncgen and ncdump are able to encode and decode those!
</p>
<p>
Cheers
</p>
<p>
Jonathan
</p>

    </div>

              </div>
              <div class="change" id="trac-change-8-1191467337000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:8" class="cnum">
    <a href="#comment:8">comment:8</a>
  </span>
        in reply to:
    <a href="#comment:2">↑ 2</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2007-10-03T20%3A08%3A57-07%3A00&amp;precision=second" title="See timeline at 10/03/07 20:08:57">14 years ago</a> by russ
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Replying to <a class="ticket" href="./14#comment:2" title="Comment 2">jonathan</a>:
</p>
<blockquote class="citation">
<p>
... Russ agreed that ncgen and ncdump could be extended such that CDL could show times in a human-readable form, with this being translated to and from numeric values with udunits; for CF purposes, the translation would have to support all the calendars, not just the real-world calendar (which is the only one that udunits can handle at present). Maybe Russ could comment on whether this extension to the netCDF utilities could be made? Likewise, as Steve says, other APIs which read and write netCDF files could do the same translation.
</p>
</blockquote>
<p>
Yes, this enhancement is actually on the list of tasks to implement in the ncdump/ncgen utilities.  Don Hooper (NOAA ESRL/PSD) at one time made a modified ncdump available that displayed times in a human-readable form when an option was specified on the command line.  I don't think that extension handled CF climate calendars, however.
</p>
<p>
We have plans to incorporate climate calendars into libcf, incorporating something similar to what Bob Drach (LLNL) and colleagues provide in their CDAT software, specifically functionality of libcdunif and cdtime.
</p>
<p>
The ncdump time representation work is currently on the back burner until we've finished a netCDF-4 version of ncdump and ncgen utilities.  I'll take all the interest in this topic as an indication that having a way to display human-readable time with ncdump is a fairly high priority enhancement.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-9-1191832186000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:9" class="cnum">
    <a href="#comment:9">comment:9</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2007-10-08T01%3A29%3A46-07%3A00&amp;precision=second" title="See timeline at 10/08/07 01:29:46">14 years ago</a> by bnl
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Date handling using ISO strings is only going to get easier in high level languages, but ISO19108 allows a richer set of descriptions than ISO8601 (which is limited as noted above). I'd rather we broke the udunits link, and  invested in an ISO19108 compatible strategy. I know Andrew's got more concrete thoughts on this ... so hopefully he'll weigh in.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-10-1192555063000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:10" class="cnum">
    <a href="#comment:10">comment:10</a>
  </span>
        in reply to:
    <a href="#comment:6">↑ 6</a>
        ;
          <span>follow-up:</span>
    <a href="#comment:11" class="follow-up">↓ 11</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2007-10-16T10%3A17%3A43-07%3A00&amp;precision=second" title="See timeline at 10/16/07 10:17:43">14 years ago</a> by caron
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Replying to <a class="ticket" href="./14#comment:6" title="Comment 6">stevehankin</a>:
</p>
<blockquote class="citation">
<p>
Hi John,
</p>
<p>
Maybe a trac ticket suggesting the development of a "new, more robust time standard format and supporting libraries" is in order.  (Would you want to see that on the CF site or on an internal Unidata task list?)
</p>
</blockquote>
<p>
Perhaps thats the way to go about this. To repeat, the main problem is the dependence on the udunits library, which is limited in data handling, and is not the right place to "do it right". 
</p>
<blockquote class="citation">
<p>
Attempting to move towards summary -- here are counter-arguments that have been raised:
</p>
<ol><li>Human  readability:  The limited merits of human readability for data stored in a binary file were already discussed.  Extending the human readability argument to an absurd extreme, we might analogously suggest that human readabilty would be improved if floating point numbers were stored as formatted strings, too.  The difference between the two is that ncdump knows how to format floating point numbers, but does not currently know how to format dates.
</li></ol></blockquote>
<p>
I cant say I find "reductio ad absurdum" arguments helpful. The problem is that you need the udunits library to make time coordinates intelligible. Floating point display is built into every language that exists.
</p>
<blockquote class="citation">
<ol start="2"><li>The limits of ISO date strings in scientific applications:  ISO date strings were not developed to support scientific data encodings.  (Granted that in the current turn of the historical crank they are being imported into the scientific realm and bringing notable benefits.)  They are great for communicating a few Gregorian calendar dates.  But as noted they break down with the funky calendars that climate modelers use.  And they also are not well suited to the multi-dimensional analyses that scientists need to do.  Time is fundamentally a linear progression just as distance is, and netCDF applications often achieve significant benefits from having time encoded in the same manner as distance.  For example taking a time derivative is exactly the same numerical operation as a distance derivative.  (We're seeing some of the same divergence of viewpoints here that play out in the use of Java for modeling applications.  Good questions to ask.  But bigger and deeper questions than this discussion of ISO string usage.)
</li></ol></blockquote>
<p>
Good point. I dont know if Brian's suggestion of ISO 19102 helps with non-Gregorian calendars. The want CHF 146,00 for me to read it. How many CHF in a hectare anyway? ;<sup>)
</sup></p>
<blockquote class="citation">
<ol start="3"><li>The importance of preserving stability and interoperability (a personal favorite).  When the merits of a new, proposed feature are ambiguous, "no" is usually the preferred answer. (modified version of a quote that Russ Rew introduced into the discussions a couple of years ago.)
</li></ol></blockquote>
<p>
Unless of course the feature is one's own "personal favorite" ;<sup>)
</sup></p>
<blockquote class="citation">
<hr />
<p>
Stepping back from the particulars of this discussion to the maintenance of trac:  issues that are opened need eventually to be closed.  We haven't yet identified a moderator.  (Or have we and I missed it?) So we ought to self-police.  Is this one ready to close?
</p>
</blockquote>
<p>
Sorry, Im unclear about we identify a moderator. I guess we are supposed to wait a 2 weeks (?) for any other comments to come in.
</p>
<p>
Im ok with closing this issues, as proposed, but it will come up again when we get around to "doing it  right" with a new library.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-11-1192610236000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:11" class="cnum">
    <a href="#comment:11">comment:11</a>
  </span>
        in reply to:
    <a href="#comment:10">↑ 10</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2007-10-17T01%3A37%3A16-07%3A00&amp;precision=second" title="See timeline at 10/17/07 01:37:16">14 years ago</a> by jonathan
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Replying to <a class="ticket" href="./14#comment:10" title="Comment 10">caron</a>:
</p>
<blockquote class="citation">
<blockquote class="citation">
<p>
Maybe a trac ticket suggesting the development of a "new, more robust time standard format and supporting libraries" is in order.  (Would you want to see that on the CF site or on an internal Unidata task list?)
</p>
</blockquote>
<p>
Perhaps thats the way to go about this. To repeat, the main problem is the dependence on the udunits library, which is limited in data handling, and is not the right place to "do it right". 
</p>
</blockquote>
<p>
I agree that the best way to proceed is to improve ncgen/ncdump and other software to encode and decode dates conveniently.
</p>
<blockquote class="citation">
<p>
Sorry, Im unclear about we identify a moderator. I guess we are supposed to wait a 2 weeks (?) for any other comments to come in. 
Im ok with closing this issues, as proposed, but it will come up again when we get around to "doing it  right" with a new library.
</p>
</blockquote>
<p>
A moderator is supposed to volunteer (you could try to find one before opening the ticket) and if no-one volunteers then the committee chairman (Karl) should find a moderator. The moderator would close the ticket after having summarised it, but I'm sure it's fine for you to close it yourself if you are happy to pursue the matter in another way.
</p>
<p>
Best wishes
</p>
<p>
Jonathan
</p>

    </div>

              </div>
              <div class="change" id="trac-change-12-1225144780000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:12" class="cnum">
    <a href="#comment:12">comment:12</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2008-10-27T14%3A59%3A40-07%3A00&amp;precision=second" title="See timeline at 10/27/08 14:59:40">12 years ago</a> by taylor13
  </h3>
  <div class="trac-ticket-buttons">
  </div>
  <ul class="changes">
    <li class="trac-field-resolution">
      <strong class="trac-field-resolution">Resolution</strong>
        set to <em>wontfix</em>
    </li><li class="trac-field-status">
      <strong class="trac-field-status">Status</strong>
        changed from <em>new</em> to <em>closed</em>
    </li>
  </ul>
    <div class="comment searchable">
      <p>
My understanding is that the difficulty in interpreting time coordinates in units expressed with the "since" and base-date construcion has been at least partially addressed by an ncdump capability that permits the user to request that the time be translated into a normal date, conforming to common conventions.  Thus, there is no longer a strong need to do this within CF.  
</p>
<p>
I am therefore closing this ticket.  Thanks to everyone who contributed to the discussion and thanks to unidata for adding the new capability to ncdump.
</p>
<p>
Karl Taylor
</p>

    </div>

              </div>
          </div>
        </div>
      <div id="help"><strong>Note:</strong> See
        <a href="/trac/wiki/TracTickets">TracTickets</a> for help on using
        tickets.</div>
    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="./14?format=rss" class="rss">RSS Feed</a>
        </li><li>
          <a rel="nofollow" href="./14?format=csv" class="csv">Comma-delimited Text</a>
        </li><li class="last">
          <a rel="nofollow" href="./14?format=tab" class="tab">Tab-delimited Text</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="https://trac.edgewall.org/"><img src="/trac/chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="/trac/about"><strong>Trac 1.0.20</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the CF Metadata home page at<br /><a href="http://cf-convention.github.io">http://cf-convention.github.io</a><br><font color="#0000ff" size="3"><b>The CF Metadata Trac issue tracker is read-only and will soon be shut down permanently</b></font></p>
    </div>
  </body>
</html>
