<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  


  <head>
    <title>
      #74 (Allow sharing of ancillary variables among multiple data variables)
     – CF Metadata
    </title>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!--[if IE]><script type="text/javascript">
      if (/^#__msie303:/.test(window.location.hash))
        window.location.replace(window.location.hash.replace(/^#__msie303:/, '#'));
    </script><![endif]-->
        <link rel="search" href="/trac/search" />
        <link rel="prev" href="./73.html" title="ticket #73" />
        <link rel="last" href="./176.html" title="ticket #176" />
        <link rel="help" href="/trac/wiki/TracGuide" />
        <link rel="alternate" href="./74?format=rss" type="application/rss+xml" class="rss" title="RSS Feed" /><link rel="alternate" href="./74?format=csv" type="text/csv" class="csv" title="Comma-delimited Text" /><link rel="alternate" href="./74?format=tab" type="text/tab-separated-values" class="tab" title="Tab-delimited Text" />
        <link rel="next" href="./75.html" title="ticket #75" />
        <link rel="start" href="/trac/wiki" />
        <link rel="stylesheet" href="/trac/chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="/trac/chrome/common/css/ticket.css" type="text/css" />
        <link rel="first" href="./1.html" title="ticket #1" />
        <link rel="shortcut icon" href="/trac/chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="/trac/chrome/common/trac.ico" type="image/x-icon" />
    <style id="trac-noscript" type="text/css">.trac-noscript { display: none !important }</style>
      <link type="application/opensearchdescription+xml" rel="search" href="/trac/search/opensearch" title="Search CF Metadata" />
    <script type="text/javascript">
      var auto_preview_timeout=2.0;
      var form_token="b8aeac20bf7fd49b63339caa";
      var comments_prefs={"comments_only":"false","comments_order":"oldest"};
    </script>
      <script type="text/javascript" charset="utf-8" src="/trac/chrome/common/js/jquery.js"></script>
      <script type="text/javascript" charset="utf-8" src="/trac/chrome/common/js/babel.js"></script>
      <script type="text/javascript" charset="utf-8" src="/trac/chrome/common/js/trac.js"></script>
      <script type="text/javascript" charset="utf-8" src="/trac/chrome/common/js/search.js"></script>
      <script type="text/javascript" charset="utf-8" src="/trac/chrome/common/js/folding.js"></script>
      <script type="text/javascript" charset="utf-8" src="/trac/chrome/common/js/wikitoolbar.js"></script>
      <script type="text/javascript" charset="utf-8" src="/trac/chrome/common/js/resizer.js"></script>
      <script type="text/javascript" charset="utf-8" src="/trac/chrome/common/js/auto_preview.js"></script>
    <script type="text/javascript">
      jQuery("#trac-noscript").remove();
      jQuery(document).ready(function($) {
        $(".trac-autofocus").focus();
        $(".trac-target-new").attr("target", "_blank");
        setTimeout(function() { $(".trac-scroll").scrollToTop() }, 1);
        $(".trac-disable-on-submit").disableOnSubmit();
      });
    </script>
    <script type="text/javascript" src="/trac/chrome/common/js/threaded_comments.js"></script>
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("div.description").find("h1,h2,h3,h4,h5,h6").addAnchor(_("Link to this section"));
        $(".foldable").enableFolding(false, true);
      /*<![CDATA[*/
        $("#attachments").toggleClass("collapsed");
        $("#trac-up-attachments").click(function () {
          $("#attachments").removeClass("collapsed");
          return true;
        });
        $("#modify").parent().toggleClass("collapsed");
        $(".trac-topnav a").click(function() { $("#modify").parent().removeClass("collapsed"); });
        /* only enable control elements for the currently selected action */
        var actions = $("#action input[name='action']");
        function updateActionFields() {
          actions.each(function () {
            $(this).siblings().find("*[id]").enable($(this).checked());
            $(this).siblings().filter("*[id]").enable($(this).checked());
          });
        }
        actions.click(updateActionFields);
        updateActionFields();
        function setRevertHandler() {
          $("button.trac-revert").click(function() {
            var div = $("div", this);
            var field_name = div[0].id.substr(7);
            var field_value = div.text();
            var input = $("#propertyform *[name=field_" + field_name + "]");
            if (input.length > 0) {
              if (input.filter("input[type=radio]").length > 0) {
                input.val([field_value]);
              } else if (input.filter("input[type=checkbox]").length > 0) {
                input.val(field_value == "1" ? [field_value] : []);
              } else {
                input.val(field_value);
              }
            } else { // Special case for CC checkbox
              input = $("#propertyform input[name=cc_update]").val([]);
            }
            input.change();
            $(this).closest("li").remove();
            return false;
          });
        }
        setRevertHandler();
        var comment_focused = false;
        $("#comment").focus(function() { comment_focused = true; })
                     .blur(function() { comment_focused = false; });
        $("#propertyform").autoSubmit({preview: '1'}, function(data, reply) {
          var items = $(reply);
          // Update ticket box
          $("#ticket").replaceWith(items.filter('#ticket'));
          // Update changelog with original order
          $("#changelog").replaceWith(items.filter("#changelog"));
          // Reorder comments
          applyCommentsOrder(
            $('#prefs input[name="trac-comments-order"]:checked').val());
          // Show warning
          var new_changes = $("#changelog .trac-new");
          $("#trac-edit-warning").toggle(new_changes.length != 0);
          if (new_changes.length != 0)
            $("#changelog").parent().show().removeClass("collapsed");
          // Update view time
          $("#propertyform input[name='view_time']").replaceWith(items.filter("input[name='view_time']"));
          // Update preview
          var preview = $("#ticketchange").html(items.filter('#preview').children());
          var show_preview = preview.children().length != 0;
          $("#ticketchange").toggle(show_preview);
          setRevertHandler();
          // Collapse property form if comment editor has focus
          if (show_preview && comment_focused)
            $("#modify").parent().addClass("collapsed");
          // Execute scripts to load stylesheets
          items.filter("script").appendTo("head");
        }, "#ticketchange .trac-loading");
        $("#trac-comment-editor").autoSubmit({preview_comment: '1'}, function(data, reply) {
          var comment = $("#trac-comment-editor").next("div.comment").html(reply);
          comment.toggle(comment.children().length != 0);
        }, "#changelog .trac-loading");
        /*]]>*/
      });
    </script>
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://cf-trac.llnl.gov/trac"><img src="/trac/chrome/site/cf_logo.png" alt="CF Metadata Trac" height="80" width="400" /></a>
      </div>
      <form id="search" action="/trac/search" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="/trac/login">Login</a></li><li><a href="/trac/about">About Trac</a></li><li><a href="/trac/prefs">Preferences</a></li><li class="last"><a href="/trac/wiki/TracGuide">Help/Guide</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first active"><a href="/trac/query">View Tickets</a></li><li><a href="/trac/roadmap">Roadmap</a></li><li><a href="/trac/timeline">Timeline</a></li><li><a href="/trac/search">Search</a></li><li class="last"><a href="/trac/wiki">Wiki</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
        <ul>
          <li class="first"><span>&larr; <a class="prev" href="./73.html" title="ticket #73">Previous Ticket</a></span></li><li class="last"><span><a class="next" href="./75.html" title="ticket #75">Next Ticket</a> &rarr;</span></li>
        </ul>
        <hr />
      </div>
    <div id="content" class="ticket">
        <div id="ticket" class="trac-content ">
  <div class="date">
    <p>Opened <a class="timeline" href="/trac/timeline?from=2012-01-07T06%3A09%3A00-08%3A00&amp;precision=second" title="See timeline at 01/07/12 06:09:00">9 years ago</a></p>
    <p>Closed <a class="timeline" href="/trac/timeline?from=2017-05-15T14%3A49%3A49-07%3A00&amp;precision=second" title="See timeline at 05/15/17 14:49:49">4 years ago</a></p>
  </div>
  <h2>
    <a href="./74.html" class="trac-id">#74</a>
    <span class="trac-status">
      <a href="/trac/query?status=closed">closed</a>
    </span>
    <span class="trac-type">
      <a href="/trac/query?status=!closed&amp;type=enhancement">enhancement</a>
    </span>
    <span class="trac-resolution">
      (<a href="/trac/query?status=closed&amp;resolution=fixed">fixed</a>)
    </span>
  </h2>
  <h1 id="trac-ticket-title" class="searchable">
    <span class="summary">Allow sharing of ancillary variables among multiple data variables</span>
  </h1>
  <table class="properties">
    <tr>
      <th id="h_reporter">Reported by:</th>
      <td headers="h_reporter" class="searchable">rhorne@…</td>
      <th id="h_owner">Owned by:</th>
      <td headers="h_owner"><a href="/trac/query?status=!closed&amp;owner=davidhassell">davidhassell</a></td>
    </tr>
    <tr>
        <th id="h_priority">
          Priority:
        </th>
        <td headers="h_priority">
              <a href="/trac/query?status=!closed&amp;priority=medium">medium</a>
        </td>
        <th id="h_milestone" class="missing">
          Milestone:
        </th>
        <td headers="h_milestone">
              <a class="missing milestone"></a>
        </td>
    </tr><tr>
        <th id="h_component">
          Component:
        </th>
        <td headers="h_component">
              <a href="/trac/query?status=!closed&amp;component=cf-conventions">cf-conventions</a>
        </td>
        <th id="h_version" class="missing">
          Version:
        </th>
        <td headers="h_version">
              <a href="/trac/query?status=!closed&amp;version="></a>
        </td>
    </tr><tr>
        <th id="h_keywords">
          Keywords:
        </th>
        <td headers="h_keywords" class="searchable">
              <a href="/trac/query?status=!closed&amp;keywords=~%22ancillary">"ancillary</a> <a href="/trac/query?status=!closed&amp;keywords=~data%22">data"</a> <a href="/trac/query?status=!closed&amp;keywords=~%22standard">"standard</a> <a href="/trac/query?status=!closed&amp;keywords=~name">name</a> <a href="/trac/query?status=!closed&amp;keywords=~modifiers%22">modifiers"</a>
        </td>
        <th id="h_cc" class="missing">
          Cc:
        </th>
        <td headers="h_cc" class="searchable">
        </td>
    </tr>
  </table>
  <div class="description">
    <h3 id="comment:description">
      Description
    </h3>
    <div class="searchable">
      <p>
Currently it is not possible for multiple data variables to share an ancillary variable. 
</p>
<p>
Augment the conventions to allow two or more data variables to share an ancillary variable.
</p>
<p>
Here is an example of a convention, which dovetails with the existing conventions, to provide this capability:
</p>
<p>
float swpt(lat,lon);
</p>
<blockquote>
<p>
.
. 
</p>
</blockquote>
<blockquote>
<p>
swpt:standard_name=&#34;sea_water_potential_temperature";
swpt:ancillary_variables=&#34;nobs flags";
.
.
</p>
</blockquote>
<p>
float sws(lat,lon);
</p>
<blockquote>
<p>
.
.
sws:standard_name=&#34;sea_water_salinity";
sws:ancillary_variables=&#34;nobs flags";
.
.
</p>
</blockquote>
<p>
int nobs(lat,lon);
</p>
<blockquote>
<p>
.
.
nobs:standard_name=&#34;sea_water_potential_temperature sea_water_salinity number_of_observations";
.
.
</p>
</blockquote>
<p>
int flags(lat,lon);
</p>
<blockquote>
<p>
.
.
flags:standard_name=&#34;sea_water_potential_temperature sea_water_salinity status_flag";
flags:flag_values = 0, 1, 2;
flags:flag_meanings = "valid invalid unknown";
.
.
</p>
</blockquote>
<p>
Change the text in the CF metadata conventions section 3.3 that reads
</p>
<p>
"A standard name is associated with a variable via the attribute standard_name
which takes a string value comprised of a standard name optionally followed by
one or more blanks and a standard name modifier (a string value from Appendix
C, Standard Name Modifiers)."
</p>
<p>
to
</p>
<p>
"A standard name is associated with a variable via the attribute standard_name which takes a string value that can have either of two forms. The first form is a standard name alone. The second form is a blank-separated list beginning with one or more standard names and ending with a single standard name modifier (i.e. standard_name [standard_name ...] standard_name_modifier). The standard name modifiers are defined in Appendix C, Standard Name Modifiers. This second form permits a single variable to provide ancillary data (see section 3.4) for two or more variables where each has a unique standard name."
</p>
<p>
Changes to CF software tools are required.  For example, the CF_checker, which validates the standard_name attribute needs to change. However, it does not require any change to software that uses the complete attribute simply as an identifying string (e.g. to label plots, etc.)
</p>

    </div>
  </div>
</div>
          

        <div>
          <div class="trac-noscript" style="position: relative">
            <form id="prefs" method="get" action="/trac/prefs" style="position: absolute; right: 0">
              <div id="trac-comments-order">
                <input type="radio" id="trac-comments-oldest" name="trac-comments-order" value="oldest" checked="checked" />
                <label for="trac-comments-oldest">Oldest first</label>
                <input type="radio" id="trac-comments-newest" name="trac-comments-order" value="newest" />
                <label for="trac-comments-newest">Newest first</label>
                <span id="trac-threaded-toggle" style="display: none">
                  <input type="radio" id="trac-comments-threaded" name="trac-comments-order" value="threaded" />
                  <label for="trac-comments-threaded">Threaded</label>
                </span>
              </div>
              <div>
                <input id="trac-comments-only-toggle" type="checkbox" />
                <label for="trac-comments-only-toggle">Comments only</label>
              </div>
            </form>
          </div>
          <h3 class="foldable">Change History <span class="trac-count">(60)</span></h3>
          <div id="changelog">
              <div class="change" id="trac-change-1-1326133396000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:1" class="cnum">
    <a href="#comment:1">comment:1</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2012-01-09T10%3A23%3A16-08%3A00&amp;precision=second" title="See timeline at 01/09/12 10:23:16">9 years ago</a> by jonathan
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Many thanks for making this proposal. I think this extension to CF would be useful.
</p>
<p>
Jonathan
</p>

    </div>

              </div>
              <div class="change" id="trac-change-2-1326205468000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:2" class="cnum">
    <a href="#comment:2">comment:2</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2012-01-10T06%3A24%3A28-08%3A00&amp;precision=second" title="See timeline at 01/10/12 06:24:28">9 years ago</a> by ngalbraith
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
There's no prohibition (that I can find!) in the current standard against an ancillary variable being shared by multiple data variables. 
</p>
<p>
"The variables listed by the ancillary_variables attribute will OFTEN (my caps) have the standard name of the variable which points to them including a modifier"
</p>
<p>
To my mind, the problem is in the concept of standard name modifiers, and it would be worthwhile to find an alternate way to convey the information currently in those modifiers' definitions.
</p>
<p>
I'd like to see status_flag (and at least one of the other modifiers, number_of_observations) added as a standard name, possibly with a new attribute to indicate the standard names of the referring variables.  
</p>
<p>
This seems less disruptive with respect to existing software, and more practical for systems where one ancillary variable is shared by many data variables.
 
</p>

    </div>

              </div>
              <div class="change" id="trac-change-3-1330096067000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:3" class="cnum">
    <a href="#comment:3">comment:3</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2012-02-24T07%3A07%3A47-08%3A00&amp;precision=second" title="See timeline at 02/24/12 07:07:47">9 years ago</a> by jonathan
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Dear Nan
</p>
<p>
There is no prohibition on pointing to the same ancillary variable from several data variables, but the difficulty is that if those data variables have standard names, it is not possible to choose a standard name for the ancillary variable! That's what this proposal aims to get round. You are right that we could make <tt>status_flag</tt> into a standard name in its own right. The drawback of that would be that it wouldn't so fully identify itself; it would not say what data it applied to. We could likewise do this with <tt>number_of_observations</tt>. Do you think that matters?
</p>
<p>
We could not do as you proposers with modifiers, such as <tt>standard_error</tt>, which have physical units, since those units depend on the data variable. Variables with different units must have different standard names.
</p>
<p>
Best wishes
</p>
<p>
Jonathan
</p>

    </div>

              </div>
              <div class="change" id="trac-change-4-1347462533000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:4" class="cnum">
    <a href="#comment:4">comment:4</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2012-09-12T08%3A08%3A53-07%3A00&amp;precision=second" title="See timeline at 09/12/12 08:08:53">9 years ago</a> by rhorne@…
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
I volunteer to be the moderator for this trac item.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-5-1347480005000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:5" class="cnum">
    <a href="#comment:5">comment:5</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2012-09-12T13%3A00%3A05-07%3A00&amp;precision=second" title="See timeline at 09/12/12 13:00:05">9 years ago</a> by ngalbraith
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Since the ancillary_variable attribute uses the short name, not the standard name,
and since there is no prohibition against having 2 variables with the same standard name in a single file, you can also deal with shared ancillary variables like this:
</p>
<p>
float swpt(lat,lon);
</p>
<blockquote>
<p>
swpt:standard_name=&#34;sea_water_potential_temperature";
swpt:ancillary_variables=&#34;swptnobs swptflags";
</p>
</blockquote>
<p>
float sws(lat,lon);
</p>
<blockquote>
<p>
sws:standard_name=&#34;sea_water_salinity";
sws:ancillary_variables=&#34;swsnobs swsflags"; 
</p>
</blockquote>
<p>
int swptnobs(lat,lon);
</p>
<blockquote>
<p>
nobs:standard_name=&#34;number_of_observations"; 
</p>
</blockquote>
<p>
int swsnobs(lat,lon);
</p>
<blockquote>
<p>
nobs:standard_name=&#34;number_of_observations"; 
</p>
</blockquote>
<p>
The ancillary variable doesn't really need to point back to its "data variable" - the data variable points to the ancillary variable. 
</p>
<p>
To be honest, I use a lot of ancillary variables that have no standard name, because this construct allows 2 dimensional meta data that does not fit into attributes; things like instrument descriptions (make/model/SN). So maybe this addition to the standard will not be a problem, but it seems to me to be fixing a problem that does not really exist.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-6-1347484896000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:6" class="cnum">
    <a href="#comment:6">comment:6</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2012-09-12T14%3A21%3A36-07%3A00&amp;precision=second" title="See timeline at 09/12/12 14:21:36">9 years ago</a> by rhorne@…
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Hi Nan:
</p>
<p>
In the example you provided, neither of the two ancillary variable (i.e. ancillary data with names swptnobs and swsnobs) are shared by multiple data variables (i.e. the ones with names of swpt and sws).
</p>
<p>
Using your example, how can the data variables with the names of swpt and sws share the same ancillary variable (containing the number of observations) with the current set of CF conventions ?
</p>
<p>
The reason for this sharing would be to avoid duplicating ancillary data in the NetCDF dataset for performance and/or sizing reasons.
</p>
<p>
very respectfully,
</p>
<p>
randy
</p>

    </div>

              </div>
              <div class="change" id="trac-change-7-1347540353000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:7" class="cnum">
    <a href="#comment:7">comment:7</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2012-09-13T05%3A45%3A53-07%3A00&amp;precision=second" title="See timeline at 09/13/12 05:45:53">9 years ago</a> by ngalbraith
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
You're right, I kept that short because I was just giving an example of why (IMHO) the standard name of an ancillary variable doesn't need to refer back to the "data variable" - since there can be multiple variables with the same standard name.  
</p>
<p>
Here's how I'd code 2 data variables that share the nobs ancillary variable and each has its own flags ancillary variable. I just don't see any problem with this - the relationship between the data variables and the ancillary variables seems very clear. 
</p>
<p>
float swpt(lat,lon);
</p>
<blockquote>
<p>
swpt:standard_name=&#34;sea_water_potential_temperature"; 
</p>
</blockquote>
<blockquote>
<p>
swpt:ancillary_variables=&#34;nobs swptflags";
</p>
</blockquote>
<p>
float sws(lat,lon);
</p>
<blockquote>
<p>
sws:standard_name=&#34;sea_water_salinity"; 
</p>
</blockquote>
<blockquote>
<p>
sws:ancillary_variables=&#34;nobs swsflags";
</p>
</blockquote>
<p>
int nobs(lat,lon);
</p>
<blockquote>
<p>
nobs:standard_name=&#34;number_of_observations";
</p>
</blockquote>
<p>
int swptflags(lat,lon);
</p>
<blockquote>
<p>
swptflags:standard_name=&#34;flags";
</p>
</blockquote>
<p>
int swsflags(lat,lon);
</p>
<blockquote>
<p>
swsflags:standard_name=&#34;flags";
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-8-1347568116000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:8" class="cnum">
    <a href="#comment:8">comment:8</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2012-09-13T13%3A28%3A36-07%3A00&amp;precision=second" title="See timeline at 09/13/12 13:28:36">9 years ago</a> by rhorne@…
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Hi Nan:
</p>
<p>
Note that this enhancement is specifically intended to address the case when the ancillary variable is based on one of the modifiers in Table C.1, and its associated data variable has a standard_name.
</p>
<p>
Let me repost Jonathan's response from 2/24, because I think we are revisiting ground already discussed:
</p>
<p>
There is no prohibition on pointing to the same ancillary variable from several data variables, but the difficulty is that if those data variables have standard names, it is not possible to choose a standard name for the ancillary variable! That's what this proposal aims to get around. You are right that we could make status_flag into a standard name in its own right. The drawback of that would be that it wouldn't so fully identify itself; it would not say what data it applied to. We could likewise do this with number_of_observations. Do you think that matters? 
</p>
<p>
We could not do as you propose with modifiers, such as standard_error, which have physical units, since those units depend on the data variable. Variables with different units must have different standard names.
</p>
<p>
very respectfully,
</p>
<p>
randy
</p>

    </div>

              </div>
              <div class="change" id="trac-change-9-1347899900000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:9" class="cnum">
    <a href="#comment:9">comment:9</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2012-09-17T09%3A38%3A20-07%3A00&amp;precision=second" title="See timeline at 09/17/12 09:38:20">9 years ago</a> by jonathan
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Dear Nan
</p>
<p>
The problem is illustrated by your example: you use <tt>number_of_observations</tt> and <tt>flags</tt> as standard names, but they are not in the standard name table, so that's not legal. A valid value for the <tt>standard_name</tt> attribute would be <tt>sea_water_potential_temperature number_of_observations</tt>, but it would be confusing to use a variable with that description as an ancillary for sea water salinity as well.
</p>
<p>
Your example proposes another way to solve this problem, which is to make <tt>number_of_observations</tt> a standard_name. It would not say what was being observed, though, so the ancillary variable would be less well-described in its own right. Does that matter? What do you or others think?
</p>
<p>
Best wishes
</p>
<p>
Jonathan
</p>

    </div>

              </div>
              <div class="change" id="trac-change-10-1347961054000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:10" class="cnum">
    <a href="#comment:10">comment:10</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2012-09-18T02%3A37%3A34-07%3A00&amp;precision=second" title="See timeline at 09/18/12 02:37:34">9 years ago</a> by mgschultz
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Hi Jonathan,
</p>
<blockquote>
<p>
interesting thought. My initial reaction was "NEVER!", because such a generic name would contradict the principle of letting a standard_name describe as precisely as possible what a variable is supposed to mean. However, reading through the recent posts I can see the rationale for this. Yet, we would have to be careful to distinguish these generic names from the others that are normally assigned to a variable. Otherwise, everyone would use only <tt>"number_of_observations"</tt>, when in fact <tt>"sea_water_potential_temperature number_of_observations"</tt> would be a lot more precise and indicate what we really want.
</p>
</blockquote>
<blockquote>
<p>
Perhaps it would be better to call this a "category_name" rather than a "standard_name"?
</p>
</blockquote>
<blockquote>
<p>
On the other hand: let's rewind a bit. If the standard_name were indeed the full <tt>"sea_water_potential_temperature number_of_observations"</tt>, and another variable would point to nobs as well, wouldn't this then automatically suggest that the same number of observations were obtained for both variables? Does it matter that there is no variable with a standard_name <tt>"sea_water_salinity number_of_observations"</tt>?  I think, this would be a cleaner approach without loss of functionality. It's up to the PI then to decide which of the two possible standard_names is to be used.
</p>
</blockquote>
<p>
Martin
</p>

    </div>

              </div>
              <div class="change" id="trac-change-11-1361284008000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:11" class="cnum">
    <a href="#comment:11">comment:11</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-02-19T06%3A26%3A48-08%3A00&amp;precision=second" title="See timeline at 02/19/13 06:26:48">8 years ago</a> by ngalbraith
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
I agree with Martin - 'sea_water_potential_temperature' could easily have an ancillary variable called 'sea_water_temperature number_of_observations.' (I'd tend to name these after observed variables and carry them over to calculated ones, but that should be left to the data writer.)
</p>
<p>
If we wanted to require that the NOBS variable name included the 'target' data variable name (e.g. sea_water_potential_temperature had to have a NOBS ancillary variable called 'sea_water_potential_temperature number_of_observations' or 'sea_water_temperature sea_water_potential_temperature number_of_observations' we wouldn't need to bother with the ancillary variable attribute at all. 
</p>
<p>
I'm in favor of exploiting the flexibility this attribute gives us.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-12-1363017456000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:12" class="cnum">
    <a href="#comment:12">comment:12</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-03-11T08%3A57%3A36-07%3A00&amp;precision=second" title="See timeline at 03/11/13 08:57:36">8 years ago</a> by rhorne@…
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Hi all !
</p>
<p>
Sorry for being negligent in bringing this trac item to closure.  Let me recap where I think we are on this.
</p>
<p>
The most recently published version of the CF conventions (1.6), includes an “ancillary data” construct.  This allows one data variable (a.k.a. the ancillary data variable) to provide metadata about the individual values of another data variable.  To conform to the convention required for ancillary data requires:
</p>
<p>
(1)        The use of an attribute with the name “ancillary_variables” for the data variable needing metadata to describe its elements.  The attribute value is the name of the one or more associated ancillary data variables separated by spaces.
</p>
<p>
(2)        Declaration of the ancillary data variable with the same dimension(s) and assignment of its standard_name attribute will often have the standard_name of the data variable needing metadata to describe its elements.  In the standard name attribute of the ancillary data variable, a modifier is included to indicate the relationship (see Appendix C, Standard Name Modifier).
</p>
<p>
This current convention allows a single data variable to have multiple ancillary data variables, but does not allow multiple data variables to share a single ancillary data variable.
</p>
<p>
The proposal is to allow the standard_name attribute in the ancillary data variable to contain one OR MORE standard_names, which are associated with the data variables needing metadata to describe their elements,.  (See the original proposal in the trac item.)
</p>
<p>
There was one counter-proposal presented that requires the standard name modifiers in Appendix C to have their own standard names and adding a new standard attribute to indicate the standard name of the referring variable, but this is problematic because these new standard_names do not fully identify themselves and the units could potentially vary, as is the case with the modifier standard_error.
</p>
<p>
There was another counter-proposal presented that requires a unique standard_name to be defined for the ancillary data variable where the unique name is a concatenation of the standard name of the data variable being referred to and an Appendix C standard_modifier.  The problems with this approach are (1) the linkage from the ancillary data variable to more than one data variable is not provided, and (2) new standard_names would need to be defined whenever a data variable (having a defined standard_name) requires a new ancillary data variable, standard_modifier combination.  This could cause a very large number of new standard_names to be defined.  Also note that this approach defeats one feature of the existing ancillary data convention – no need to establish standard_names for ancillary data variables having standard_modifiers.
</p>
<p>
very respectfully,
</p>
<p>
randy
</p>

    </div>

              </div>
              <div class="change" id="trac-change-13-1365597471000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:13" class="cnum">
    <a href="#comment:13">comment:13</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-04-10T05%3A37%3A51-07%3A00&amp;precision=second" title="See timeline at 04/10/13 05:37:51">8 years ago</a> by rhorne@…
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Folks:
</p>
<p>
Almost a month has elapsed since I summarized the status of this trac item.  In the summary, I advocated updating the CF conventions as identified in the original proposal above, which I will repeat here:
</p>
<p>
Change the text in the CF metadata conventions section 3.3 that reads 
</p>
<p>
"A standard name is associated with a variable via the attribute standard_name which takes a string value comprised of a standard name optionally followed by one or more blanks and a standard name modifier (a string value from Appendix C, Standard Name Modifiers)." 
</p>
<p>
to 
</p>
<p>
"A standard name is associated with a variable via the attribute standard_name which takes a string value that can have either of two forms. The first form is a standard name alone. The second form is a blank-separated list beginning with one or more standard names and ending with a single standard name modifier (i.e. standard_name [standard_name ...] standard_name_modifier). The standard name modifiers are defined in Appendix C, Standard Name Modifiers. This second form permits a single variable to provide ancillary data (see section 3.4) for two or more variables where each has a unique standard name." 
</p>
<p>
Note that...
</p>
<p>
Changes to CF software tools are required. For example, the CF_checker, which validates the standard_name attribute needs to change. However, it does not require any change to software that uses the complete attribute simply as an identifying string (e.g. to label plots, etc.) 
</p>
<p>
No one has taken issue with the summarization for this trac item in the last 3 week.
</p>
<p>
I support this enhancement.  Does the conventions committee support this enhancement ?
</p>

    </div>

              </div>
              <div class="change" id="trac-change-14-1365609235000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:14" class="cnum">
    <a href="#comment:14">comment:14</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-04-10T08%3A53%3A55-07%3A00&amp;precision=second" title="See timeline at 04/10/13 08:53:55">8 years ago</a> by russ
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <blockquote>
<p>
I support this enhancement, except that I wonder if the last phrase
in the last sentence could be misinterpreted to limit the use of
this enhancement unnecessarily.  Specifically, I would like to see
the last sentence
</p>
</blockquote>
<blockquote>
<blockquote>
<p>
This second form permits a single variable to provide ancillary
data (see section 3.4) for two or more variables where each has a
unique standard name.
</p>
</blockquote>
</blockquote>
<blockquote>
<p>
clarified and simplified to say
</p>
</blockquote>
<p>
   
</p>
<blockquote>
<blockquote>
<p>
This second form permits a single variable to provide ancillary
data (see section 3.4) for variables that have a standard_name
attribute.
</p>
</blockquote>
</blockquote>
<blockquote>
<p>
This would permit multiple variables that have the same
standard_name attribute to share the same ancillary variable, as
could happen, for example, for different sensors measuring the same
physical quantity at the same points for calibration or for sensors
with overlapping ranges of application.
</p>
</blockquote>
<blockquote>
<p>
--Russ
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-15-1365613894000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:15" class="cnum">
    <a href="#comment:15">comment:15</a>
  </span>
          <span>follow-up:</span>
    <a href="#comment:17" class="follow-up">↓ 17</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-04-10T10%3A11%3A34-07%3A00&amp;precision=second" title="See timeline at 04/10/13 10:11:34">8 years ago</a> by biard
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
I'm afraid that I am confused by the change Russ has suggested.  The second form is specifically intended for allowing the ancillary variable to explicitly express a "multiple parentage" relationship.  Is there any reason why it would be acceptable to have an ancillary variable name multiple standard names if it is only referenced by a single primary?
</p>

    </div>

              </div>
              <div class="change" id="trac-change-16-1365618884000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:16" class="cnum">
    <a href="#comment:16">comment:16</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-04-10T11%3A34%3A44-07%3A00&amp;precision=second" title="See timeline at 04/10/13 11:34:44">8 years ago</a> by rhorne@…
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
I think the confusion is a result of a mistake in the original revision to section 3.3 where I said:
</p>
<p>
"This second form permits a single variable to provide ancillary data (see section 3.4) for two or more variables where each has a unique standard name."
</p>
<p>
The statement should have been:
</p>
<p>
"This second form permits a single variable to provide ancillary data (see section 3.4) for one or more variables where each has a unique standard name."
</p>
<p>
The clarification/simplification Russ provides appears to be a good one.
</p>
<p>
The question posed by Jim:
</p>
<p>
Is there any reason why it would be acceptable to have an ancillary variable name multiple standard names if it is only referenced by a single primary? 
</p>
<p>
The answer is no.
</p>
<p>
Here is the revised wording change to the CF standard as a result of Russ' recommendation:
</p>
<p>
Change the text in the CF metadata conventions section 3.3 that reads 
</p>
<p>
"A standard name is associated with a variable via the attribute standard_name which takes a string value comprised of a standard name optionally followed by one or more blanks and a standard name modifier (a string value from Appendix C, Standard Name Modifiers)." 
</p>
<p>
to 
</p>
<p>
"A standard name is associated with a variable via the attribute standard_name which takes a string value that can have either of two forms. The first form is a standard name alone. The second form is a blank-separated list beginning with one or more standard names and ending with a single standard name modifier (i.e. standard_name [standard_name ...] standard_name_modifier). The standard name modifiers are defined in Appendix C, Standard Name Modifiers. This second form permits a single variable to provide ancillary data (see section 3.4) for variables that have a standard_name attribute.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-17-1365622979000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:17" class="cnum">
    <a href="#comment:17">comment:17</a>
  </span>
        in reply to:
    <a href="#comment:15">↑ 15</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-04-10T12%3A42%3A59-07%3A00&amp;precision=second" title="See timeline at 04/10/13 12:42:59">8 years ago</a> by russ
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Jim,
</p>
<blockquote>
<p>
My primary concern was a potential for misunderstanding the meaning
of "unique" in the phrase "for one or more variables where each has
a unique standard name".  The standard_name attribute of any
variable that has such an attribute is already unique, in the sense
that a variable cannot have two attributes with the same name.
</p>
</blockquote>
<blockquote>
<p>
The only other interpretation of "unique standard name" I can think
of would rule out multiple variables with the same standard_name
attribute sharing the same ancillary variable.  I don't see a good
reason to rule out that case, and I provided an example where it
might be useful.
</p>
</blockquote>
<blockquote>
<p>
The other minor change I suggested was omitting "two or more",
because in fact the second form of the standard_name string value is
also required to provide a standard name modifier for a single
variable.
</p>
</blockquote>
<p>
--Russ
</p>

    </div>

              </div>
              <div class="change" id="trac-change-18-1365626823000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:18" class="cnum">
    <a href="#comment:18">comment:18</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-04-10T13%3A47%3A03-07%3A00&amp;precision=second" title="See timeline at 04/10/13 13:47:03">8 years ago</a> by biard
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Russ,
</p>
<p>
I'm concerned that your proposed wording (and, to a lesser extent, Randy's wording) doesn't make it clear enough that this "two or more standard name" option is only to be used with a particular category of ancillary variables.  A primary variable should never have more than one, should it?
</p>
<p>
I'm also concerned that the proposed wording can lead a reader into thinking that an ancillary variable must share a standard name with any primary variable that it has been associated with, which is not true.
</p>
<p>
I'll try to come up with my own version for your consideration.
</p>
<p>
Jim 
</p>

    </div>

              </div>
              <div class="change" id="trac-change-19-1365712891000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:19" class="cnum">
    <a href="#comment:19">comment:19</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-04-11T13%3A41%3A31-07%3A00&amp;precision=second" title="See timeline at 04/11/13 13:41:31">8 years ago</a> by jonathan
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Dear Randy
</p>
<p>
Because of the recent concerns expressed in other discussions about standard name modifiers, I am curious to know which ones you actually use in practice. Is it the <tt>number_of_observations</tt> and the <tt>status_flag</tt>?
</p>
<p>
Best wishes
</p>
<p>
Jonathan
</p>

    </div>

              </div>
              <div class="change" id="trac-change-20-1365714698000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:20" class="cnum">
    <a href="#comment:20">comment:20</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-04-11T14%3A11%3A38-07%3A00&amp;precision=second" title="See timeline at 04/11/13 14:11:38">8 years ago</a> by rhorne@…
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Hi Jonathan:
</p>
<p>
We are using "status_flag".
</p>
<p>
Our algorithms that generate the gridded/imagery data sets also generate a quality value for each data point/pixel.  There are cases where an algorithm outputs multiple gridded/imagery data sets and the same quality value applies to all the data sets.
</p>
<p>
very respectfully,
</p>
<p>
randy
</p>

    </div>

              </div>
              <div class="change" id="trac-change-21-1366835685000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:21" class="cnum">
    <a href="#comment:21">comment:21</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-04-24T13%3A34%3A45-07%3A00&amp;precision=second" title="See timeline at 04/24/13 13:34:45">8 years ago</a> by biard
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Randy,
</p>
<p>
Sorry it's taken so long to post on this again.  I suggest that instead of modifying the second paragraph of section 3.3, we introduce a paragraph before the last sentence of the section that reads:
</p>
<p>
In the special case where more than one data variable references an ancillary data variable (see Section 3.4, "Ancillary Data") that contains a derived quantity (such as number of observations) that applies to all of the referencing data variables, and where the referencing data variables do not all share the same standard name, the standard_name attribute for the ancillary data variable is comprised of a blank-separated list of the unique set of standard names from the referencing data variables followed by the common standard name modifier.
</p>
<p>
Another way to resolve this question is to take an approach that is closer to Nan's suggestion.  We could specify a special "placeholder" standard name - say, "?reference?", that would stand in for a specific standard name in the ancillary data variables standard_name attribute.  The standard name table would have an entry for this new standard name that would explain that it is to be replaced by the standard name of a referencing data variable.  This would allow us to keep the syntax of the standard_name attribute simple, avoid the headless standard name modifier problem, make it obvious that the contents of the ancillary data variable are applicable to one or more referencing data variables, and (eventually) lead to less confusion on the part of users than I think the multiple standard names approach may produce.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-22-1367503930000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:22" class="cnum">
    <a href="#comment:22">comment:22</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-05-02T07%3A12%3A10-07%3A00&amp;precision=second" title="See timeline at 05/02/13 07:12:10">8 years ago</a> by rhorne@…
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Jim:
</p>
<p>
Thanks for the inputs.
</p>
<p>
Let me first address the counter-proposal.  There is no precedence (yet) for reserved keywords in the list of standard_names.  Given the fact that there is a less disruptive option that leverages the thinking behind the existing convention, I suspect the message board and committee would find this option less appealing.
</p>
<p>
As far as your rewording of the existing proposal, I can see that your intent is to make the language more precise to avoid confusion.  The fact that you got confused means that there is some likelihood that others will as well.  I think your language could be further improved to make it clear that the current proposal does not apply to all of the standard name modifiers in Appendix C.  In addition, I think that placing this rewording near the end of paragraph 3.3 increases the likelihood that it will be missed.  As a result, here is the revised proposal:
</p>
<p>
Right after this existing statement of:
</p>
<p>
"A standard name is associated with a variable via the attribute standard_name which takes a string value comprised of a standard name optionally followed by one or more blanks and a standard name modifier (a string value from Appendix C, Standard Name Modifiers)."
</p>
<p>
Include the following statement in the same paragraph:
</p>
<p>
"In the case where more than one data variable, each with a standard name, references an ancillary data variable (see Section 3.4, “Ancillary Data”) for the same reason (e.g. status_flag), the standard_name attribute for the ancillary data variable is composed of a blank-separated list of each unique standard name followed by one or more blanks and a standard name modifier."
</p>
<p>
The ambiguity that remains in the statement (i.e. the case where multiple data variables referencing the ancillary data variable have the same standard_name) is moot.  As a result, there is no need to further increase the complexity of the statement to resolve it.
</p>
<p>
Does this pass muster with the convetions committee ?
</p>
<p>
very respectfully,
</p>
<p>
randy
</p>
<p>
  
</p>

    </div>

              </div>
              <div class="change" id="trac-change-23-1367505801000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:23" class="cnum">
    <a href="#comment:23">comment:23</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-05-02T07%3A43%3A21-07%3A00&amp;precision=second" title="See timeline at 05/02/13 07:43:21">8 years ago</a> by mgschultz
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Dear all,
</p>
<p>
I am all for this proposal. Only, I would like to raise one more technical point, i.e. we should define the proper way for parsing a standard_name with this extension. If I am not mistaken, then the current proposal mandates to read a standard_name attribute from right to left, checking first if the rightmost part is actually a standard_name modifier. If so, then one or more standard_names (separated by blanks) are allowed to the left. If the rightmost string is no standard_name modifier, it is supposed to be a standard_name and must be one string (i.e. no blanks).
</p>
<p>
For a moment, I was wondering whether it would make sense to think a little broader and introduce the concept of a "standard_name pointer", meaning that - through a modifier - the variable content is no longer referring to a quantity that is described by the standard_name itself, but the standard_names that are listed, are merely references to variables with that content. It may then be useful to indicate this explicitly in the syntax, for example, by prepending a "*" as in the C language, or a more xml-style identifier such as "X:". The example given at the top of this thread would then become:
</p>
<pre class="wiki">int nobs(lat,lon);

    . . nobs:standard_name="X:sea_water_potential_temperature sea_water_salinity number_of_observations"; . .
</pre><p>
... and then it would probably be easier to understand if the modifier would come first, followed by the list of variables to which it refers, i.e.:
</p>
<pre class="wiki">int nobs(lat,lon);

    . . nobs:standard_name="X:number_of_observations sea_water_potential_temperature sea_water_salinity"; . .
</pre><p>
I realize, this is a more radical change. If there are sympathies for this, then we should perhaps schedule it for CF 2.0?
</p>
<p>
Best,
</p>
<p>
Martin
</p>

    </div>

              </div>
              <div class="change" id="trac-change-24-1368017352000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:24" class="cnum">
    <a href="#comment:24">comment:24</a>
  </span>
          <span>follow-up:</span>
    <a href="#comment:25" class="follow-up">↓ 25</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-05-08T05%3A49%3A12-07%3A00&amp;precision=second" title="See timeline at 05/08/13 05:49:12">8 years ago</a> by rhorne@…
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Martin:
</p>
<p>
I can not speak for all, but from posting and reading board and trac messages for a while, there is a resistance to the use of software-language-like conventions. Personally, I believe this overarching thinking has served the standard and the community that uses the standard well.
</p>
<p>
For this particular enhancement, while the complexity of the software parsing the standard_name attribute is increased, the new syntax is a natural extension of the exising convention and likely to minimize confusion.
</p>
<p>
For these reasons, I think the approach and latest verbage change to the CF standard proposed is a conservative and reasonable path forward.
</p>
<p>
I will include the change to the CF standard in this post for completeness:
</p>
<p>
In paragraph 3.3 Standard Names, right after this existing statement of: 
</p>
<p>
"A standard name is associated with a variable via the attribute standard_name which takes a string value comprised of a standard name optionally followed by one or more blanks and a standard name modifier (a string value from Appendix C, Standard Name Modifiers)." 
</p>
<p>
Include the following statement in the same paragraph: 
</p>
<p>
"In the case where more than one data variable, each with a standard name, references an ancillary data variable (see Section 3.4, “Ancillary Data”) for the same reason (e.g. status_flag), the standard_name attribute for the ancillary data variable is composed of a blank-separated list of each unique standard name followed by one or more blanks and a standard name modifier." 
</p>
<p>
very respectfully,
</p>
<p>
randy
</p>

    </div>

              </div>
              <div class="change" id="trac-change-25-1368028873000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:25" class="cnum">
    <a href="#comment:25">comment:25</a>
  </span>
        in reply to:
    <a href="#comment:24">↑ 24</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-05-08T09%3A01%3A13-07%3A00&amp;precision=second" title="See timeline at 05/08/13 09:01:13">8 years ago</a> by ngalbraith
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Replying to <a class="ticket" href="./74#comment:24" title="Comment 24">rhorne@excaliburlabs.com</a>:
 
 
</p>
<blockquote class="citation">
<p>
"In the case where more than one data variable, each with a standard name, references an ancillary data variable (see Section 3.4, “Ancillary Data”) for the same reason (e.g. status_flag), the standard_name attribute for the ancillary data variable is composed of a blank-separated list of each unique standard name followed by one or more blanks and a standard name modifier." 
</p>
</blockquote>
<p>
I really seem to be out of step, but honestly I still don't see what we're gaining here. More important, I think we're making assumptions about the role of a standard name in an ancillary variable that may lead to problems sharing data.
</p>
<p>
IMHO, in a file with multiple variables that share one or more ancillary variables, there is no need - and no really reliable method - for the ancillary variables to list <strong>all</strong> their parents. This is a one-way connection; a primary variable points to its ancillary variables, using short names.
</p>
<p>
Is there a use case for ancillary variables to identify their primary variables?  If we actually need a 2-way system, is there a sense that this method - listing all the primaries' standard names - will work?  
</p>
<p>
What happens when there are multiple 'primary' variables with the same standard name in a file? 
</p>
<p>
What's wrong with this:
</p>
<pre class="wiki"> float swt(time,depth,lat,lon);
    swt:standard_name="sea_water_temperature";
    swt:ancillary_variables="swt_nobs";
 float swpt(time,depth,lat,lon);
    swpt:standard_name="sea_water_potential_temperature";
    swpt:ancillary_variables="swt_nobs";
 int swt_nobs(time,depth);
    swt_nobs:standard_name="sea_water_temperature number_of_observations";
</pre><p>
 
</p>

    </div>

              </div>
              <div class="change" id="trac-change-26-1369037230000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:26" class="cnum">
    <a href="#comment:26">comment:26</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-05-20T01%3A07%3A10-07%3A00&amp;precision=second" title="See timeline at 05/20/13 01:07:10">8 years ago</a> by jonathan
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Dear Randy, Nan et al.
</p>
<p>
I think the difference between Randy's proposal and Nan's comment highlights a different perception about the purpose of <tt>standard_name</tt>s and modifiers. I believe the purpose of the standard name is to make the data variables self-describing, and the modifiers were introduced as an extension to support this purpose without expanding the standard name table too much. If that's the purpose, Randy's proposal is logical because the data variable for status flag or number of observations variable needs to describe <em>itself</em> as applying to various different quantities. This would be particularly helpful if the status flag data variable was stored in a different file from the primary data variables, for example, in which case it would lose the association if it could not describe itself. Thus, I don't think the modifiers are principally intended as pointers.
</p>
<p>
On the other hand, the <tt>ancillary_variables</tt> attribute was deliberately introduced as a pointer. It makes life easier by pointing from the primary data variable to its metadata variables. It could be omitted, because the association can be inferred from the standard names. In Nan's example, if you scan the file and find a variable with <tt>standard_name</tt> of <tt>sea_water_temperature number_of_observations</tt>, you know that it is a metadata variable which belongs to a primary data variable with a <tt>standard_name</tt> of <tt>sea_water_temperature</tt>; the <tt>ancillary_variables</tt> attribute of the primary data variable is a convenience feature which saves your having to scan the file.
</p>
<p>
I would suggest that the above is an answer to Nan's comment, and supports Randy's proposal. However, there have been other threads discussing standard name modifiers, which together give the impression that they are confusing and/or were ill-conceived. A particular restriction about the interpretation I have given and Randy's proposal is that it can only apply when the metadata variables for the various primary data variables have the same units. That is OK for <tt>status_flag</tt> and <tt>number_of_observations</tt>, which are dimensionless. Metadata variables with these modifiers could apply, for example, to both <tt>sea_water_temperature</tt> and <tt>sea_water_salinity</tt>. A metadata variable with the <tt>standard_error</tt> modifier could not, because it would have a different unit for the two primary data variables.
</p>
<p>
Therefore I am wondering about a simpler solution than Randy's or Martin's. Maybe we should introduce <tt>status_flag</tt> and <tt>number_of_observations</tt> as standard names in their own right. The drawback with this would of course be that the metadata variables with these standard names would not be so completely self-described. You would not be able to tell which primary data variable they belonged to if they were in different files. Within the same file, you'd have to rely on the ancillary_variables pointer if there was any ambiguity. But maybe this would not be too bad. There are plenty of other relationships between data variables in files that are application-specific and not indicated by any CF metadata e.g. it's a reasonable assumption that <tt>sea_water_temperature</tt>, <tt>sea_water_salinity</tt> and <tt>sea_water_density</tt> are all physically consistent.
</p>
<p>
What do you think? This would not be a solution to the other existing modifiers of <tt>standard_error</tt> and <tt>detection_minimum</tt>, which are not dimensionless, but other discussions have suggested that those could be replaced with <tt>cell_methods</tt>. That would be a topic for a different ticket.
</p>
<p>
Best wishes
</p>
<p>
Jonathan
</p>

    </div>

              </div>
              <div class="change" id="trac-change-27-1369070900000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:27" class="cnum">
    <a href="#comment:27">comment:27</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-05-20T10%3A28%3A20-07%3A00&amp;precision=second" title="See timeline at 05/20/13 10:28:20">8 years ago</a> by biard
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Jonathan,
</p>
<p>
Your last comment has helped me understand (and agree with) Nan's objection.
</p>
<p>
As near as I can tell, a standard name is a sort of type or class.  It describes the contents of a variable by telling you what class of measurement it belongs to, but I think its reliable use must end there.
</p>
<p>
If two variables share a standard name (or share a root standard name), it tells you about comparability, but it doesn't reliably tell you anything about linkage.  The only situation in which it might be safe to infer linkage from standard names is when there is only one primary variable in a file with a given standard name, and in which all of the ancillary variables for that primary variable have standard names that are modifications of the primary.  There are a number of conditions that invalidate this approach.  For example:
</p>
<blockquote>
<p>
1) More than one primary variable with the same standard name.  (Which each need their own ancillary variables.)
2) A primary variable that has a standard name that is a modification of the standard name associated with another primary variable.
3) An ancillary variable has the same standard name as its primary.
3) An ancillary variable has a standard name that is completely different from its primary.
</p>
</blockquote>
<p>
It seems pretty clear to me that the ancillary_variables attribute is not a convenience feature.  It is the only general way available in CF to unambiguously declare the linkages.
</p>
<p>
Given all that, I don't have any problem with promoting status_flag and number_of_observations to the level of standard names.
</p>
<p>
Grace and peace,
</p>
<p>
Jim
</p>

    </div>

              </div>
              <div class="change" id="trac-change-28-1369072794000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:28" class="cnum">
    <a href="#comment:28">comment:28</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-05-20T10%3A59%3A54-07%3A00&amp;precision=second" title="See timeline at 05/20/13 10:59:54">8 years ago</a> by graybeal
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Jim wrote: 
</p>
<p>
"As near as I can tell, a standard name is a sort of type or class. It describes the contents of a variable by telling you what class of measurement it belongs to, but I think its reliable use must end there.  If two variables share a standard name (or share a root standard name), it tells you about comparability, but it doesn't reliably tell you anything about linkage. ...  Given all that, I don't have any problem with promoting status_flag and number_of_observations to the level of standard names."
</p>
<p>
I agree with everything written above (and in the original post), except the last sentence. The motivation is not that the rest of the standard name provides traceability, it is to provide better descriptive information about the parameter (and perhaps its comparability) -- as was mentioned much earlier in this thread. (Is there ever a status flag that isn't a status flag about some measurement? Is there ever a number_of_observations that isn't a number of observations of something?)  
</p>
<p>
If the proposal is to allow appending _status_flag to a standard name, that would be OK, but not status_flag by itself (unless we require the relevant auxiliary information to be provided some other way).
</p>

    </div>

              </div>
              <div class="change" id="trac-change-29-1369172673000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:29" class="cnum">
    <a href="#comment:29">comment:29</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-05-21T14%3A44%3A33-07%3A00&amp;precision=second" title="See timeline at 05/21/13 14:44:33">8 years ago</a> by jonathan
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Dear John
</p>
<p>
The modifiers are effectively a suffix, like appending <tt>status_flag</tt> to a standard name, without having to define a new standard name. I am suggesting, indeed (as Jim says), that <tt>status_flag</tt> should be defined as a standard name in its own right. Of course, it must really be the status flag of <em>something</em>, but this would not be stated. The cost is therefore loss of descriptive information, as you say. The benefit is that it would resolve this rather awkward problem of primary data variables sharing metadata variables. Is the cost worth the benefit?
</p>
<p>
Cheers
</p>
<p>
Jonathan
</p>

    </div>

              </div>
              <div class="change" id="trac-change-30-1369175526000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:30" class="cnum">
    <a href="#comment:30">comment:30</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-05-21T15%3A32%3A06-07%3A00&amp;precision=second" title="See timeline at 05/21/13 15:32:06">8 years ago</a> by graybeal
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Definitions for the proposed new standard names might clear up confusion at this point.
</p>
<p>
Sorry, I didn't read far enough back in the thread with enough care. The rewording that left us with "In the case where more than one data variable, each with a standard name, references an ancillary data variable (see Section 3.4, “Ancillary Data”) for the same reason (e.g. status_flag)," created an uncertainty for me, namely: Are they really sharing metadata variables in the sense of the _same_ value applying to multiple primary variables?  (As opposed to, say, allocating bits or something....)
</p>
<p>
I see the answer is yes, and yet I still couldn't fathom the use case at first. So is the proposal now to eliminate the proposed text about ancillary variables, instead allowing these generic standard names as the complete answer? Or still to include the proposed text for ancillary variables?  (In which case, can I propose instead the following wording  :"In the case where the values of an ancillary data variable (see Section 3.4, "Ancillary Data") apply to multiple data variables simultaneously, the standard_name attribute..." ?)
</p>
<p>
I withdraw my absolute reservation about promoting these to standard names, but assume it will be required to specify the variables to which the-variable-with-one-of-these-standard-names-applies. (Geez, I know that's unparseable, but can't fix it...) Otherwise you have a free-floating standard name with no effective means to understand what it really means.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-31-1370611571000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:31" class="cnum">
    <a href="#comment:31">comment:31</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-06-07T06%3A26%3A11-07%3A00&amp;precision=second" title="See timeline at 06/07/13 06:26:11">8 years ago</a> by rhorne@…
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Folks:
</p>
<p>
If we go with this standard_name = "status_flag" approach, will the same approach be used for the other standard_name modifiers ?
</p>
<p>
An advantage of doing this for status_flag and the other standard name modifiers that has not yet been identified is that the data variable requiring the quality/status variable does not need a standard name.
</p>
<p>
very rezpectfully,
</p>
<p>
randy
</p>

    </div>

              </div>
              <div class="change" id="trac-change-32-1370884061000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:32" class="cnum">
    <a href="#comment:32">comment:32</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-06-10T10%3A07%3A41-07%3A00&amp;precision=second" title="See timeline at 06/10/13 10:07:41">8 years ago</a> by jonathan
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Dear Randy
</p>
<p>
I would suggest doing this only for <tt>status_flag</tt> and <tt>number_of_observations</tt>, which are dimensionless. The others could potentially be described by <tt>cell_methods</tt>, but that would be the subject for another ticket.
</p>
<p>
It would not be an improvement in metadata to omit the <tt>standard_name</tt> for the data variable. The <tt>standard_name</tt> is always an optional attribute, but it should be included whenever possible, I would say. However, I see your point.
</p>
<p>
Best wishes
</p>
<p>
Jonathan
</p>

    </div>

              </div>
              <div class="change" id="trac-change-33-1375630564000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:33" class="cnum">
    <a href="#comment:33">comment:33</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-08-04T08%3A36%3A04-07%3A00&amp;precision=second" title="See timeline at 08/04/13 08:36:04">8 years ago</a> by rhorne@…
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Folks:
</p>
<p>
I think this is where we are:
</p>
<p>
(1)
staus_flag and number_of_observations become a special type of standard_name, and become the standard name of the applicable ancillary variable.
</p>
<p>
(2)
these special standard_names are associated with ancillary variables that provide status or number of observations for two or more other data variables in the same data set.
</p>
<p>
(3)
these other data variables must include the "ancillary_variables" attribute set to the variable name of the relevant ancillary variable.
</p>
<p>
Has converge of an approach to allow sharing of a status_flag or number_of_observation ancillary variable been reached ?
</p>
<p>
One other question that comes to mind ...
</p>
<p>
Is this syntax used only when an ancillary variable is associated with more than one data variable ?
</p>
<p>
very respectfully,
</p>
<p>
randy
</p>

    </div>

              </div>
              <div class="change" id="trac-change-34-1375801875000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:34" class="cnum">
    <a href="#comment:34">comment:34</a>
  </span>
          <span>follow-up:</span>
    <a href="#comment:35" class="follow-up">↓ 35</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-08-06T08%3A11%3A15-07%3A00&amp;precision=second" title="See timeline at 08/06/13 08:11:15">8 years ago</a> by ngalbraith
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
<em> Is this syntax used only when an ancillary variable is associated with more than one data variable </em>
</p>
<p>
That would be difficult or impossible to enforce, since so many data files can be split up on the fly via thredds and other services.
</p>
<p>
Also, we might want to consider allowing all 4 of the existing modifiers to have standard names (or category names, as was suggested earlier), as long as they are applied to primary data variables that share units. There could easily be a single detection_minimum, and maybe also a single standard_error, for e.g. wind or current vectors.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-35-1375804670000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:35" class="cnum">
    <a href="#comment:35">comment:35</a>
  </span>
        in reply to:
    <a href="#comment:34">↑ 34</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-08-06T08%3A57%3A50-07%3A00&amp;precision=second" title="See timeline at 08/06/13 08:57:50">8 years ago</a> by jonathan
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Dear Nan
</p>
<p>
Replying to <a class="ticket" href="./74#comment:34" title="Comment 34">ngalbraith</a>:
</p>
<blockquote class="citation">
<p>
Also, we might want to consider allowing all 4 of the existing modifiers to have standard names (or category names, as was suggested earlier), as long as they are applied to primary data variables that share units. There could easily be a single detection_minimum, and maybe also a single standard_error, for e.g. wind or current vectors.
</p>
</blockquote>
<p>
I don't think we can do that, because a given standard name must have unique canonical units. We couldn't define the canonical unit for detection_minimum or standard_error, since they depend on the geophysical quantity, as you imply.
</p>
<p>
Best wishes
</p>
<p>
Jonathan
</p>

    </div>

              </div>
              <div class="change" id="trac-change-36-1378661632000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:36" class="cnum">
    <a href="#comment:36">comment:36</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-09-08T10%3A33%3A52-07%3A00&amp;precision=second" title="See timeline at 09/08/13 10:33:52">8 years ago</a> by rhorne@…
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Folks:
</p>
<p>
The most recent approach to providing a CF compliant construct for allowing data variables to share ancillary variables discussed in this ticket elevates number_of_observations and status_flag to standard_names.  One of these standard_names are assigned to the applicable ancillary variable, and the multiple data variables that have the designated relationship with the ancillary variable indicate so with an ancillary_variables attribute assigned to the variable name of the shared ancillary variable.
</p>
<p>
The most recent question surrounding the most recent approach to providing a CF compliant construct for allowing data variables to share ancillary variables revolve around whether all four current standard_name modifiers current defined in appendix C (detection_minimum, number_of_observations, standard_error, &amp; status_flag) can make use of this extension.
</p>
<p>
Only the standard_name modifiers with dimensionless units (number_of_observations, states_flag) make sense because the other two standard_name modifiers, detection_minimum and standard_error, need to have the same units as the data variable.  For multiple data variables needing to share the same ancillary variable, it would be overly restrictive to require they have the same units.
</p>
<p>
Has consensus been reached. ?
</p>
<p>
very respectfully,
</p>
<p>
randy
</p>

    </div>

              </div>
              <div class="change" id="trac-change-37-1378663594000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:37" class="cnum">
    <a href="#comment:37">comment:37</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-09-08T11%3A06%3A34-07%3A00&amp;precision=second" title="See timeline at 09/08/13 11:06:34">8 years ago</a> by ngalbraith
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
I don't think it's so much about being too restrictive; if wind east and north share a detection_minimum there would be no problem using the same units for all 3 variables (east, north, and detection) and this could be left to the data writer to ensure sensible groupings. 
</p>
<p>
The problem comes with the standard name table, where there's no way to assign canonical units to a variable named detection_minimum, which would need to take its units from the data variable to which it was attached.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-38-1378672181000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:38" class="cnum">
    <a href="#comment:38">comment:38</a>
  </span>
          <span>follow-up:</span>
    <a href="#comment:39" class="follow-up">↓ 39</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-09-08T13%3A29%3A41-07%3A00&amp;precision=second" title="See timeline at 09/08/13 13:29:41">8 years ago</a> by graybeal
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
The problem brings its own solution. it should be fine to let multiple variables share the same ancillary variable, if it makes sense in all respects. For it to make sense when the standard_name needs to have the units of the data variable, all the variables need to have the same units.  
</p>
<p>
Looks to me like it makes sense for detection minimum to allow this, in some environments it would be a common use case.  But I can't figure out a sensible use case for one standard_error variable for multiple variables!
</p>

    </div>

              </div>
              <div class="change" id="trac-change-39-1378733275000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:39" class="cnum">
    <a href="#comment:39">comment:39</a>
  </span>
        in reply to:
    <a href="#comment:38">↑ 38</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-09-09T06%3A27%3A55-07%3A00&amp;precision=second" title="See timeline at 09/09/13 06:27:55">8 years ago</a> by ngalbraith
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Replying to <a class="ticket" href="./74#comment:38" title="Comment 38">graybeal</a>:
</p>
<blockquote class="citation">
<p>
The problem brings its own solution. it should be fine to let multiple variables share the same ancillary variable, if it makes sense in all respects. For it to make sense when the standard_name needs to have the units of the data variable, all the variables need to have the same units.  
</p>
</blockquote>
<p>
 
Hmm, I don't think there's been any question of multiple variables sharing a single ancillary variable; that's already permitted in the standard. We're now at the stage of deciding whether the current standard name modifiers should be <em>elevated</em> to free-standing standard names, so that these variables no longer carry the target variable(s) as part of the standard_name attribute. 
</p>
<p>
The problem now is that standard names have specific units assigned to them, and this does not work for variables like standard_error or detection_minimum, which take their units from their 'data variables'.  We would need to change the structure of the standard name table to accommodate this type of name - I'm not sure we have the motivation to do that.
 
</p>
<blockquote class="citation">
<p>
Looks to me like it makes sense for detection minimum to allow this, in some environments it would be a common use case.  But I can't figure out a sensible use case for one standard_error variable for multiple variables!
</p>
</blockquote>
<p>
Agreed, more or less; however standard_error could still be a stand-alone standard name, so that the concept of the standard name modifier could be retired. The idea here is that the data variable points to the correct standard_error, using the ancillary_variables attribute, and the error variable does not include the standard name of the data variable in its standard_name attribute.
</p>
<pre class="wiki">float swt(time,depth,lat,lon);
    swt:standard_name="sea_water_temperature";
    swt:ancillary_variables="swt_std_err";
float swt_std_err(time,depth,lat,lon);
    swt_std_err:standard_name="standard_error";
    swt_std_err:long_name="standard error of sea water temperature"
</pre><p>
This makes the standard error variable a little less independent - you would not know what it is without looking at other variables in the file. To me, this is not an issue, but it might be important to other people. 
</p>
<p>
On the other hand, the current method, where swt_std_err has the standard name 'sea_water_temperature standard_error', <em>does not work</em> when there are multiple variables with a standard name sea_water_temperature in a file. 
</p>

    </div>

              </div>
              <div class="change" id="trac-change-40-1378736766000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:40" class="cnum">
    <a href="#comment:40">comment:40</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-09-09T07%3A26%3A06-07%3A00&amp;precision=second" title="See timeline at 09/09/13 07:26:06">8 years ago</a> by jonathan
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Dear all
</p>
<p>
I tend to think, partly as a result of discussion in another ticket, that we should adopt a different solution for <tt>number_of_observations</tt> and <tt>status_flag</tt> on the one hand, and <tt>standard_error</tt> and <tt>detection_minimum</tt> on the other. Thus we could get rid of standard name modifiers, as Nan says; they are awkward and have caused confusion.
</p>
<p>
As Randy says, the former two modifiers could become standard names for dimensionless quantities. As Nan says, this can't be done for the latter two, because they have units. Instead, I think we should put the information into <tt>cell_methods</tt>. It is possible to regard standard error and detection minimum as particular statistics in an ensemble of possible measurements of the same quantity, I would argue. If so, <tt>cell_methods</tt> is a natural place to put them, under an entry which applies to a notional dimension that runs over the members of this population. You could describe a standard error with a <tt>cell_methods</tt> entry of <tt>measurement: standard_deviation</tt>, for instance, if we add <tt>measurement</tt> to the standard name table, meaning the ordinal number of a measurement of a given quantity. There does not have to a measurement dimension; using a standard name in <tt>cell_methods</tt> implies that the statistic applies to the complete range of the quantity named i.e. all possible measurements in this case. Does this make sense to you?
</p>
<p>
A nice consequence is that this would simplify the convention, because only the standard name and cell methods would determine the canonical units of the quantity. At the moment, the standard name modifier has to be considered as well.
</p>
<p>
Cheers
</p>
<p>
Jonathan
</p>

    </div>

              </div>
              <div class="change" id="trac-change-41-1378809825000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:41" class="cnum">
    <a href="#comment:41">comment:41</a>
  </span>
          <span>follow-up:</span>
    <a href="#comment:44" class="follow-up">↓ 44</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-09-10T03%3A43%3A45-07%3A00&amp;precision=second" title="See timeline at 09/10/13 03:43:45">8 years ago</a> by jonathan
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Dear Randy
</p>
<p>
On the email list you asked for an example to explain what I mean. I can't think of an example as such. Would you agree that the standard error of a measured quantity means, in principle, the standard deviation of the values you would get by repeatedly measuring the quantity under the same conditions (as far as you can control the conditions)? I believe that's the idea people have wanted to convey by this modifier. The values are not all exactly the same because of uncontrollable variations in the conditions and the behaviour of the instruments and methods being used to make the measurement. If you did in fact make many measurements and wanted to record them in a CF-netCDF file, it would be natural to have a dimension with an index number  (1, 2, 3, ...) running over the values you got. A possible standard name for the coordinate variable containing this index could be <tt>measurement</tt> e.g.
</p>
<pre class="wiki">dimensions:
  measurement=10;
variables:
  float temp(measurement);
    temp:standard_name="sea_water_temperature";
    temp:units="K";
  int measurement(measurement);
</pre><p>
If you calculate the mean or the standard deviation of the measurements, you would use <tt>cell_methods</tt> to record this operation:
</p>
<pre class="wiki">dimensions:
  measurement=1;
variables:
  float temp(measurement);
    temp:standard_name="sea_water_temperature";
    temp:units="K";
    temp:cell_methods="measurement: standard_deviation";
</pre><p>
It is allowed to omit the dimension and include instead the standard name of the dimension in <tt>cell_methods</tt>. See Section 7.3.4. So we can have "measurement: standard_deviation" in <tt>cell_methods</tt> even if there is no <tt>measurement</tt> dimension. I think we could take that to imply the standard deviation of all possible values this measurement could take, which is what is meant (I think) by the standard error of the measurement. This might be stretching 7.3.4 a bit, and if so, an extra sentence could be inserted to explain this usage of the convention.
</p>
<p>
Is that any clearer?
</p>
<p>
Cheers
</p>
<p>
Jonathan
</p>

    </div>

              </div>
              <div class="change" id="trac-change-42-1378819143000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:42" class="cnum">
    <a href="#comment:42">comment:42</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-09-10T06%3A19%3A03-07%3A00&amp;precision=second" title="See timeline at 09/10/13 06:19:03">8 years ago</a> by rhorne@…
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Dear Jonathan:
</p>
<p>
I think I understand where you are going.  So, when you say "It is allowed to omit the dimension and include instead the standard name of the dimension in cell_methods.",  would the syntax for the variable containing the standard deviation of temperature look like the following (I took the liberty of changing the name of the standard deviation variable and I am assuming the standard_name in your example for "measurement" is "depth")?
</p>
<p>
variables:
</p>
<blockquote>
<p>
float std_dev_temp;
</p>
<blockquote>
<p>
temp:standard_name=&#34;sea_water_temperature";
</p>
</blockquote>
</blockquote>
<blockquote>
<blockquote>
<p>
temp:units=&#34;K";
</p>
</blockquote>
</blockquote>
<blockquote>
<blockquote>
<p>
temp:cell_methods=&#34;depth: standard_deviation";
</p>
</blockquote>
</blockquote>
<p>
Also, is it correct to assume there is an ancillary_variables attribute set to "std_dev_temp" in the temp variable ?
</p>
<p>
very respectfully,
</p>
<p>
randy
</p>

    </div>

              </div>
              <div class="change" id="trac-change-43-1378823962000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:43" class="cnum">
    <a href="#comment:43">comment:43</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-09-10T07%3A39%3A22-07%3A00&amp;precision=second" title="See timeline at 09/10/13 07:39:22">8 years ago</a> by biard
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
So, now we are back to where we were before.  Part of this proposal of Jonathan's still gives me heartburn.  Expressed this way, the only way to know (apart from having it stated in the variable name, which is unreliable) that the variable contains a standard deviation of temperature and not temperature is to reference the cell_methods attribute.
</p>
<p>
The word "measurement" itself would become a standard name.  It would not be a proxy or placeholder.  It would have a status equivalent to longitude or time, and represent an ordinal counting of samples.  Another similar example is the use of the word "area" in cell methods.  Even though area may not ever be expressed directly in any variable, you can validly state in the cell_methods attribute that the variable values represent an average over the area of the cell.
</p>
<p>
Thus (if I understand correctly), "measurement: standard deviation" is stating that the operation "calculate the standard deviation" was performed on all the individual measurements that fell in this cell.  I think it might be more restrictively understood as stating that the only dimension over which the operation was performed was the measurement dimension, and all other dimensions (lat and lon, for example) were held constant.
</p>
<p>
Jonathan, I'm not sure how or why you shifted from the dimension "measurement" having a size greater than one to having a size equal to one in your example.  That bit just confused me.
</p>
<p>
If I am close to on target, the suggested ensemble of variables would be something like this.
</p>
<p>
dimensions:
</p>
<blockquote>
<p>
time=N;
</p>
</blockquote>
<p>
variables:
</p>
<blockquote>
<p>
int time(time);
</p>
<blockquote>
<p>
...
</p>
</blockquote>
</blockquote>
<blockquote>
<p>
float a(time);
</p>
<blockquote>
<p>
a:long_name=&#34;This is the average temperature measurement";
a:standard_name=&#34;sea_water_temperature";
a:units=&#34;K";
a:cell_methods=&#34;measurement: mean";
a:ancillary_variables=&#34;b";
</p>
</blockquote>
</blockquote>
<blockquote>
<p>
float b(time);
</p>
<blockquote>
<p>
b:long_name=&#34;This is the standard deviation of the average temperature measurement";
b:standard_name=&#34;sea_water_temperature";
b:units=&#34;K";
b:cell_methods=&#34;measurement: standard_deviation";
</p>
</blockquote>
</blockquote>
<p>
Is that about right, Jonathan?
</p>
<p>
Grace and peace,
</p>
<p>
Jim
</p>

    </div>

              </div>
              <div class="change" id="trac-change-44-1378824701000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:44" class="cnum">
    <a href="#comment:44">comment:44</a>
  </span>
        in reply to:
    <a href="#comment:41">↑ 41</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-09-10T07%3A51%3A41-07%3A00&amp;precision=second" title="See timeline at 09/10/13 07:51:41">8 years ago</a> by ngalbraith
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Replying to <a class="ticket" href="./74#comment:41" title="Comment 41">jonathan</a>:
</p>
<blockquote>
<p>
As much as I'd like to be able to get rid of standard name modifiers, I think they're far more clear than cell methods for concepts like standard_error and detection_minimum. When the quantity in the data variable is not representative of the concept expressed by the standard name, you're likely to have data misinterpreted; a standard name modifier is much harder to miss than a cell method.
</p>
</blockquote>
<p>
Yes, we should all be looking at cell methods, but most of the method terms convey only ancillary information, at least for in situ data sets. The whole concept of cell methods could be improved if they were limited to descriptions of sampling/recording strategies, rather than including terms that transform the data variable from a geophysical phenomenon to a statistical value.
</p>
<p>
This is probably well out of the scope of this ticket, but maybe we should consider moving standard_deviation and variance from cell methods to standard name modifiers, since data variables with these 'methods' do not represent the the geophysical quantity expressed by the standard names.
</p>
<p>
Are there cases where these are used with a single axis, which would make that impossible? It seems more logical to me to group these with standard error and detection minimum than with point/max/mean/min etc. 
</p>

    </div>

              </div>
              <div class="change" id="trac-change-45-1378845879000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:45" class="cnum">
    <a href="#comment:45">comment:45</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-09-10T13%3A44%3A39-07%3A00&amp;precision=second" title="See timeline at 09/10/13 13:44:39">8 years ago</a> by jonathan
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Dear all
</p>
<p>
Jim's description of what I meant is correct. The original dimension is replaced by a dimension of size one when you collapse it by calculating the statistic. In just the same way, a variable which is a function of longitude, having a longitude dimension of size greater than one, becomes a variable with a longitude dimension of size one when you calculate the zonal mean of it. We record the operation of calculating the zonal mean in <tt>cell_methods</tt> with an entry <tt>longitude: mean</tt>, where <tt>longitude</tt> is the name of the longitude dimension (now of size one). Another example, closer to my suggestion of <tt>measurement</tt>, is a model ensemble. It is possible to have a dimension for ensemble member. It is a common operation to calculate ensemble mean and ensemble standard deviation, and we can record these in <tt>cell_methods</tt> in the same way.
</p>
<p>
I respectfully disagree with Nan about the importance of <tt>cell_methods</tt>. The standard name does not contain the entire description of the data variable. I think it's important to keep in mind that CF metadata is distributed over several attributes, which should always all be considered. The <tt>cell_methods</tt> makes important distinctions about how the values represent variation over coordinates. Its whole purpose is to represent statistical operations, and that's why I've made the suggestion in this ticket, because there seems to be an analogy to me. There is always a statistical operation involved in calculating a value, unless it's truly a point value. Moreover, <tt>cell_methods</tt> is a more flexible attribute than the standard name because it refers to the dimensions, which may have been treated statistically in different ways: for instance, a quantity might be a time-mean and a zonal maximum, or it might be (to address Nan's question) an interannual standard deviation of monthly means (<tt>time: mean within years time: standard_deviation over years</tt> in <tt>cell_methods</tt>).
</p>
<p>
Best wishes
</p>
<p>
Jonathan
</p>

    </div>

              </div>
              <div class="change" id="trac-change-46-1378905454000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:46" class="cnum">
    <a href="#comment:46">comment:46</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-09-11T06%3A17%3A34-07%3A00&amp;precision=second" title="See timeline at 09/11/13 06:17:34">8 years ago</a> by biard
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Hi.
</p>
<p>
I agree with Nan.  It sure seems to me that the standard_name for a variable is intended to indicate a class of measurements to which a variable belongs, such as sea_water_temperature, in order to identify variables that have roughly comparable contents.  Requiring decoding of the cell_methods attribute in order to tell if two variables are actually comparable appears to directly violate what I understand to be the intent of the standard_name attribute.  With the approach suggested by Jonathan, the standard_name is reduced to making a much fuzzier statement - effectively, "This variable has something other to do with measurements of X".
</p>
<p>
Maybe I'm wrong about the original/current interpretation of the standard_name attribute.  If its purpose was always fuzzier than I thought it was, then let's move on.  But if we are, in fact, talking about making a significant change in its interpretation, then I think we need to take a different approach.
</p>
<p>
Grace and peace,
</p>
<p>
Jim
</p>

    </div>

              </div>
              <div class="change" id="trac-change-47-1378909160000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:47" class="cnum">
    <a href="#comment:47">comment:47</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-09-11T07%3A19%3A20-07%3A00&amp;precision=second" title="See timeline at 09/11/13 07:19:20">8 years ago</a> by jonathan
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Dear Jim
</p>
<p>
We are not talking about a change of intention or interpretation of either attribute. <tt>cell_methods</tt> and <tt>standard_name</tt> are both original parts of the CF convention, and <tt>cell_methods</tt> has always included <tt>standard_deviation</tt>, <tt>variance</tt>, <tt>minimum</tt> and <tt>maximum</tt> as well as <tt>point</tt> and <tt>mean</tt>, for instance. The standard name is not the whole description. For instance, a commonly discussed quantity is the daily maximum of screen-height temperature. In CF, this is described by <tt>standard_name</tt> of <tt>air_temperature</tt>, <tt>cell_methods</tt> of <tt>time: maximum</tt>, and a <tt>height</tt> coordinate of 2.0 m (or 1.5 m, or whatever it was). It has been recognised in other discussions that there may also be a need to identify groups of metadata like this which together characterise a quantity. That was discussed under the "common concepts" trac ticket, which wasn't concluded, and more recently a method has been proposed in the <a class="ext-link" href="https://cf-pcmdi.llnl.gov./94"><span class="icon">​</span>CF standard string</a> ticket. It would be nice to conclude that one! 
</p>
<p>
However, in this ticket, if my suggestion that standard error of measurement is analogous to standard deviation in other dimensions doesn't seem natural to anyone else, it's obviously not the right approach to take. I was hoping to get rid of <tt>standard_name</tt> modifiers entirely, but we don't have to if we can't devise a better way. We could go back to the proposal as Randy had it at around <a class="ext-link" href="https://cf-pcmdi.llnl.gov./74#comment:33"><span class="icon">​</span>comment 33</a>, on which we largely agreed, I think, which solves the problem for Randy's applications and would leave <tt>standard_error</tt> as a modifier.
</p>
<p>
Cheers
</p>
<p>
Jonathan
</p>

    </div>

              </div>
              <div class="change" id="trac-change-48-1379796780000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:48" class="cnum">
    <a href="#comment:48">comment:48</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-09-21T13%3A53%3A00-07%3A00&amp;precision=second" title="See timeline at 09/21/13 13:53:00">8 years ago</a> by rhorne@…
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Dear All:
</p>
<p>
The message is a recap and a suggestion for a path forward.
</p>
<p>
The intent of this trac item is to provide a convention that allows a status_flag variable to be associated with more than one data variable. In the project I am working, the data variables have different standard_names, and, for the enhancement to be useful to us, it needs to support this case.
</p>
<p>
In the declaration of the status flag variable, the current conventions allow only a single standard name, which is that associated with the data variable, followed by the standard_name modifier “status_flag” to be the standard_name value.
</p>
<p>
The initial proposal to allow multiple data variables, each with a different standard_name, to be associated with a single standard_name included multiple, space-delimited standard_names to exist as values in the status flag variable’s standard_name attribute followed by "status_flag".
</p>
<p>
A subsequent proposal involved promoting two of the current standard_name modifiers, status_flag and number_of_observations to standard_name status.  This allows multiple data variables to share status_flag or number_of_observation variables per the following:
</p>
<p>
float data_1(lat,lon);
data_1:ancillary_variables=&#34;status_1";
float data_2 (lat,lon);
data_2:ancillary_variables=&#34;status_1";
int status_1
status_1:standard_name=&#34;status_flag";
</p>
<p>
Note that the reason that only status_flag and number_of_observations could use this approach is that they are unitless versus the other two current standard_name modifiers, standard_error and detection_minimum that have the same units as the related data variable.
</p>
<p>
The con of this approach was identified, and it revolves around the standard_names “status_flag” and “number_of_observations”  not being interpretable without understanding the related data variables.
</p>
<p>
There was then some discussion that ensued related to how the functionality provided the standard_name modifiers, standard_error and detection_minimum, could be subsumed with cell_methods.  This discussion dovetailed with that which occurred on message thread “[CF-metadata] Question from NODC about interplay of standard name modifiers, cell_methods, etc.” 
</p>
<p>
While I think there is a strong argument to be made that standard_error and detection_minimum are essentially cell_methods, I would suggest we work this issue, separately, in the context of a different discussion topic / trac item. 
</p>
<p>
It would seem at this juncture that the reasonable candidate solutions to allowing multiple data variables to share a status_flag variable have been explored sufficiently well.  It is pretty clear there is no perfect solution.
</p>
<p>
It would also seem that there is some validity to the argument revolving around the overlap in functionality provided by cell_methods, and the standard_error and detection_minimum standard_name modifiers.
</p>
<p>
As a result, I think the best option to allow multiple data variables to share a status_flag variable is to promote status_flag and number_of_observations to standard_name status as described above.  These would no longer be standard_name modifiers.  Going with approach sets the stage for subsequent discussion about cell methods and the remaining two standard_name modifiers.
</p>
<p>
Is this a reasonable path forward ?  If so, I will write up the changes to the standard in a subsequent post.
</p>
<p>
very respectfully,
</p>
<p>
randy
</p>

    </div>

              </div>
              <div class="change" id="trac-change-49-1379879703000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:49" class="cnum">
    <a href="#comment:49">comment:49</a>
  </span>
          <span>follow-up:</span>
    <a href="#comment:50" class="follow-up">↓ 50</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-09-22T12%3A55%3A03-07%3A00&amp;precision=second" title="See timeline at 09/22/13 12:55:03">8 years ago</a> by jonathan
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Dear Randy
</p>
<p>
Thank you for the helpful summary. I think this is a reasonable approach i.e. add <tt>status_flag</tt> and <tt>number_of_observations</tt> as standard names of dimensionless quantities. Regarding these, I would note:
</p>
<ul><li>Although the standard name of the ancillary variable will no longer identify the quantity it belongs to, the <tt>ancillary_variables</tt> attribute serves to link them.
</li></ul><ul><li>So far, we have not abolished any existing facility of CF. We do not need to withdraw <tt>status_flag</tt> or <tt>number_of_observations</tt> as standard names. We could deprecate them i.e. recommend against using them. In that case the CF checker would give a warning (rather than an error) if they were used in a file conforming to the version of CF in which this change was made. I suggest that this option should be considered.
</li></ul><p>
A separate ticket can deal with any proposal for <tt>standard_error</tt> and <tt>detection_minimum</tt>, as you suggest.
</p>
<p>
Cheers
</p>
<p>
Jonathan
</p>

    </div>

              </div>
              <div class="change" id="trac-change-50-1380033800000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:50" class="cnum">
    <a href="#comment:50">comment:50</a>
  </span>
        in reply to:
    <a href="#comment:49">↑ 49</a>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-09-24T07%3A43%3A20-07%3A00&amp;precision=second" title="See timeline at 09/24/13 07:43:20">8 years ago</a> by ngalbraith
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
I agree, this is a clear summary; thank you, Randy. 
</p>
<p>
Replying to <a class="ticket" href="./74#comment:49" title="Comment 49">jonathan</a>:
</p>
<p>
 
</p>
<blockquote class="citation">
<ul><li>So far, we have not abolished any existing facility of CF. We do not need to withdraw <tt>status_flag</tt> or <tt>number_of_observations</tt> as standard names. We could deprecate them i.e. recommend against using them. 
</li></ul></blockquote>
<p>
I think the above should be amended to read 
<em>do not need to withdraw <tt>status_flag</tt> or <tt>number_of_observations</tt> as standard name modifiers</em>, unless I'm completely missing the gist of the decision.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-51-1380041534000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:51" class="cnum">
    <a href="#comment:51">comment:51</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-09-24T09%3A52%3A14-07%3A00&amp;precision=second" title="See timeline at 09/24/13 09:52:14">8 years ago</a> by jonathan
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Quite right, thanks for the correction, Nan. Jonathan
</p>

    </div>

              </div>
              <div class="change" id="trac-change-52-1380389857000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:52" class="cnum">
    <a href="#comment:52">comment:52</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-09-28T10%3A37%3A37-07%3A00&amp;precision=second" title="See timeline at 09/28/13 10:37:37">8 years ago</a> by rhorne@…
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Dear All:
</p>
<p>
This post defines "strawman" redlines to the CF standard to reflect this enhancement in the CF standard.
</p>
<p>
(1)
In paragraph 3.5 Flags ...
 
Change example 3.3 to be:
</p>
<p>
byte current_speed_qc(time, depth, lat, lon) ;
</p>
<blockquote>
<p>
current_speed_qc:long_name = "Current Speed Quality" ;
current_speed_qc:standard_name = "status_flag" ;
current_speed_qc:_FillValue = -128b ;
current_speed_qc:valid_range = 0b, 2b ;
current_speed_qc:flag_values = 0b, 1b, 2b ;
current_speed_qc:flag_meanings = "quality_good sensor_nonfunctional outside_valid_range" ;
</p>
</blockquote>
<p>
The only change made to this example is the removal of the "sea_water_speed" from the flag variable's standard_name.
</p>
<p>
Immediately after the example, add the following sentence:
</p>
<p>
"Note that the data variable containing current speed has an ancillary_variables attribute with a value containing current_speed_qc."
</p>
<p>
(2)
In Appendix C. Standard Name Modifiers ...
</p>
<p>
Add the following statement after the existing description for the number_of_observations modifier.
</p>
<p>
"The use of this modifier is deprecated and the standard_name number_of_observations is preferred to describe
this type of metadata variable."
</p>
<p>
Add the following statement after the existing description for the status_flag modifier.
</p>
<p>
"The use of this modifier is deprecated and the standard_name status_flag is preferred to describe
this type of metadata variable."
</p>
<p>
(3)
Note that a post requesting standard_names status_flag and number_of_observations are posted to the CF metadata message board.
</p>
<p>
very respectfully,
</p>
<p>
randy
</p>

    </div>

              </div>
              <div class="change" id="trac-change-53-1380817808000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:53" class="cnum">
    <a href="#comment:53">comment:53</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-10-03T09%3A30%3A08-07%3A00&amp;precision=second" title="See timeline at 10/03/13 09:30:08">8 years ago</a> by jonathan
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Dear Randy
</p>
<p>
Thanks. I think that is fine and I support this change being made. We should also add to Sect 3.3 of the conformance document:
</p>
<blockquote>
<p>
Recommendations:
</p>
</blockquote>
<ul><li>Use of the <tt>standard_name</tt> modifiers <tt>status_flag</tt> and <tt>number_of_observations</tt> is deprecated, and the corresponding <tt>standard_name</tt>s are recommended instead.
</li></ul><p>
Cheers
</p>
<p>
Jonathan
</p>

    </div>

              </div>
              <div class="change" id="trac-change-54-1382449234000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:54" class="cnum">
    <a href="#comment:54">comment:54</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-10-22T06%3A40%3A34-07%3A00&amp;precision=second" title="See timeline at 10/22/13 06:40:34">8 years ago</a> by rhorne@…
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Dear CF committee:
</p>
<p>
Three weeks has gone by without any additional comments on this enhancement.
</p>
<p>
Do you support this enhancement ?
</p>
<p>
very respectfully,
</p>
<p>
randy
</p>

    </div>

              </div>
              <div class="change" id="trac-change-55-1382451511000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:55" class="cnum">
    <a href="#comment:55">comment:55</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-10-22T07%3A18%3A31-07%3A00&amp;precision=second" title="See timeline at 10/22/13 07:18:31">8 years ago</a> by biard
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
I'm good with it. (Not that it mattersmuch! :-))  I think the final solution sidesteps the thorny issues of data relationships that this ticket raised.  It's also a good way to address the particular issues.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-56-1382517425000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:56" class="cnum">
    <a href="#comment:56">comment:56</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-10-23T01%3A37%3A05-07%3A00&amp;precision=second" title="See timeline at 10/23/13 01:37:05">7 years ago</a> by jonathan
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Dear all
</p>
<p>
Assuming that Nan supports this proposal as it was most recently summarised <a class="ext-link" href="https://cf-pcmdi.llnl.gov./74#comment:52"><span class="icon">​</span>in comment 52</a>, then this ticket has sufficient support to be accepted according to the rules. Jeff, please could you include it in the new CF version you are currently compiling. Randy should be added to the list of additional authors of the CF standard in the new version. Thank you, Randy.
</p>
<p>
Jonathan
</p>

    </div>

              </div>
              <div class="change" id="trac-change-57-1382553996000000">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:57" class="cnum">
    <a href="#comment:57">comment:57</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2013-10-23T11%3A46%3A36-07%3A00&amp;precision=second" title="See timeline at 10/23/13 11:46:36">7 years ago</a> by ngalbraith
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
I support this update - thanks, all.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-58-1483542225002187">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:58" class="cnum">
    <a href="#comment:58">comment:58</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2017-01-04T07%3A03%3A45-08%3A00&amp;precision=second" title="See timeline at 01/04/17 07:03:45">4 years ago</a> by davidhassell
  </h3>
  <div class="trac-ticket-buttons">
  </div>
  <ul class="changes">
    <li class="trac-field-owner">
      <strong class="trac-field-owner">Owner</strong>
        changed from <em>cf-conventions@…</em> to <em>davidhassell</em>
    </li><li class="trac-field-status">
      <strong class="trac-field-status">Status</strong>
        changed from <em>new</em> to <em>accepted</em>
    </li>
  </ul>

              </div>
              <div class="change" id="trac-change-59-1487714416106571">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:59" class="cnum">
    <a href="#comment:59">comment:59</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2017-02-21T14%3A00%3A16-08%3A00&amp;precision=second" title="See timeline at 02/21/17 14:00:16">4 years ago</a> by painter1
  </h3>
  <div class="trac-ticket-buttons">
  </div>
    <div class="comment searchable">
      <p>
Tanya Reshel has made the necessary changes to the CF Conventions document, for version 1.7.
The two new standard_names have been approved.
However, I am leaving this ticket open because the conformance document hasn't been updated.
This also may affect any CF checker software, but I believe that the ticket can be closed without updating such software.
</p>

    </div>

              </div>
              <div class="change" id="trac-change-60-1494884989861528">
                
  <h3 class="change">
    <span class="threading">
      <span id="comment:60" class="cnum">
    <a href="#comment:60">comment:60</a>
  </span>
    </span>
        Changed <a class="timeline" href="/trac/timeline?from=2017-05-15T14%3A49%3A49-07%3A00&amp;precision=second" title="See timeline at 05/15/17 14:49:49">4 years ago</a> by painter1
  </h3>
  <div class="trac-ticket-buttons">
  </div>
  <ul class="changes">
    <li class="trac-field-resolution">
      <strong class="trac-field-resolution">Resolution</strong>
        set to <em>fixed</em>
    </li><li class="trac-field-status">
      <strong class="trac-field-status">Status</strong>
        changed from <em>accepted</em> to <em>closed</em>
    </li>
  </ul>

              </div>
          </div>
        </div>
      <div id="help"><strong>Note:</strong> See
        <a href="/trac/wiki/TracTickets">TracTickets</a> for help on using
        tickets.</div>
    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="./74?format=rss" class="rss">RSS Feed</a>
        </li><li>
          <a rel="nofollow" href="./74?format=csv" class="csv">Comma-delimited Text</a>
        </li><li class="last">
          <a rel="nofollow" href="./74?format=tab" class="tab">Tab-delimited Text</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="https://trac.edgewall.org/"><img src="/trac/chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="/trac/about"><strong>Trac 1.0.20</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the CF Metadata home page at<br /><a href="http://cf-convention.github.io">http://cf-convention.github.io</a><br><font color="#0000ff" size="3"><b>The CF Metadata Trac issue tracker is read-only and will soon be shut down permanently</b></font></p>
    </div>
  </body>
</html>
